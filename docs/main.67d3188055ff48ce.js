"use strict";(self.webpackChunkauth_fb=self.webpackChunkauth_fb||[]).push([[179],{2011:(pt,Re,F)=>{F.d(Re,{Dh:()=>fe,GT:()=>ye,cc:()=>Oe,hO:()=>Ge,on:()=>q,pX:()=>le,xv:()=>ve});var f=F(4650),B=F(127),P=F(5813);pt=F.hmd(pt);const oe=["ngOnDestroy"],le=(_e,Xe,et,Le={})=>new Proxy(_e,{get:(Ne,Ae)=>et.runOutsideAngular(()=>{var ze;if(_e[Ae])return!(null===(ze=Le?.spy)||void 0===ze)&&ze.get&&Le.spy.get(Ae,_e[Ae]),_e[Ae];if(oe.indexOf(Ae)>-1)return()=>{};const se=Xe.toPromise().then(de=>{const we=de&&de[Ae];return"function"==typeof we?we.bind(de):we&&we.then?we.then(J=>et.run(()=>J)):et.run(()=>we)});return new Proxy(()=>{},{get:(de,we)=>se[we],apply:(de,we,J)=>se.then(te=>{var pe;const ae=te&&te(...J);return!(null===(pe=Le?.spy)||void 0===pe)&&pe.apply&&Le.spy.apply(Ae,J,ae),ae})})})}),ye=(_e,Xe)=>{Xe.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Le=>{Object.defineProperty(_e.prototype,Le,Object.getOwnPropertyDescriptor(et.prototype||et,Le))})})};class me{constructor(Xe){return Xe}}const fe=new f.OlP("angularfire2.app.options"),ve=new f.OlP("angularfire2.app.name");function q(_e,Xe,et){const Ne="object"==typeof et&&et||{};Ne.name=Ne.name||"string"==typeof et&&et||"[DEFAULT]";const ze=B.Z.apps.filter(se=>se&&se.name===Ne.name)[0]||Xe.runOutsideAngular(()=>B.Z.initializeApp(_e,Ne));try{JSON.stringify(_e)!==JSON.stringify(ze.options)&&z("error",`${ze.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(ze)}const z=(_e,...Xe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[_e](...Xe)},X={provide:me,useFactory:q,deps:[fe,f.R0b,[new f.FiY,ve]]};let Ge=(()=>{class _e{constructor(et){B.Z.registerVersion("angularfire",P.q4.full,"core"),B.Z.registerVersion("angularfire",P.q4.full,"app-compat"),B.Z.registerVersion("angular",f.q4F.full,et.toString())}static initializeApp(et,Le){return{ngModule:_e,providers:[{provide:fe,useValue:et},{provide:ve,useValue:Le}]}}}return _e.\u0275fac=function(et){return new(et||_e)(f.LFG(f.Lbi))},_e.\u0275mod=f.oAB({type:_e}),_e.\u0275inj=f.cJS({providers:[X]}),_e})();function Oe(_e,Xe,et,Le,Ne){const[,Ae,ze]=globalThis.\u0275AngularfireInstanceCache.find(se=>se[0]===_e)||[];if(Ae)return function Te(_e,Xe){try{return _e.toString()===Xe.toString()}catch{return _e===Xe}}(Ne,ze)||(Ce("error",`${Xe} was already initialized on the ${et} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Ne,was:ze})),Ae;{const se=Le();return globalThis.\u0275AngularfireInstanceCache.push([_e,se,Ne]),se}}const st=!!pt.hot,Ce=(_e,...Xe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[_e](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,Re,F)=>{F.d(Re,{q4:()=>it,iC:()=>hs,fc:()=>Qn,HU:()=>Rs,vb:()=>oa,JM:()=>uu});var f=F(4650),B=F(5867),P=F(5861),oe=F(9681),le=F(2090),ye=F(4859),me=F(1877),fe=F(8766);const ve="@firebase/installations",q="0.5.12",X=`w:${q}`,Ge="FIS_v2",Xe=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(b){return b instanceof le.ZR&&b.code.includes("request-failed")}function Le({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Ne(b){return{token:b.token,requestStatus:2,expiresIn:te(b.expiresIn),creationTime:Date.now()}}function Ae(b,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,P.Z)(function*(b,T){const U=(yield T.json()).error;return Xe.create("request-failed",{requestName:b,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function se({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function de(b,{refreshToken:T}){const M=se(b);return M.append("Authorization",function pe(b){return`${Ge} ${b}`}(T)),M}function we(b){return J.apply(this,arguments)}function J(){return(J=(0,P.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function te(b){return Number(b.replace("s","000"))}function ae(b,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:M}){const U=Le(b),ee=se(b),ue=T.getImmediate({optional:!0});if(ue){const St=yield ue.getHeartbeatsHeader();St&&ee.append("x-firebase-client",St)}const Be={method:"POST",headers:ee,body:JSON.stringify({fid:M,authVersion:Ge,appId:b.appId,sdkVersion:X})},dt=yield we(()=>fetch(U,Be));if(dt.ok){const St=yield dt.json();return{fid:St.fid||M,registrationStatus:2,refreshToken:St.refreshToken,authToken:Ne(St.authToken)}}throw yield Ae("Create Installation",dt)})).apply(this,arguments)}function je(b){return new Promise(T=>{setTimeout(T,b)})}const Jt=/^[cdef][\w-]{21}$/;function Ke(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function mn(b){return function yt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Jt.test(M)?M:""}catch{return""}}function Ln(b){return`${b.appName}!${b.appId}`}const rn=new Map;function Xt(b,T){const M=Ln(b);Sr(M,T),function zs(b,T){const M=function xn(){return!Ar&&"BroadcastChannel"in self&&(Ar=new BroadcastChannel("[Firebase] FID Change"),Ar.onmessage=b=>{Sr(b.data.key,b.data.fid)}),Ar}();M&&M.postMessage({key:b,fid:T}),function es(){0===rn.size&&Ar&&(Ar.close(),Ar=null)}()}(M,T)}function Sr(b,T){const M=rn.get(b);if(M)for(const U of M)U(T)}let Ar=null;const Vn="firebase-installations-store";let Di=null;function Oi(){return Di||(Di=(0,fe.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Vn)}})),Di}function nt(b,T){return yr.apply(this,arguments)}function yr(){return(yr=(0,P.Z)(function*(b,T){const M=Ln(b),ee=(yield Oi()).transaction(Vn,"readwrite"),ue=ee.objectStore(Vn),Me=yield ue.get(M);return yield ue.put(T,M),yield ee.done,(!Me||Me.fid!==T.fid)&&Xt(b,T.fid),T})).apply(this,arguments)}function Un(b){return hn.apply(this,arguments)}function hn(){return(hn=(0,P.Z)(function*(b){const T=Ln(b),U=(yield Oi()).transaction(Vn,"readwrite");yield U.objectStore(Vn).delete(T),yield U.done})).apply(this,arguments)}function vr(b,T){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,P.Z)(function*(b,T){const M=Ln(b),ee=(yield Oi()).transaction(Vn,"readwrite"),ue=ee.objectStore(Vn),Me=yield ue.get(M),Be=T(Me);return void 0===Be?yield ue.delete(M):yield ue.put(Be,M),yield ee.done,Be&&(!Me||Me.fid!==Be.fid)&&Xt(b,Be.fid),Be})).apply(this,arguments)}function vn(b){return wn.apply(this,arguments)}function wn(){return(wn=(0,P.Z)(function*(b){let T;const M=yield vr(b.appConfig,U=>{const ee=_n(U),ue=gt(b,ee);return T=ue.registrationPromise,ue.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function _n(b){return Dt(b||{fid:Ke(),registrationStatus:0})}function gt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Xe.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function mt(b,T){return kt.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Gr(b)}:{installationEntry:T}}function kt(){return(kt=(0,P.Z)(function*(b,T){try{const M=yield ae(b,T);return nt(b.appConfig,M)}catch(M){throw et(M)&&409===M.customData.serverCode?yield Un(b.appConfig):yield nt(b.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Gr(b){return wr.apply(this,arguments)}function wr(){return(wr=(0,P.Z)(function*(b){let T=yield xr(b.appConfig);for(;1===T.registrationStatus;)yield je(100),T=yield xr(b.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield vn(b);return U||M}return T})).apply(this,arguments)}function xr(b){return vr(b,T=>{if(!T)throw Xe.create("installation-not-found");return Dt(T)})}function Dt(b){return function kr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Ft(b,T){return ti.apply(this,arguments)}function ti(){return(ti=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},M){const U=zt(b,M),ee=de(b,M),ue=T.getImmediate({optional:!0});if(ue){const St=yield ue.getHeartbeatsHeader();St&&ee.append("x-firebase-client",St)}const Be={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:X,appId:b.appId}})},dt=yield we(()=>fetch(U,Be));if(dt.ok)return Ne(yield dt.json());throw yield Ae("Generate Auth Token",dt)})).apply(this,arguments)}function zt(b,{fid:T}){return`${Le(b)}/${T}/authTokens:generate`}function Q(b){return G.apply(this,arguments)}function G(){return(G=(0,P.Z)(function*(b,T=!1){let M;const U=yield vr(b.appConfig,ue=>{if(!It(ue))throw Xe.create("not-registered");const Me=ue.authToken;if(!T&&ln(Me))return ue;if(1===Me.requestStatus)return M=H(b,T),ue;{if(!navigator.onLine)throw Xe.create("app-offline");const Be=rr(ue);return M=xe(b,Be),Be}});return M?yield M:U.authToken})).apply(this,arguments)}function H(b,T){return K.apply(this,arguments)}function K(){return(K=(0,P.Z)(function*(b,T){let M=yield Z(b.appConfig);for(;1===M.authToken.requestStatus;)yield je(100),M=yield Z(b.appConfig);const U=M.authToken;return 0===U.requestStatus?Q(b,T):U})).apply(this,arguments)}function Z(b){return vr(b,T=>{if(!It(T))throw Xe.create("not-registered");return function ne(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function xe(b,T){return We.apply(this,arguments)}function We(){return(We=(0,P.Z)(function*(b,T){try{const M=yield Ft(b,T),U=Object.assign(Object.assign({},T),{authToken:M});return yield nt(b.appConfig,U),M}catch(M){if(!et(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield nt(b.appConfig,U)}else yield Un(b.appConfig);throw M}})).apply(this,arguments)}function It(b){return void 0!==b&&2===b.registrationStatus}function ln(b){return 2===b.requestStatus&&!function an(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function rr(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function W(){return(W=(0,P.Z)(function*(b){const T=b,{installationEntry:M,registrationPromise:U}=yield vn(T);return U?U.catch(console.error):Q(T).catch(console.error),M.fid})).apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(b,T=!1){const M=b;return yield vt(M),(yield Q(M,T)).token})).apply(this,arguments)}function vt(b){return bt.apply(this,arguments)}function bt(){return(bt=(0,P.Z)(function*(b){const{registrationPromise:T}=yield vn(b);T&&(yield T)})).apply(this,arguments)}function qs(b){return Xe.create("missing-app-config-values",{valueName:b})}const Mo="installations",Ks=b=>{const T=b.getProvider("app").getImmediate(),M=function En(b){if(!b||!b.options)throw qs("App Configuration");if(!b.name)throw qs("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!b.options[M])throw qs(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ro=b=>{const T=b.getProvider("app").getImmediate(),M=(0,oe._getProvider)(T,Mo).getImmediate();return{getId:()=>function $(b){return W.apply(this,arguments)}(M),getToken:ee=>function Ie(b){return qe.apply(this,arguments)}(M,ee)}};(function Lu(){(0,oe._registerComponent)(new ye.wA(Mo,Ks,"PUBLIC")),(0,oe._registerComponent)(new ye.wA("installations-internal",Ro,"PRIVATE"))})(),(0,oe.registerVersion)(ve,q),(0,oe.registerVersion)(ve,q,"esm2017");const ns="@firebase/remote-config",Yn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Hl{constructor(T,M,U,ee){this.client=T,this.storage=M,this.storageCache=U,this.logger=ee}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,ee=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${ee}.`),ee}fetch(T){var M=this;return(0,P.Z)(function*(){const[U,ee]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(ee&&M.isCachedDataFresh(T.cacheMaxAgeMillis,U))return ee;T.eTag=ee&&ee.eTag;const ue=yield M.client.fetch(T),Me=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Me.push(M.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Me),ue})()}}function Ba(b=navigator){return b.languages&&b.languages[0]||b.language}class Xs{constructor(T,M,U,ee,ue,Me){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=U,this.projectId=ee,this.apiKey=ue,this.appId=Me}fetch(T){var M=this;return(0,P.Z)(function*(){var U,ee,ue;const[Me,Be]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),St=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},_t={sdk_version:M.sdkVersion,app_instance_id:Me,app_instance_id_token:Be,app_id:M.appId,language_code:Ba()},Gn={method:"POST",headers:xt,body:JSON.stringify(_t)},Ir=fetch(St,Gn),ua=new Promise((la,fo)=>{T.signal.addEventListener(()=>{const ui=new Error("The operation was aborted.");ui.name="AbortError",fo(ui)})});let Ps;try{yield Promise.race([Ir,ua]),Ps=yield Ir}catch(la){let fo="fetch-client-network";throw"AbortError"===(null===(U=la)||void 0===U?void 0:U.name)&&(fo="fetch-timeout"),Yn.create(fo,{originalErrorMessage:null===(ee=la)||void 0===ee?void 0:ee.message})}let Ot=Ps.status;const xi=Ps.headers.get("ETag")||void 0;let fs,Gi;if(200===Ps.status){let la;try{la=yield Ps.json()}catch(fo){throw Yn.create("fetch-client-parse",{originalErrorMessage:null===(ue=fo)||void 0===ue?void 0:ue.message})}fs=la.entries,Gi=la.state}if("INSTANCE_STATE_UNSPECIFIED"===Gi?Ot=500:"NO_CHANGE"===Gi?Ot=304:("NO_TEMPLATE"===Gi||"EMPTY_CONFIG"===Gi)&&(fs={}),304!==Ot&&200!==Ot)throw Yn.create("fetch-status",{httpStatus:Ot});return{status:Ot,eTag:xi,config:fs}})()}}class is{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,P.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:U}){var ee=this;return(0,P.Z)(function*(){yield function hi(b,T){return new Promise((M,U)=>{const ee=Math.max(T-Date.now(),0),ue=setTimeout(M,ee);b.addEventListener(()=>{clearTimeout(ue),U(Yn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ue=yield ee.client.fetch(T);return yield ee.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function Tg(b){if(!(b instanceof le.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ue))throw ue;const Me={throttleEndTimeMillis:Date.now()+(0,le.$s)(U),backoffCount:U+1};return yield ee.storage.setThrottleMetadata(Me),ee.attemptFetch(T,Me)}})()}}class $l{constructor(T,M,U,ee,ue){this.app=T,this._client=M,this._storageCache=U,this._storage=ee,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ja(b,T){var M;const U=b.target.error||void 0;return Yn.create(T,{originalErrorMessage:U&&(null===(M=U)||void 0===M?void 0:M.message)})}const Po="app_namespace_store";class sd{constructor(T,M,U,ee=function xg(){return new Promise((b,T)=>{var M;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=ee=>{T(ja(ee,"storage-open"))},U.onsuccess=ee=>{b(ee.target.result)},U.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(Po,{keyPath:"compositeKey"})}}catch(U){T(Yn.create("storage-open",{originalErrorMessage:null===(M=U)||void 0===M?void 0:M.message}))}})}()){this.appId=T,this.appName=M,this.namespace=U,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,P.Z)(function*(){const U=yield M.openDbPromise;return new Promise((ee,ue)=>{var Me;const dt=U.transaction([Po],"readonly").objectStore(Po),St=M.createCompositeKey(T);try{const xt=dt.get(St);xt.onerror=_t=>{ue(ja(_t,"storage-get"))},xt.onsuccess=_t=>{const Gn=_t.target.result;ee(Gn?Gn.value:void 0)}}catch(xt){ue(Yn.create("storage-get",{originalErrorMessage:null===(Me=xt)||void 0===Me?void 0:Me.message}))}})})()}set(T,M){var U=this;return(0,P.Z)(function*(){const ee=yield U.openDbPromise;return new Promise((ue,Me)=>{var Be;const St=ee.transaction([Po],"readwrite").objectStore(Po),xt=U.createCompositeKey(T);try{const _t=St.put({compositeKey:xt,value:M});_t.onerror=Gn=>{Me(ja(Gn,"storage-set"))},_t.onsuccess=()=>{ue()}}catch(_t){Me(Yn.create("storage-set",{originalErrorMessage:null===(Be=_t)||void 0===Be?void 0:Be.message}))}})})()}delete(T){var M=this;return(0,P.Z)(function*(){const U=yield M.openDbPromise;return new Promise((ee,ue)=>{var Me;const dt=U.transaction([Po],"readwrite").objectStore(Po),St=M.createCompositeKey(T);try{const xt=dt.delete(St);xt.onerror=_t=>{ue(ja(_t,"storage-delete"))},xt.onsuccess=()=>{ee()}}catch(xt){ue(Yn.create("storage-delete",{originalErrorMessage:null===(Me=xt)||void 0===Me?void 0:Me.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class ko{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const M=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),ee=T.storage.getActiveConfig(),ue=yield M;ue&&(T.lastFetchStatus=ue);const Me=yield U;Me&&(T.lastSuccessfulFetchTimestampMillis=Me);const Be=yield ee;Be&&(T.activeConfig=Be)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Dy(){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,P.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function od(){(0,oe._registerComponent)(new ye.wA("remote-config",function b(T,{instanceIdentifier:M}){const U=T.getProvider("app").getImmediate(),ee=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Yn.create("registration-window");if(!(0,le.hl)())throw Yn.create("indexed-db-unavailable");const{projectId:ue,apiKey:Me,appId:Be}=U.options;if(!ue)throw Yn.create("registration-project-id");if(!Me)throw Yn.create("registration-api-key");if(!Be)throw Yn.create("registration-app-id");const dt=new sd(Be,U.name,M=M||"firebase"),St=new ko(dt),xt=new me.Yd(ns);xt.logLevel=me.in.ERROR;const _t=new Xs(ee,oe.SDK_VERSION,M,ue,Me,Be),Gn=new is(_t,dt),Ir=new Hl(Gn,dt,St,xt),ua=new $l(U,Ir,St,dt,xt);return function Dn(b){const T=(0,le.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ua),ua},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(ns,"0.3.11"),(0,oe.registerVersion)(ns,"0.3.11","esm2017")}();const Mr="/firebase-messaging-sw.js",Fo="/firebase-cloud-messaging-push-scope",Ds="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Bu="google.c.a.c_id",Gl="google.c.a.c_l",ld="google.c.a.ts",Lo="google.c.a.e";var fi=(()=>{return(b=fi||(fi={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",fi;var b})();function ss(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ii(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),ee=new Uint8Array(U.length);for(let ue=0;ue<U.length;++ue)ee[ue]=U.charCodeAt(ue);return ee}const eo="fcm_token_details_db",Vo="fcm_token_object_Store";function Rg(b){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(eo))return null;let T=null;return(yield(0,fe.X3)(eo,5,{upgrade:(U=(0,P.Z)(function*(ee,ue,Me,Be){var dt;if(ue<2||!ee.objectStoreNames.contains(Vo))return;const St=Be.objectStore(Vo),xt=yield St.index("fcmSenderId").get(b);if(yield St.clear(),xt)if(2===ue){const _t=xt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;T={token:_t.fcmToken,createTime:null!==(dt=_t.createTime)&&void 0!==dt?dt:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:ss(_t.vapidKey)}}}else if(3===ue){const _t=xt;T={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:ss(_t.auth),p256dh:ss(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:ss(_t.vapidKey)}}}else if(4===ue){const _t=xt;T={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:ss(_t.auth),p256dh:ss(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:ss(_t.vapidKey)}}}}),function(ue,Me,Be,dt){return U.apply(this,arguments)})})).close(),yield(0,fe.Lj)(eo),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Pn(T)?T:null;var U}),Wl.apply(this,arguments)}function Pn(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Si="firebase-messaging-store";let Rr=null;function ju(){return Rr||(Rr=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Si)}})),Rr}function to(b){return Li.apply(this,arguments)}function Li(){return(Li=(0,P.Z)(function*(b){const T=pi(b),U=yield(yield ju()).transaction(Si).objectStore(Si).get(T);if(U)return U;{const ee=yield Rg(b.appConfig.senderId);if(ee)return yield sn(b,ee),ee}})).apply(this,arguments)}function sn(b,T){return zl.apply(this,arguments)}function zl(){return(zl=(0,P.Z)(function*(b,T){const M=pi(b),ee=(yield ju()).transaction(Si,"readwrite");return yield ee.objectStore(Si).put(T,M),yield ee.done,T})).apply(this,arguments)}function Ts(b){return ql.apply(this,arguments)}function ql(){return(ql=(0,P.Z)(function*(b){const T=pi(b),U=(yield ju()).transaction(Si,"readwrite");yield U.objectStore(Si).delete(T),yield U.done})).apply(this,arguments)}function pi({appConfig:b}){return b.appId}const Bn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nt(b,T){return $a.apply(this,arguments)}function $a(){return($a=(0,P.Z)(function*(b,T){var M;const U=yield za(b),ee=Pe(T),ue={method:"POST",headers:U,body:JSON.stringify(ee)};let Me;try{Me=yield(yield fetch(no(b.appConfig),ue)).json()}catch(Be){throw Bn.create("token-subscribe-failed",{errorInfo:null===(M=Be)||void 0===M?void 0:M.toString()})}if(Me.error)throw Bn.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw Bn.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function Ng(b,T){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,P.Z)(function*(b,T){var M;const U=yield za(b),ee=Pe(T.subscriptionOptions),ue={method:"PATCH",headers:U,body:JSON.stringify(ee)};let Me;try{Me=yield(yield fetch(`${no(b.appConfig)}/${T.token}`,ue)).json()}catch(Be){throw Bn.create("token-update-failed",{errorInfo:null===(M=Be)||void 0===M?void 0:M.toString()})}if(Me.error)throw Bn.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw Bn.create("token-update-no-token");return Me.token})).apply(this,arguments)}function dd(b,T){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,P.Z)(function*(b,T){var M;const ee={method:"DELETE",headers:yield za(b)};try{const Me=yield(yield fetch(`${no(b.appConfig)}/${T}`,ee)).json();if(Me.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(ue){throw Bn.create("token-unsubscribe-failed",{errorInfo:null===(M=ue)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function no({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function za(b){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,P.Z)(function*({appConfig:b,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Pe({p256dh:b,auth:T,endpoint:M,vapidKey:U}){const ee={web:{endpoint:M,auth:T,p256dh:b}};return U!==Ds&&(ee.web.applicationPubKey=U),ee}const qt=6048e5;function cf(b){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,P.Z)(function*(b){const T=yield df(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:ss(T.getKey("auth")),p256dh:ss(T.getKey("p256dh"))},U=yield to(b.firebaseDependencies);if(U){if(Pg(U.subscriptionOptions,M))return Date.now()>=U.createTime+qt?Hu(b,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield dd(b.firebaseDependencies,U.token)}catch(ee){console.warn(ee)}return $u(b.firebaseDependencies,M)}return $u(b.firebaseDependencies,M)})).apply(this,arguments)}function sr(b){return jo.apply(this,arguments)}function jo(){return(jo=(0,P.Z)(function*(b){const T=yield to(b.firebaseDependencies);T&&(yield dd(b.firebaseDependencies,T.token),yield Ts(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Hu(b,T){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,P.Z)(function*(b,T){try{const M=yield Ng(b.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield sn(b.firebaseDependencies,U),M}catch(M){throw yield sr(b),M}})).apply(this,arguments)}function $u(b,T){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,P.Z)(function*(b,T){const U={token:yield Nt(b,T),createTime:Date.now(),subscriptionOptions:T};return yield sn(b,U),U.token})).apply(this,arguments)}function df(b,T){return qa.apply(this,arguments)}function qa(){return(qa=(0,P.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ii(T)})})).apply(this,arguments)}function Pg(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function ro(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function or(b,T){if(!T.notification)return;b.notification={};const M=T.notification.title;M&&(b.notification.title=M);const U=T.notification.body;U&&(b.notification.body=U);const ee=T.notification.image;ee&&(b.notification.image=ee)}(T,b),function Vi(b,T){!T.data||(b.data=T.data)}(T,b),function Ka(b,T){var M,U,ee,ue,Me;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;b.fcmOptions={};const Be=null!==(ee=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==ee?ee:null===(ue=T.notification)||void 0===ue?void 0:ue.click_action;Be&&(b.fcmOptions.link=Be);const dt=null===(Me=T.fcmOptions)||void 0===Me?void 0:Me.analytics_label;dt&&(b.fcmOptions.analyticsLabel=dt)}(T,b),T}function Za(b){return"object"==typeof b&&!!b&&Bu in b}function os(b,T){const M=[];for(let U=0;U<b.length;U++)M.push(b.charAt(U)),U<T.length&&M.push(T.charAt(U));return M.join("")}function Kl(b){return Bn.create("missing-app-config-values",{valueName:b})}os("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),os("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fd{constructor(T,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function hd(b){if(!b||!b.options)throw Kl("App Configuration Object");if(!b.name)throw Kl("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const U of T)if(!M[U])throw Kl(U);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:ee,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function hf(b){return $o.apply(this,arguments)}function $o(){return($o=(0,P.Z)(function*(b){var T;try{b.swRegistration=yield navigator.serviceWorker.register(Mr,{scope:Fo}),b.swRegistration.update().catch(()=>{})}catch(M){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=M)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function Zl(b,T){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,P.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield hf(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function Yl(b,T){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,P.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=Ds)})).apply(this,arguments)}function Go(){return(Go=(0,P.Z)(function*(b,T){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield Yl(b,T?.vapidKey),yield Zl(b,T?.serviceWorkerRegistration),cf(b)})).apply(this,arguments)}function ff(b,T,M){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,P.Z)(function*(b,T,M){const U=pf(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Bu],message_name:M[Gl],message_time:M[ld],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function pf(b){switch(b){case fi.NOTIFICATION_CLICKED:return"notification_open";case fi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ss(){return(Ss=(0,P.Z)(function*(b,T){const M=T.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===fi.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(ro(M)):b.onMessageHandler.next(ro(M)));const U=M.data;Za(U)&&"1"===U[Lo]&&(yield ff(b,M.messageType,U))})).apply(this,arguments)}const As="@firebase/messaging",Rn=b=>{const T=new fd(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function gd(b,T){return Ss.apply(this,arguments)}(T,M)),T},as=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:U=>function pd(b,T){return Go.apply(this,arguments)}(T,U)}};function Ql(){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,P.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Nn(){(0,oe._registerComponent)(new ye.wA("messaging",Rn,"PUBLIC")),(0,oe._registerComponent)(new ye.wA("messaging-internal",as,"PRIVATE")),(0,oe.registerVersion)(As,"0.9.16"),(0,oe.registerVersion)(As,"0.9.16","esm2017")}();const qo="analytics",wd="firebase_id",nc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ed="https://www.googletagmanager.com/gtag/js",jn=new me.Yd("@firebase/analytics");function Gu(b){return Promise.all(b.map(T=>T.catch(M=>M)))}function Wu(b,T){const M=document.createElement("script");M.src=`${Ed}?l=${b}&id=${T}`,M.async=!0,document.head.appendChild(M)}function gf(b,T,M,U,ee,ue){return qu.apply(this,arguments)}function qu(){return(qu=(0,P.Z)(function*(b,T,M,U,ee,ue){const Me=U[ee];try{if(Me)yield T[Me];else{const dt=(yield Gu(M)).find(St=>St.measurementId===ee);dt&&(yield T[dt.appId])}}catch(Be){jn.error(Be)}b("config",ee,ue)})).apply(this,arguments)}function us(b,T,M,U,ee){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,P.Z)(function*(b,T,M,U,ee){try{let ue=[];if(ee&&ee.send_to){let Me=ee.send_to;Array.isArray(Me)||(Me=[Me]);const Be=yield Gu(M);for(const dt of Me){const St=Be.find(_t=>_t.measurementId===dt),xt=St&&T[St.appId];if(!xt){ue=[];break}ue.push(xt)}}0===ue.length&&(ue=Object.values(T)),yield Promise.all(ue),b("event",U,ee||{})}catch(ue){jn.error(ue)}})).apply(this,arguments)}function Id(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(Ed))return T;return null}const ar=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),tu=new class ic{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ko(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function yf(b){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,P.Z)(function*(b){var T;const{appId:M,apiKey:U}=b,ee={method:"GET",headers:Ko(U)},ue=nc.replace("{app-id}",M),Me=yield fetch(ue,ee);if(200!==Me.status&&304!==Me.status){let Be="";try{const dt=yield Me.json();null!==(T=dt.error)&&void 0!==T&&T.message&&(Be=dt.error.message)}catch{}throw ar.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Be})}return Me.json()})).apply(this,arguments)}function Cd(b){return si.apply(this,arguments)}function si(){return(si=(0,P.Z)(function*(b,T=tu,M){const{appId:U,apiKey:ee,measurementId:ue}=b.options;if(!U)throw ar.create("no-app-id");if(!ee){if(ue)return{measurementId:ue,appId:U};throw ar.create("no-api-key")}const Me=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new nu;return setTimeout((0,P.Z)(function*(){Be.abort()}),void 0!==M?M:6e4),bd({appId:U,apiKey:ee,measurementId:ue},Me,Be,T)})).apply(this,arguments)}function bd(b,T,M){return ls.apply(this,arguments)}function ls(){return(ls=(0,P.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:M},U,ee=tu){var ue,Me;const{appId:Be,measurementId:dt}=b;try{yield sc(U,T)}catch(St){if(dt)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${null===(ue=St)||void 0===ue?void 0:ue.message}]`),{appId:Be,measurementId:dt};throw St}try{const St=yield yf(b);return ee.deleteThrottleMetadata(Be),St}catch(St){const xt=St;if(!Ku(xt)){if(ee.deleteThrottleMetadata(Be),dt)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${xt?.message}]`),{appId:Be,measurementId:dt};throw St}const _t=503===Number(null===(Me=xt?.customData)||void 0===Me?void 0:Me.httpStatus)?(0,le.$s)(M,ee.intervalMillis,30):(0,le.$s)(M,ee.intervalMillis),Gn={throttleEndTimeMillis:Date.now()+_t,backoffCount:M+1};return ee.setThrottleMetadata(Be,Gn),jn.debug(`Calling attemptFetch again in ${_t} millis`),bd(b,Gn,U,ee)}})).apply(this,arguments)}function sc(b,T){return new Promise((M,U)=>{const ee=Math.max(T-Date.now(),0),ue=setTimeout(M,ee);b.addEventListener(()=>{clearTimeout(ue),U(ar.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ku(b){if(!(b instanceof le.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class nu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let io,Yu;function Zo(){return(Zo=(0,P.Z)(function*(b,T,M,U,ee){if(ee&&ee.global)b("event",M,U);else{const ue=yield T;b("event",M,Object.assign(Object.assign({},U),{send_to:ue}))}})).apply(this,arguments)}function Xo(b){Yu=b}function oc(b){io=b}function Ms(){return ea.apply(this,arguments)}function ea(){return(ea=(0,P.Z)(function*(){var b;if(!(0,le.hl)())return jn.warn(ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(T){return jn.warn(ar.create("indexeddb-unavailable",{errorInfo:null===(b=T)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function ta(){return(ta=(0,P.Z)(function*(b,T,M,U,ee,ue,Me){var Be;const dt=Cd(b);dt.then(Ir=>{M[Ir.measurementId]=Ir.appId,b.options.measurementId&&Ir.measurementId!==b.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Ir.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ir=>jn.error(Ir)),T.push(dt);const St=Ms().then(Ir=>{if(Ir)return U.getId()}),[xt,_t]=yield Promise.all([dt,St]);Id()||Wu(ue,xt.measurementId),Yu&&(ee("consent","default",Yu),Xo(void 0)),ee("js",new Date);const Gn=null!==(Be=Me?.config)&&void 0!==Be?Be:{};return Gn.origin="firebase",Gn.update=!0,null!=_t&&(Gn[wd]=_t),ee("config",xt.measurementId,Gn),io&&(ee("set",io),oc(void 0)),xt.measurementId})).apply(this,arguments)}class Qu{constructor(T){this.app=T}_delete(){return delete Or[this.app.options.appId],Promise.resolve()}}let Or={},na=[];const so={};let ia,Bi,ra="dataLayer",Td=!1;function Ef(b,T,M){!function kg(){const b=[];if((0,le.ru)()&&b.push("This is a browser extension environment."),(0,le.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((U,ee)=>`(${ee+1}) ${U}`).join(" "),M=ar.create("invalid-analytics-context",{errorInfo:T});jn.warn(M.message)}}();const U=b.options.appId;if(!U)throw ar.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw ar.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Or[U])throw ar.create("already-exists",{id:U});if(!Td){!function zu(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(ra);const{wrappedGtag:ue,gtagCore:Me}=function eu(b,T,M,U,ee){let ue=function(...Me){window[U].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ue=window[ee]),window[ee]=function rc(b,T,M,U){function ue(){return(ue=(0,P.Z)(function*(Me,Be,dt){try{"event"===Me?yield us(b,T,M,Be,dt):"config"===Me?yield gf(b,T,M,U,Be,dt):"consent"===Me?b("consent","update",dt):b("set",Be)}catch(St){jn.error(St)}})).apply(this,arguments)}return function ee(Me,Be,dt){return ue.apply(this,arguments)}}(ue,b,T,M),{gtagCore:ue,wrappedGtag:window[ee]}}(Or,na,so,ra,"gtag");Bi=ue,ia=Me,Td=!0}return Or[U]=function wf(b,T,M,U,ee,ue,Me){return ta.apply(this,arguments)}(b,na,so,T,ia,ra,M),new Qu(b)}function Sy(){return If.apply(this,arguments)}function If(){return(If=(0,P.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const at="@firebase/analytics";!function Cn(){(0,oe._registerComponent)(new ye.wA(qo,(T,{options:M})=>Ef(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new ye.wA("analytics-internal",function b(T){try{const M=T.getProvider(qo).getImmediate();return{logEvent:(U,ee,ue)=>function en(b,T,M,U){b=(0,le.m9)(b),function ru(b,T,M,U,ee){return Zo.apply(this,arguments)}(Bi,Or[b.app.options.appId],T,M,U).catch(ee=>jn.error(ee))}(M,U,ee,ue)}}catch(M){throw ar.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(at,"0.8.0"),(0,oe.registerVersion)(at,"0.8.0","esm2017")}();var cs=F(4408),dr=F(7565);const Sd=new class ao extends dr.v{}(class oo extends cs.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,M,U):(T.flush(this),0)}});var Cf=F(4986),uo=F(8505),uc=F(5363),lo=F(9468);const it=new f.GfV("7.4.1"),su="__angularfire_symbol__analyticsIsSupportedValue",$i="__angularfire_symbol__analyticsIsSupported",Xu="__angularfire_symbol__remoteConfigIsSupportedValue",ou="__angularfire_symbol__remoteConfigIsSupported",kn="__angularfire_symbol__messagingIsSupportedValue",au="__angularfire_symbol__messagingIsSupported";function uu(b,T,M){if(T){if(1===T.length)return T[0];const ue=T.filter(Me=>Me.app===M);if(1===ue.length)return ue[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[$i]||(globalThis[$i]=Sy().then(b=>globalThis[su]=b).catch(()=>globalThis[su]=!1)),globalThis[au]||(globalThis[au]=Ql().then(b=>globalThis[kn]=b).catch(()=>globalThis[kn]=!1)),globalThis[ou]||(globalThis[ou]=Dy().then(b=>globalThis[Xu]=b).catch(()=>globalThis[Xu]=!1));const oa=(b,T)=>{const M=T?[T]:(0,B.C6)(),U=[];return M.forEach(ee=>{ee.container.getProvider(b).instances.forEach(Me=>{U.includes(Me)||U.push(Me)})}),U};function oi(){}class co{constructor(T,M=Sd){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,U){const ee=this.zone;return this.delegate.schedule(function(Me){ee.runGuarded(()=>{T.apply(this,[Me])})},M,U)}}class lc{constructor(T){this.zone=T,this.task=null}call(T,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oi,{},oi,oi)),M.pipe((0,uo.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rs=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new co(Zone.current)),this.insideAngular=M.run(()=>new co(Zone.current,Cf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function ai(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Qn(b){return b.pipe((0,uc.Q)(ai().outsideAngular))}function hs(b){return ai(),function $n(b){return function(M){return(M=M.lift(new lc(b.ngZone))).pipe((0,lo.R)(b.outsideAngular),(0,uc.Q)(b.insideAngular))}}(ai())(b)}},7143:(pt,Re,F)=>{F.d(Re,{$:()=>no,A:()=>z,B:()=>Oe,G:()=>Ro,H:()=>ni,J:()=>is,L:()=>ln,M:()=>Uu,N:()=>ud,P:()=>Cf,Q:()=>Bu,R:()=>Ay,T:()=>Gl,U:()=>Ds,V:()=>fi,W:()=>ss,X:()=>Rg,Y:()=>Ha,Z:()=>Nt,_:()=>Ng,a:()=>xs,a0:()=>cf,a1:()=>sr,a2:()=>Hu,a3:()=>$u,a4:()=>df,a5:()=>Pg,a6:()=>or,a7:()=>Vi,a8:()=>Za,a9:()=>os,aA:()=>Ir,aB:()=>dt,aC:()=>Qn,aD:()=>Ns,aE:()=>wt,aI:()=>Ko,aL:()=>Lo,aa:()=>hf,ab:()=>Zl,ac:()=>Yl,af:()=>ff,ag:()=>pf,ah:()=>gd,ak:()=>Si,al:()=>Xl,an:()=>Ed,ao:()=>qu,ap:()=>Yt,aq:()=>we,ar:()=>rt,as:()=>vt,at:()=>et,au:()=>tl,av:()=>xi,aw:()=>Le,ax:()=>se,ay:()=>te,az:()=>an,b:()=>ar,c:()=>kn,d:()=>bf,e:()=>el,f:()=>$n,g:()=>U,h:()=>b,i:()=>ea,j:()=>Me,k:()=>Mf,l:()=>Hi,m:()=>ks,o:()=>fe,r:()=>cs,s:()=>ji,u:()=>Sd});var f=F(5861),B=F(2090),P=F(9681),oe=F(655),le=F(1877),ye=F(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Te=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},st=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new le.Yd("@firebase/auth");function Xe(w,...g){_e.logLevel<=le.in.ERROR&&_e.error(`Auth (${P.SDK_VERSION}): ${w}`,...g)}function et(w,...g){throw ze(w,...g)}function Le(w,...g){return ze(w,...g)}function Ne(w,g,_){const I=Object.assign(Object.assign({},Te()),{[g]:_});return new B.LL("auth","Firebase",I).create(g,{appName:w.name})}function Ae(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&et(w,"argument-error"),Ne(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(w,...g){if("string"!=typeof w){const _=g[0],I=[...g.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return st.create(w,...g)}function se(w,g,..._){if(!w)throw ze(g,..._)}function de(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Xe(g),new Error(g)}function we(w,g){w||de(g)}const J=new Map;function te(w){we(w instanceof Function,"Expected a class definition");let g=J.get(w);return g?(we(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,J.set(w,g),g)}function Ue(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===yt()||"https:"===yt()}function yt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ke{constructor(g,_){this.shortDelay=g,this.longDelay=_,we(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(w,g){we(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Ln{static initialize(g,_,I){this.fetchImpl=g,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void de("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void de("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void de("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xt=new Ke(3e4,6e4);function Wt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Ut(w,g,_,I){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,f.Z)(function*(w,g,_,I,x={}){return zs(w,x,(0,f.Z)(function*(){let O={},re={};I&&("GET"===g?re=I:O={body:JSON.stringify(I)});const De=(0,B.xO)(Object.assign({key:w.config.apiKey},re)).slice(1),Je=yield w._getAdditionalHeaders();return Je["Content-Type"]="application/json",w.languageCode&&(Je["X-Firebase-Locale"]=w.languageCode),Ln.fetch()(ki(w,w.config.apiHost,_,De),Object.assign({method:g,headers:Je,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function zs(w,g,_){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,f.Z)(function*(w,g,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},rn),g);try{const x=new ei(w),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const re=yield O.json();if("needConfirmation"in re)throw Vn(w,"account-exists-with-different-credential",re);if(O.ok&&!("errorMessage"in re))return re;{const De=O.ok?re.errorMessage:re.error.message,[Je,ht]=De.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw Vn(w,"credential-already-in-use",re);if("EMAIL_EXISTS"===Je)throw Vn(w,"email-already-in-use",re);if("USER_DISABLED"===Je)throw Vn(w,"user-disabled",re);const Bt=I[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(ht)throw Ne(w,Bt,ht);et(w,Bt)}}catch(x){if(x instanceof B.ZR)throw x;et(w,"network-request-failed")}})).apply(this,arguments)}function xn(w,g,_,I){return es.apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(w,g,_,I,x={}){const O=yield Ut(w,g,_,I,x);return"mfaPendingCredential"in O&&et(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function ki(w,g,_,I){const x=`${g}${_}?${I}`;return w.config.emulator?mn(w.config,x):`${w.config.apiScheme}://${x}`}class ei{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Le(this.auth,"network-request-failed")),Xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(w,g,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const x=Le(w,g,I);return x.customData._tokenResponse=_,x}function Oi(){return(Oi=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function nt(w,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Un(w,g){return hn.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function vr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function wn(){return(wn=(0,f.Z)(function*(w,g=!1){const _=(0,B.m9)(w),I=yield _.getIdToken(g),x=gt(I);se(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,re=O?.sign_in_provider;return{claims:x,token:I,authTime:vr(_n(x.auth_time)),issuedAtTime:vr(_n(x.iat)),expirationTime:vr(_n(x.exp)),signInProvider:re||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function _n(w){return 1e3*Number(w)}function gt(w){var g;const[_,I,x]=w.split(".");if(void 0===_||void 0===I||void 0===x)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,B.tV)(I);return O?JSON.parse(O):(Xe("Failed to decode base64 JWT payload"),null)}catch(O){return Xe("Caught error parsing JWT payload as JSON",null===(g=O)||void 0===g?void 0:g.toString()),null}}function kt(w,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,f.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(I){throw I instanceof B.ZR&&wr(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function wr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class xr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),I)}iteration(){var g=this;return(0,f.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(_=I)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class Dt{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=vr(this.lastLoginAt),this.creationTime=vr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kr(w){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,f.Z)(function*(w){var g;const _=w.auth,I=yield w.getIdToken(),x=yield kt(w,Un(_,{idToken:I}));se(x?.users.length,_,"internal-error");const O=x.users[0];w._notifyReloadListener(O);const re=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?G(O.providerUserInfo):[],De=Q(w.providerData,re),Bt=!!w.isAnonymous&&!(w.email&&O.passwordHash||De?.length),On={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:De,metadata:new Dt(O.createdAt,O.lastLoginAt),isAnonymous:Bt};Object.assign(w,On)})).apply(this,arguments)}function zt(){return(zt=(0,f.Z)(function*(w){const g=(0,B.m9)(w);yield kr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Q(w,g){return[...w.filter(I=>!g.some(x=>x.providerId===I.providerId)),...g]}function G(w){return w.map(g=>{var{providerId:_}=g,I=(0,oe._T)(g,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function K(){return(K=(0,f.Z)(function*(w,g){const _=yield zs(w,{},(0,f.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:O}=w.config,re=ki(w,x,"/v1/token",`key=${O}`),De=yield w._getAdditionalHeaders();return De["Content-Type"]="application/x-www-form-urlencoded",Ln.fetch()(re,{method:"POST",headers:De,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){se(g.idToken,"internal-error"),se(typeof g.idToken<"u","internal-error"),se(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function mt(w){const g=gt(w);return se(g,"internal-error"),se(typeof g.exp<"u","internal-error"),se(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var I=this;return(0,f.Z)(function*(){return se(!I.accessToken||I.refreshToken,g,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(g,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var I=this;return(0,f.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:re}=yield function H(w,g){return K.apply(this,arguments)}(g,_);I.updateTokensAndExpiration(x,O,Number(re))})()}updateTokensAndExpiration(g,_,I){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(g,_){const{refreshToken:I,accessToken:x,expirationTime:O}=_,re=new Z;return I&&(se("string"==typeof I,"internal-error",{appName:g}),re.refreshToken=I),x&&(se("string"==typeof x,"internal-error",{appName:g}),re.accessToken=x),O&&(se("number"==typeof O,"internal-error",{appName:g}),re.expirationTime=O),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return de("not implemented")}}function xe(w,g){se("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class We{constructor(g){var{uid:_,auth:I,stsTokenManager:x}=g,O=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Dt(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,f.Z)(function*(){const I=yield kt(_,_.stsTokenManager.getToken(_.auth,g));return se(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(g){return function vn(w){return wn.apply(this,arguments)}(this,g)}reload(){return function ti(w){return zt.apply(this,arguments)}(this)}_assign(g){this!==g&&(se(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new We(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var I=this;return(0,f.Z)(function*(){let x=!1;g.idToken&&g.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield kr(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var g=this;return(0,f.Z)(function*(){const _=yield g.getIdToken();return yield kt(g,function Di(w,g){return Oi.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var I,x,O,re,De,Je,ht,Bt;const On=null!==(I=_.displayName)&&void 0!==I?I:void 0,yo=null!==(x=_.email)&&void 0!==x?x:void 0,cu=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Pf=null!==(re=_.photoURL)&&void 0!==re?re:void 0,ca=null!==(De=_.tenantId)&&void 0!==De?De:void 0,vo=null!==(Je=_._redirectEventId)&&void 0!==Je?Je:void 0,rl=null!==(ht=_.createdAt)&&void 0!==ht?ht:void 0,Bg=null!==(Bt=_.lastLoginAt)&&void 0!==Bt?Bt:void 0,{uid:fc,emailVerified:kf,isAnonymous:du,providerData:Of,stsTokenManager:jg}=_;se(fc&&jg,g,"internal-error");const Ff=Z.fromJSON(this.name,jg);se("string"==typeof fc,g,"internal-error"),xe(On,g.name),xe(yo,g.name),se("boolean"==typeof kf,g,"internal-error"),se("boolean"==typeof du,g,"internal-error"),xe(cu,g.name),xe(Pf,g.name),xe(ca,g.name),xe(vo,g.name),xe(rl,g.name),xe(Bg,g.name);const il=new We({uid:fc,auth:g,email:yo,emailVerified:kf,displayName:On,isAnonymous:du,photoURL:Pf,phoneNumber:cu,tenantId:ca,stsTokenManager:Ff,createdAt:rl,lastLoginAt:Bg});return Of&&Array.isArray(Of)&&(il.providerData=Of.map(Lf=>Object.assign({},Lf))),vo&&(il._redirectEventId=vo),il}static _fromIdTokenResponse(g,_,I=!1){return(0,f.Z)(function*(){const x=new Z;x.updateFromServerResponse(_);const O=new We({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:I});return yield kr(O),O})()}}const ln=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,I){var x=this;return(0,f.Z)(function*(){x.storage[_]=I})()}_get(_){var I=this;return(0,f.Z)(function*(){const x=I.storage[_];return void 0===x?null:x})()}_remove(_){var I=this;return(0,f.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function an(w,g,_){return`firebase:${w}:${g}:${_}`}class rr{constructor(g,_,I){this.persistence=g,this.auth=_,this.userKey=I;const{config:x,name:O}=this.auth;this.fullUserKey=an(this.userKey,x.apiKey,O),this.fullPersistenceKey=an("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?We._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,f.Z)(function*(){if(_.persistence===g)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,I="authUser"){return(0,f.Z)(function*(){if(!_.length)return new rr(te(ln),g,I);const x=(yield Promise.all(_.map(function(){var ht=(0,f.Z)(function*(Bt){if(yield Bt._isAvailable())return Bt});return function(Bt){return ht.apply(this,arguments)}}()))).filter(ht=>ht);let O=x[0]||te(ln);const re=an(I,g.config.apiKey,g.name);let De=null;for(const ht of _)try{const Bt=yield ht._get(re);if(Bt){const On=We._fromJSON(g,Bt);ht!==O&&(De=On),O=ht;break}}catch{}const Je=x.filter(ht=>ht._shouldAllowMigration);return O._shouldAllowMigration&&Je.length?(O=Je[0],De&&(yield O._set(re,De.toJSON())),yield Promise.all(_.map(function(){var ht=(0,f.Z)(function*(Bt){if(Bt!==O)try{yield Bt._remove(re)}catch{}});return function(Bt){return ht.apply(this,arguments)}}())),new rr(O,g,I)):new rr(O,g,I)})()}}function ne(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(qe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if($(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(bt(g))return"Blackberry";if(Fe(g))return"Webos";if(W(g))return"Safari";if((g.includes("chrome/")||Ie(g))&&!g.includes("edge/"))return"Chrome";if(vt(g))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function $(w=(0,B.z$)()){return/firefox\//i.test(w)}function W(w=(0,B.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ie(w=(0,B.z$)()){return/crios\//i.test(w)}function qe(w=(0,B.z$)()){return/iemobile/i.test(w)}function vt(w=(0,B.z$)()){return/android/i.test(w)}function bt(w=(0,B.z$)()){return/blackberry/i.test(w)}function Fe(w=(0,B.z$)()){return/webos/i.test(w)}function rt(w=(0,B.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Yt(w=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function fn(w=(0,B.z$)()){return rt(w)||vt(w)||Fe(w)||bt(w)||/windows phone/i.test(w)||qe(w)}function En(w,g=[]){let _;switch(w){case"Browser":_=ne((0,B.z$)());break;case"Worker":_=`${ne((0,B.z$)())}-${w}`;break;default:_=w}const I=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${I}`}class qs{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const I=O=>new Promise((re,De)=>{try{re(g(O))}catch(Je){De(Je)}});I.onAbort=_,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,f.Z)(function*(){var I;if(_.auth.currentUser===g)return;const x=[];try{for(const O of _.queue)yield O(g),O.onAbort&&x.push(O.onAbort)}catch(O){x.reverse();for(const re of x)try{re()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=O)||void 0===I?void 0:I.message})}})()}}class Mo{constructor(g,_,I){this.app=g,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ks(this),this.idTokenSubscription=new Ks(this),this.beforeStateQueue=new qs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=st,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(g,_){var I=this;return _&&(this._popupRedirectResolver=te(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var x,O;if(!I._deleted&&(I.persistenceManager=yield rr.create(I,g),!I._deleted)){if(null!==(x=I._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,f.Z)(function*(){var I;const x=yield _.assertedPersistence.getCurrentUser();let O=x,re=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const De=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Je=O?._redirectEventId,ht=yield _.tryRedirectSignIn(g);(!De||De===Je)&&ht?.user&&(O=ht.user,re=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(re)try{yield _.beforeStateQueue.runMiddleware(O)}catch(De){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(De))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return se(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,f.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,f.Z)(function*(){var I;try{yield kr(g)}catch(x){if("auth/network-request-failed"!==(null===(I=x)||void 0===I?void 0:I.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Gt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,f.Z)(function*(){const I=g?(0,B.m9)(g):null;return I&&se(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(g,_=!1){var I=this;return(0,f.Z)(function*(){if(!I._deleted)return g&&se(I.tenantId===g.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(g)),I.queue((0,f.Z)(function*(){yield I.directlySetCurrentUser(g),I.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(te(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,_,I){return this.registerStateListener(this.authStateSubscription,g,_,I)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,I){return this.registerStateListener(this.idTokenSubscription,g,_,I)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var I=this;return(0,f.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const I=g&&te(g)||_._popupRedirectResolver;se(I,_,"argument-error"),_.redirectPersistenceManager=yield rr.create(_,[te(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,f.Z)(function*(){var I,x;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,f.Z)(function*(){if(g===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,I,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),re=this._isInitialized?Promise.resolve():this._initializationPromise;return se(re,this,"internal-error"),re.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,I,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=En(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var _;const I={"X-Client-Version":g.clientVersion};g.app.options.appId&&(I["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function wt(w){return(0,B.m9)(w)}class Ks{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ro(w,g,_){const I=wt(w);se(I._canInitEmulator,I,"emulator-config-failed"),se(/^https?:\/\//.test(g),I,"invalid-emulator-scheme");const x=!!_?.disableWarnings,O=Lu(g),{host:re,port:De}=function ns(w){const g=Lu(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const O=x[1];return{host:O,port:Zn(I.substr(O.length+1))}}{const[O,re]=I.split(":");return{host:O,port:Zn(re)}}}(g);I.config.emulator={url:`${O}//${re}${null===De?"":`:${De}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:re,port:De,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Zs(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Lu(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Zn(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class ni{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return de("not implemented")}_getIdTokenResponse(g){return de("not implemented")}_linkToIdToken(g,_){return de("not implemented")}_getReauthenticationResolver(g){return de("not implemented")}}function ci(w,g){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:resetPassword",Wt(w,g))})).apply(this,arguments)}function Vu(w,g){return pn.apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function af(w,g){return La.apply(this,arguments)}function La(){return(La=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:update",Wt(w,g))})).apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithPassword",Wt(w,g))})).apply(this,arguments)}function Qs(w,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:sendOobCode",Wt(w,g))})).apply(this,arguments)}function rs(w,g){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(w,g){return Qs(w,g)})).apply(this,arguments)}function uf(w,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,f.Z)(function*(w,g){return Qs(w,g)})).apply(this,arguments)}function di(w,g){return No.apply(this,arguments)}function No(){return(No=(0,f.Z)(function*(w,g){return Qs(w,g)})).apply(this,arguments)}function Bl(w,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,f.Z)(function*(w,g){return Qs(w,g)})).apply(this,arguments)}function jl(){return(jl=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithEmailLink",Wt(w,g))})).apply(this,arguments)}function Hl(){return(Hl=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithEmailLink",Wt(w,g))})).apply(this,arguments)}class Ba extends ni{constructor(g,_,I,x=null){super("password",I),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new Ba(g,_,"password")}static _fromEmailAndCode(g,_,I=null){return new Ba(g,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function Va(w,g){return Ys.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ri(w,g){return jl.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:et(g,"internal-error")}})()}_linkToIdToken(g,_){var I=this;return(0,f.Z)(function*(){switch(I.signInMethod){case"password":return Vu(g,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Dg(w,g){return Hl.apply(this,arguments)}(g,{idToken:_,email:I._email,oobCode:I._password});default:et(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Xs(w,g){return hi.apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithIdp",Wt(w,g))})).apply(this,arguments)}class is extends ni{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new is(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):et("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x}=_,O=(0,oe._T)(_,["providerId","signInMethod"]);if(!I||!x)return null;const re=new is(I,x);return re.idToken=O.idToken||void 0,re.accessToken=O.accessToken||void 0,re.secret=O.secret,re.nonce=O.nonce,re.pendingToken=O.pendingToken||null,re}_getIdTokenResponse(g){return Xs(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Xs(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Xs(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,B.xO)(_)}return g}}function Sg(w,g){return rd.apply(this,arguments)}function rd(){return(rd=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:sendVerificationCode",Wt(w,g))})).apply(this,arguments)}function ja(){return(ja=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Wt(w,g))})).apply(this,arguments)}function id(){return(id=(0,f.Z)(function*(w,g){const _=yield xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Wt(w,g));if(_.temporaryProof)throw Vn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ag={USER_NOT_FOUND:"user-not-found"};function sd(){return(sd=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Wt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ag)})).apply(this,arguments)}class ko extends ni{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new ko({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new ko({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function $l(w,g){return ja.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Po(w,g){return id.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function xg(w,g){return sd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:I,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:I,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:O}=g;return I||_||x||O?new ko({verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:O}):null}}class Oo{constructor(g){var _,I,x,O,re,De;const Je=(0,B.zd)((0,B.pd)(g)),ht=null!==(_=Je.apiKey)&&void 0!==_?_:null,Bt=null!==(I=Je.oobCode)&&void 0!==I?I:null,On=function od(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Je.mode)&&void 0!==x?x:null);se(ht&&Bt&&On,"argument-error"),this.apiKey=ht,this.operation=On,this.code=Bt,this.continueUrl=null!==(O=Je.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(re=Je.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(De=Je.tenantId)&&void 0!==De?De:null}static parseLink(g){const _=function ad(w){const g=(0,B.zd)((0,B.pd)(w)).link,_=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(w)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||_||g||w}(g);try{return new Oo(_)}catch{return null}}}let Uu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return Ba._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const x=Oo.parseLink(I);return se(x,"argument-error"),Ba._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Mr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Fo extends Mr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ds extends Fo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return se("providerId"in _&&"signInMethod"in _,"argument-error"),is._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return se(g.idToken||g.accessToken,"argument-error"),is._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ds.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ds.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:O,nonce:re,providerId:De}=g;if(!I&&!x&&!_&&!O||!De)return null;try{return new Ds(De)._credential({idToken:_,accessToken:I,nonce:re,pendingToken:O})}catch{return null}}}let ud=(()=>{class w extends Fo{constructor(){super("facebook.com")}static credential(_){return is._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Bu=(()=>{class w extends Fo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return is._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:x}=_;if(!I&&!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Gl=(()=>{class w extends Fo{constructor(){super("github.com")}static credential(_){return is._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Lo extends ni{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Xs(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Xs(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Xs(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x,pendingToken:O}=_;return I&&x&&O&&I===x?new Lo(I,O):null}static _create(g,_){return new Lo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fi extends Mr{constructor(g){se(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return fi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return fi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Lo.fromJSON(g);return se(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:I}=g;if(!_||!I)return null;try{return Lo._create(I,_)}catch{return null}}}let ss=(()=>{class w extends Fo{constructor(){super("twitter.com")}static credential(_,I){return is._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=_;if(!I||!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ii(w,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signUp",Wt(w,g))})).apply(this,arguments)}class Ti{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,I,x=!1){return(0,f.Z)(function*(){const O=yield We._fromIdTokenResponse(g,I,x),re=Vo(I);return new Ti({user:O,providerId:re,_tokenResponse:I,operationType:_})})()}static _forOperation(g,_,I){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(I,!0);const x=Vo(I);return new Ti({user:g,providerId:x,_tokenResponse:I,operationType:_})})()}}function Vo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Rg(w){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,f.Z)(function*(w){var g;const _=wt(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Ti({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield ii(_,{returnSecureToken:!0}),x=yield Ti._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Pn extends B.ZR{constructor(g,_,I,x){var O;super(_.code,_.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,Pn.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(g,_,I,x){return new Pn(g,_,I,x)}}function cd(w,g,_,I){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Pn._fromErrorAndOperation(w,O,g,I):O})}function lf(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Si(w,g){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(w,g){const _=(0,B.m9)(w);yield Li(!0,_,g);const{providerUserInfo:I}=yield nt(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=lf(I||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ju(w,g){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(w,g,_=!1){const I=yield kt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Ti._forOperation(w,"link",I)})).apply(this,arguments)}function Li(w,g,_){return sn.apply(this,arguments)}function sn(){return(sn=(0,f.Z)(function*(w,g,_){yield kr(g);const x=!1===w?"provider-already-linked":"no-such-provider";se(lf(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function zl(w,g){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(w,g,_=!1){var I;const{auth:x}=w,O="reauthenticate";try{const re=yield kt(w,cd(x,O,g,w),_);se(re.idToken,x,"internal-error");const De=gt(re.idToken);se(De,x,"internal-error");const{sub:Je}=De;return se(w.uid===Je,x,"user-mismatch"),Ti._forOperation(w,O,re)}catch(re){throw"auth/user-not-found"===(null===(I=re)||void 0===I?void 0:I.code)&&et(x,"user-mismatch"),re}})).apply(this,arguments)}function ql(w,g){return pi.apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(w,g,_=!1){const I="signIn",x=yield cd(w,I,g),O=yield Ti._fromIdTokenResponse(w,I,x);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Ha(w,g){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*(w,g){return ql(wt(w),g)})).apply(this,arguments)}function Nt(w,g){return $a.apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(w,g){const _=(0,B.m9)(w);return yield Li(!1,_,g.providerId),ju(_,g)})).apply(this,arguments)}function Ng(w,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,f.Z)(function*(w,g){return zl((0,B.m9)(w),g)})).apply(this,arguments)}function dd(w,g){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithCustomToken",Wt(w,g))})).apply(this,arguments)}function no(w,g){return za.apply(this,arguments)}function za(){return(za=(0,f.Z)(function*(w,g){const _=wt(w),I=yield dd(_,{token:g,returnSecureToken:!0}),x=yield Ti._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Uo{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Pe._fromServerResponse(g,_):et(g,"internal-error")}}class Pe extends Uo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Pe(_)}}function qt(w,g,_){var I;se((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),se(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(se(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(se(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function cf(w,g,_){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&qt(I,x,_),yield uf(I,x)})).apply(this,arguments)}function sr(w,g,_){return jo.apply(this,arguments)}function jo(){return(jo=(0,f.Z)(function*(w,g,_){yield ci((0,B.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Hu(w,g){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,f.Z)(function*(w,g){yield af((0,B.m9)(w),{oobCode:g})})).apply(this,arguments)}function $u(w,g){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,f.Z)(function*(w,g){const _=(0,B.m9)(w),I=yield ci(_,{oobCode:g}),x=I.requestType;switch(se(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(I.mfaInfo,_,"internal-error");default:se(I.email,_,"internal-error")}let O=null;return I.mfaInfo&&(O=Uo._fromServerResponse(wt(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function df(w,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,f.Z)(function*(w,g){const{data:_}=yield $u((0,B.m9)(w),g);return _.email})).apply(this,arguments)}function Pg(w,g,_){return ro.apply(this,arguments)}function ro(){return(ro=(0,f.Z)(function*(w,g,_){const I=wt(w),x=yield ii(I,{returnSecureToken:!0,email:g,password:_}),O=yield Ti._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(O.user),O})).apply(this,arguments)}function or(w,g,_){return Ha((0,B.m9)(w),Uu.credential(g,_))}function Vi(w,g,_){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};se(_.handleCodeInApp,I,"argument-error"),_&&qt(I,x,_),yield di(I,x)})).apply(this,arguments)}function Za(w,g){return"EMAIL_SIGNIN"===Oo.parseLink(g)?.operation}function os(w,g,_){return hd.apply(this,arguments)}function hd(){return(hd=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w),x=Uu.credentialWithLink(g,_||Ue());return se(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Ha(I,x)})).apply(this,arguments)}function Kl(w,g){return fd.apply(this,arguments)}function fd(){return(fd=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:createAuthUri",Wt(w,g))})).apply(this,arguments)}function hf(w,g){return $o.apply(this,arguments)}function $o(){return($o=(0,f.Z)(function*(w,g){const I={identifier:g,continueUri:je()?Ue():"http://localhost"},{signinMethods:x}=yield Kl((0,B.m9)(w),I);return x||[]})).apply(this,arguments)}function Zl(w,g){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,f.Z)(function*(w,g){const _=(0,B.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&qt(_.auth,x,g);const{email:O}=yield rs(_.auth,x);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function Yl(w,g,_){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&qt(I.auth,O,_);const{email:re}=yield Bl(I.auth,O);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function pd(w,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,f.Z)(function*(w,g){return Ut(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ff(w,g){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,f.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const I=(0,B.m9)(w),O={idToken:yield I.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},re=yield kt(I,pd(I.auth,O));I.displayName=re.displayName||null,I.photoURL=re.photoUrl||null;const De=I.providerData.find(({providerId:Je})=>"password"===Je);De&&(De.displayName=I.displayName,De.photoURL=I.photoURL),yield I._updateTokensIfNecessary(re)})).apply(this,arguments)}function pf(w,g){return Ss((0,B.m9)(w),g,null)}function gd(w,g){return Ss((0,B.m9)(w),null,g)}function Ss(w,g,_){return As.apply(this,arguments)}function As(){return(As=(0,f.Z)(function*(w,g,_){const{auth:I}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const re=yield kt(w,Vu(I,O));yield w._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class Rn{constructor(g,_,I={}){this.isNewUser=g,this.providerId=_,this.profile=I}}class as extends Rn{constructor(g,_,I,x){super(g,_,I),this.username=x}}class Nn extends Rn{constructor(g,_){super(g,"facebook.com",_)}}class Ql extends as{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Jl extends Rn{constructor(g,_){super(g,"google.com",_)}}class _d extends as{constructor(g,_,I){super(g,"twitter.com",_,I)}}function Xl(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function md(w){var g,_;if(!w)return null;const{providerId:I}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const re=null===(_=null===(g=gt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(re)return new Rn(O,"anonymous"!==re&&"custom"!==re?re:null)}if(!I)return null;switch(I){case"facebook.com":return new Nn(O,x);case"github.com":return new Ql(O,x);case"google.com":return new Jl(O,x);case"twitter.com":return new _d(O,x,w.screenName||null);case"custom":case"anonymous":return new Rn(O,null);default:return new Rn(O,I,x)}}(_)}class gi{constructor(g,_,I){this.type=g,this.credential=_,this.auth=I}static _fromIdtoken(g,_){return new gi("enroll",g,_)}static _fromMfaPendingCredential(g){return new gi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,I;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return gi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(I=g.multiFactorSession)&&void 0!==I&&I.idToken)return gi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class nc{constructor(g,_,I){this.session=g,this.hints=_,this.signInResolver=I}static _fromError(g,_){const I=wt(g),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(De=>Uo._fromServerResponse(I,De));se(x.mfaPendingCredential,I,"internal-error");const re=gi._fromMfaPendingCredential(x.mfaPendingCredential);return new nc(re,O,function(){var De=(0,f.Z)(function*(Je){const ht=yield Je._process(I,re);delete x.mfaInfo,delete x.mfaPendingCredential;const Bt=Object.assign(Object.assign({},x),{idToken:ht.idToken,refreshToken:ht.refreshToken});switch(_.operationType){case"signIn":const On=yield Ti._fromIdTokenResponse(I,_.operationType,Bt);return yield I._updateCurrentUser(On.user),On;case"reauthenticate":return se(_.user,I,"internal-error"),Ti._forOperation(_.user,_.operationType,Bt);default:et(I,"internal-error")}});return function(Je){return De.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,f.Z)(function*(){return _.signInResolver(g)})()}}function Ed(w,g){var _;const I=(0,B.m9)(w),x=g;return se(g.customData.operationType,I,"argument-error"),se(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),nc._fromError(I,x)}function jn(w,g){return Ut(w,"POST","/v2/accounts/mfaEnrollment:start",Wt(w,g))}class zu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Uo._fromServerResponse(g.auth,I)))})}static _fromUser(g){return new zu(g)}getSession(){var g=this;return(0,f.Z)(function*(){return gi._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var I=this;return(0,f.Z)(function*(){const x=g,O=yield I.getSession(),re=yield kt(I.user,x._process(I.user.auth,O,_));return yield I.user._updateTokensIfNecessary(re),I.user.reload()})()}unenroll(g){var _=this;return(0,f.Z)(function*(){var I;const x="string"==typeof g?g:g.uid,O=yield _.user.getIdToken(),re=yield kt(_.user,function Wu(w,g){return Ut(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(w,g))}(_.user.auth,{idToken:O,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:De})=>De!==x),yield _.user._updateTokensIfNecessary(re);try{yield _.user.reload()}catch(De){if("auth/user-token-expired"!==(null===(I=De)||void 0===I?void 0:I.code))throw De}})()}}const gf=new WeakMap;function qu(w){const g=(0,B.m9)(w);return gf.has(g)||gf.set(g,zu._fromUser(g)),gf.get(g)}const us="__sak";class Xa{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(us,"1"),this.storage.removeItem(us),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ar=(()=>{class w extends Xa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rc(){const w=(0,B.z$)();return W(w)||rt(w)}()&&function ts(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),O=this.localCache[I];x!==O&&_(I,O,x)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((De,Je,ht)=>{this.notifyListeners(De,ht)});const x=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const De=this.storage.getItem(x);if(_.newValue!==De)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!I)return}const O=()=>{const De=this.storage.getItem(x);!I&&this.localCache[x]===De||this.notifyListeners(x,De)},re=this.storage.getItem(x);!function Lt(){return(0,B.w1)()&&10===document.documentMode}()||re===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var x=()=>super._set,O=this;return(0,f.Z)(function*(){yield x().call(O,_,I),O.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,x=this;return(0,f.Z)(function*(){const O=yield I().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var I=()=>super._remove,x=this;return(0,f.Z)(function*(){yield I().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),xs=(()=>{class w extends Xa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let tu=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(O=>O.isListeningto(_));if(I)return I;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,f.Z)(function*(){const x=_,{eventId:O,eventType:re,data:De}=x.data,Je=I.handlersMap[re];if(!Je?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:re});const ht=Array.from(Je).map(function(){var On=(0,f.Z)(function*(yo){return yo(x.origin,De)});return function(yo){return On.apply(this,arguments)}}()),Bt=yield function ic(w){return Promise.all(w.map(function(){var g=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return g.apply(this,arguments)}}()))}(ht);x.ports[0].postMessage({status:"done",eventId:O,eventType:re,response:Bt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Ko(w="",g=10){let _="";for(let I=0;I<g;I++)_+=Math.floor(10*Math.random());return w+_}class yf{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,I=50){var x=this;return(0,f.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let re,De;return new Promise((Je,ht)=>{const Bt=Ko("",20);O.port1.start();const On=setTimeout(()=>{ht(new Error("unsupported_event"))},I);De={messageChannel:O,onMessage(yo){const cu=yo;if(cu.data.eventId===Bt)switch(cu.data.status){case"ack":clearTimeout(On),re=setTimeout(()=>{ht(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),Je(cu.data.response);break;default:clearTimeout(On),clearTimeout(re),ht(new Error("invalid_response"))}}},x.handlers.add(De),O.port1.addEventListener("message",De.onMessage),x.target.postMessage({eventType:g,eventId:Bt,data:_},[O.port2])}).finally(()=>{De&&x.removeMessageHandler(De)})})()}}function Hn(){return window}function si(){return typeof Hn().WorkerGlobalScope<"u"&&"function"==typeof Hn().importScripts}function ls(){return(ls=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const nu="firebaseLocalStorageDb",ru="firebaseLocalStorage",Zo="fbase_key";class Yo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Qo(w,g){return w.transaction([ru],g?"readwrite":"readonly").objectStore(ru)}function Zu(){const w=indexedDB.open(nu,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(ru,{keyPath:Zo})}catch(x){_(x)}}),w.addEventListener("success",(0,f.Z)(function*(){const I=w.result;I.objectStoreNames.contains(ru)?g(I):(I.close(),yield function Dd(){const w=indexedDB.deleteDatabase(nu);return new Yo(w).toPromise()}(),g(yield Zu()))}))})}function iu(w,g,_){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,f.Z)(function*(w,g,_){const I=Qo(w,!0).put({[Zo]:g,value:_});return new Yo(I).toPromise()})).apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(w,g){const _=Qo(w,!1).get(g),I=yield new Yo(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Yu(w,g){const _=Qo(w,!0).delete(g);return new Yo(_).toPromise()}const ea=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Zu()),_.db})()}_withRetries(_){var I=this;return(0,f.Z)(function*(){let x=0;for(;;)try{const O=yield I._openDb();return yield _(O)}catch(O){if(x++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return si()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=tu._getInstance(function Ku(){return si()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,f.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,f.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var I,x;if(_.activeServiceWorker=yield function bd(){return ls.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new yf(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(I=O[0])||void 0===I?void 0:I.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,f.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function sc(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Zu();return yield iu(_,us,"1"),yield Yu(_,us),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,f.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var x=this;return(0,f.Z)(function*(){return x._withPendingWrite((0,f.Z)(function*(){return yield x._withRetries(O=>iu(O,_,I)),x.localCache[_]=I,x.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,f.Z)(function*(){const x=yield I._withRetries(O=>function vf(w,g){return Jo.apply(this,arguments)}(O,_));return I.localCache[_]=x,x})()}_remove(_){var I=this;return(0,f.Z)(function*(){return I._withPendingWrite((0,f.Z)(function*(){return yield I._withRetries(x=>Yu(x,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const I=yield _._withRetries(re=>{const De=Qo(re,!1).getAll();return new Yo(De).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:re,value:De}of I)O.add(re),JSON.stringify(_.localCache[re])!==JSON.stringify(De)&&(_.notifyListeners(re,De),x.push(re));for(const re of Object.keys(_.localCache))_.localCache[re]&&!O.has(re)&&(_.notifyListeners(re,null),x.push(re));return x})()}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function wf(w,g){return Ut(w,"POST","/v2/accounts/mfaSignIn:start",Wt(w,g))}function Or(){return(Or=(0,f.Z)(function*(w){return(yield Ut(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function so(w){return new Promise((g,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=g,I.onerror=x=>{const O=Le("internal-error");O.customData=x,_(O)},I.type="text/javascript",I.charset="UTF-8",function na(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(I)})}function ra(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Bi=1e12;class Td{constructor(g){this.auth=g,this.counter=Bi,this._widgets=new Map}render(g,_){const I=this.counter;return this._widgets.set(I,new In(g,this.auth.name,_||{})),this.counter++,I}reset(g){var _;const I=g||Bi;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Bi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,f.Z)(function*(){var I;return null===(I=_._widgets.get(g||Bi))||void 0===I||I.execute(),""})()}}class In{constructor(g,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;se(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kg(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ef=ra("rcb"),TE=new Ke(3e4,6e4);class Sy{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Hn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return se(function If(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Hn().grecaptcha):new Promise((I,x)=>{const O=Hn().setTimeout(()=>{x(Le(g,"network-request-failed"))},TE.get());Hn()[Ef]=()=>{Hn().clearTimeout(O),delete Hn()[Ef];const De=Hn().grecaptcha;if(!De)return void x(Le(g,"internal-error"));const Je=De.render;De.render=(ht,Bt)=>{const On=Je(ht,Bt);return this.counter++,On},this.hostLanguage=_,I(De)},so(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Ef,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Le(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Hn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class SE{load(g){return(0,f.Z)(function*(){return new Td(g)})()}clearedOneInstance(){}}const Ju="recaptcha",AE={theme:"light",type:"image"};class Ay{constructor(g,_=Object.assign({},AE),I){this.parameters=_,this.type=Ju,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(I),this.isInvisible="invisible"===this.parameters.size,se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;se(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new SE:new Sy,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),I=g.getAssertedRecaptcha();return I.getResponse(_)||new Promise(O=>{const re=De=>{!De||(g.tokenChangeListeners.delete(re),O(De))};g.tokenChangeListeners.add(re),g.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof g)g(_);else if("string"==typeof g){const I=Hn()[g];"function"==typeof I&&I(_)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){se(je()&&!si(),g.auth,"internal-error"),yield function Er(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Qu(w){return Or.apply(this,arguments)}(g.auth);se(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class en{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=ko._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function ji(w,g,_){return at.apply(this,arguments)}function at(){return(at=(0,f.Z)(function*(w,g,_){const I=wt(w),x=yield dr(I,g,(0,B.m9)(_));return new en(x,O=>Ha(I,O))})).apply(this,arguments)}function Hi(w,g,_){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w);yield Li(!1,I,"phone");const x=yield dr(I.auth,g,(0,B.m9)(_));return new en(x,O=>Nt(I,O))})).apply(this,arguments)}function cs(w,g,_){return oo.apply(this,arguments)}function oo(){return(oo=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w),x=yield dr(I.auth,g,(0,B.m9)(_));return new en(x,O=>Ng(I,O))})).apply(this,arguments)}function dr(w,g,_){return ao.apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(w,g,_){var I;const x=yield _.verify();try{let O;if(se("string"==typeof x,w,"argument-error"),se(_.type===Ju,w,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const re=O.session;if("phoneNumber"in O)return se("enroll"===re.type,w,"internal-error"),(yield jn(w,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{se("signin"===re.type,w,"internal-error");const De=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return se(De,w,"missing-multi-factor-info"),(yield wf(w,{mfaPendingCredential:re.credential,mfaEnrollmentId:De,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield Sg(w,{phoneNumber:O.phoneNumber,recaptchaToken:x});return re}}finally{_._reset()}})).apply(this,arguments)}function Sd(w,g){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,f.Z)(function*(w,g){yield ju((0,B.m9)(w),g)})).apply(this,arguments)}let Cf=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=wt(_)}verifyPhoneNumber(_,I){return dr(this.auth,_,(0,B.m9)(I))}static credential(_,I){return ko._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:x}=_;return I&&x?ko._fromTokenResponse(I,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function uo(w,g){return g?te(g):(se(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class uc extends ni{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Xs(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Xs(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Xs(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function lo(w){return ql(w.auth,new uc(w),w.bypassAuthState)}function it(w){const{auth:g,user:_}=w;return se(_,g,"internal-error"),zl(_,new uc(w),w.bypassAuthState)}function su(w){return $i.apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(w){const{auth:g,user:_}=w;return se(_,g,"internal-error"),ju(_,new uc(w),w.bypassAuthState)})).apply(this,arguments)}class Xu{constructor(g,_,I,x,O=!1){this.auth=g,this.resolver=I,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,f.Z)(function*(I,x){g.pendingPromise={resolve:I,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(I,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,f.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:O,tenantId:re,error:De,type:Je}=g;if(De)return void _.reject(De);const ht={auth:_.auth,requestUri:I,sessionId:x,tenantId:re||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Je)(ht))}catch(Bt){_.reject(Bt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return lo;case"linkViaPopup":case"linkViaRedirect":return su;case"reauthViaPopup":case"reauthViaRedirect":return it;default:et(this.auth,"internal-error")}}resolve(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ou=new Ke(2e3,1e4);function kn(w,g,_){return au.apply(this,arguments)}function au(){return(au=(0,f.Z)(function*(w,g,_){const I=wt(w);Ae(w,g,Mr);const x=uo(I,_);return new uu(I,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function el(w,g,_){return xd.apply(this,arguments)}function xd(){return(xd=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w);Ae(I.auth,g,Mr);const x=uo(I.auth,_);return new uu(I.auth,"reauthViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}function bf(w,g,_){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w);Ae(I.auth,g,Mr);const x=uo(I.auth,_);return new uu(I.auth,"linkViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}let uu=(()=>{class w extends Xu{constructor(_,I,x,O,re){super(_,I,O,re),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const I=yield _.execute();return se(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,f.Z)(function*(){we(1===_.filter.length,"Popup operations only handle one event");const I=Ko();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Le(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,x;this.pollId=null!==(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ou.get())};_()}}return w.currentPopupAction=null,w})();const oi=new Map;class co extends Xu{constructor(g,_,I=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,f.Z)(function*(){let I=oi.get(_.auth._key());if(!I){try{const O=(yield function lc(w,g){return Rs.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;I=()=>Promise.resolve(O)}catch(x){I=()=>Promise.reject(x)}oi.set(_.auth._key(),I)}return _.bypassAuthState||oi.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,I=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(I,g);if("unknown"!==g.type){if(g.eventId){const x=yield I.auth._redirectUserForId(g.eventId);if(x)return I.user=x,_().call(I,g);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Rs(){return(Rs=(0,f.Z)(function*(w,g){const _=hs(g),I=ho(w);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(_));return yield I._remove(_),x})).apply(this,arguments)}function ai(w,g){return ds.apply(this,arguments)}function ds(){return(ds=(0,f.Z)(function*(w,g){return ho(w)._set(hs(g),"true")})).apply(this,arguments)}function Ns(){oi.clear()}function Qn(w,g){oi.set(w._key(),g)}function ho(w){return te(w._redirectPersistence)}function hs(w){return an("pendingRedirect",w.config.apiKey,w.name)}function $n(w,g,_){return function Tn(w,g,_){return aa.apply(this,arguments)}(w,g,_)}function aa(){return(aa=(0,f.Z)(function*(w,g,_){const I=wt(w);Ae(w,g,Mr);const x=uo(I,_);return yield ai(x,I),x._openRedirect(I,g,"signInViaRedirect")})).apply(this,arguments)}function b(w,g,_){return function T(w,g,_){return M.apply(this,arguments)}(w,g,_)}function M(){return(M=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w);Ae(I.auth,g,Mr);const x=uo(I.auth,_);yield ai(x,I.auth);const O=yield xt(I);return x._openRedirect(I.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function U(w,g,_){return function ee(w,g,_){return ue.apply(this,arguments)}(w,g,_)}function ue(){return(ue=(0,f.Z)(function*(w,g,_){const I=(0,B.m9)(w);Ae(I.auth,g,Mr);const x=uo(I.auth,_);yield Li(!1,I,g.providerId),yield ai(x,I.auth);const O=yield xt(I);return x._openRedirect(I.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Me(w,g){return Be.apply(this,arguments)}function Be(){return(Be=(0,f.Z)(function*(w,g){return yield wt(w)._initializationPromise,dt(w,g,!1)})).apply(this,arguments)}function dt(w,g){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(w,g,_=!1){const I=wt(w),x=uo(I,g),re=yield new co(I,x,_).execute();return re&&!_&&(delete re.user._redirectEventId,yield I._persistUserIfCurrent(re.user),yield I._setRedirectUser(null,g)),re})).apply(this,arguments)}function xt(w){return _t.apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(w){const g=Ko(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Ir{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(g,I)&&(_=!0,this.sendToConsumer(g,I),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ot(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ps(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var I;if(g.error&&!Ps(g)){const x=(null===(I=g.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Le(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const I=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&I}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ua(g))}saveEventToCache(g){this.cachedEventUids.add(ua(g)),this.lastProcessedEventTime=Date.now()}}function ua(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Ps({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function xi(w){return fs.apply(this,arguments)}function fs(){return(fs=(0,f.Z)(function*(w,g={}){return Ut(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Gi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,la=/^https?/;function ui(){return(ui=(0,f.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield xi(w);for(const _ of g)try{if(xy(_))return}catch{}et(w,"unauthorized-domain")})).apply(this,arguments)}function xy(w){const g=Ue(),{protocol:_,hostname:I}=new URL(g);if(w.startsWith("chrome-extension://")){const re=new URL(w);return""===re.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&re.hostname===I}if(!la.test(_))return!1;if(Gi.test(w))return I===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const Og=new Ke(3e4,6e4);function Df(){const w=Hn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Wn=null;function po(w){return Wn=Wn||function xE(w){return new Promise((g,_)=>{var I,x,O;function re(){Df(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Df(),_(Le(w,"network-request-failed"))},timeout:Og.get()})}if(null!==(x=null===(I=Hn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(O=Hn().gapi)||void 0===O||!O.load){const De=ra("iframefcb");return Hn()[De]=()=>{gapi.load?re():_(Le(w,"network-request-failed"))},so(`https://apis.google.com/js/api.js?onload=${De}`).catch(Je=>_(Je))}re()}}).catch(g=>{throw Wn=null,g})}(w),Wn}const Tf=new Ke(5e3,15e3),Sf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},My=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Af(w){const g=w.config;se(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?mn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:g.apiKey,appName:w.name,v:P.SDK_VERSION},x=My.get(w.config.apiHost);x&&(I.eid=x);const O=w._getFrameworks();return O.length&&(I.fw=O.join(",")),`${_}?${(0,B.xO)(I).slice(1)}`}function Md(){return Md=(0,f.Z)(function*(w){const g=yield po(w),_=Hn().gapi;return se(_,w,"internal-error"),g.open({where:document.body,url:Af(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sf,dontclear:!0},I=>new Promise(function(){var x=(0,f.Z)(function*(O,re){yield I.restyle({setHideOnLeave:!1});const De=Le(w,"network-request-failed"),Je=Hn().setTimeout(()=>{re(De)},Tf.get());function ht(){Hn().clearTimeout(Je),O(I)}I.ping(ht).then(ht,()=>{re(De)})});return function(O,re){return x.apply(this,arguments)}}()))}),Md.apply(this,arguments)}const cc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tl(w,g,_,I,x,O){se(w.config.authDomain,w,"auth-domain-config-required"),se(w.config.apiKey,w,"invalid-api-key");const re={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:P.SDK_VERSION,eventId:x};if(g instanceof Mr){g.setDefaultLanguage(w.languageCode),re.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(re.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Je,ht]of Object.entries(O||{}))re[Je]=ht}if(g instanceof Fo){const Je=g.getScopes().filter(ht=>""!==ht);Je.length>0&&(re.scopes=Je.join(","))}w.tenantId&&(re.tid=w.tenantId);const De=re;for(const Je of Object.keys(De))void 0===De[Je]&&delete De[Je];return`${function Ug({config:w}){return w.emulator?mn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,B.xO)(De).slice(1)}`}const nl="webStorageSupport",Mf=class hc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xs,this._completeRedirectFn=dt,this._overrideRedirectResult=Qn}_openPopup(g,_,I,x){var O=this;return(0,f.Z)(function*(){var re;we(null===(re=O.eventManagers[g._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const De=tl(g,_,I,Ue(),x);return function Nd(w,g,_,I=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),re=Math.max((window.screen.availWidth-I)/2,0).toString();let De="";const Je=Object.assign(Object.assign({},cc),{width:I.toString(),height:x.toString(),top:O,left:re}),ht=(0,B.z$)().toLowerCase();_&&(De=Ie(ht)?"_blank":_),$(ht)&&(g=g||"http://localhost",Je.scrollbars="yes");const Bt=Object.entries(Je).reduce((yo,[cu,Pf])=>`${yo}${cu}=${Pf},`,"");if(function Mn(w=(0,B.z$)()){var g;return rt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ht)&&"_self"!==De)return function mo(w,g){const _=document.createElement("a");_.href=w,_.target=g;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(g||"",De),new dc(null);const On=window.open(g||"",De,Bt);se(On,w,"popup-blocked");try{On.focus()}catch{}return new dc(On)}(g,De,Ko())})()}_openRedirect(g,_,I,x){var O=this;return(0,f.Z)(function*(){return yield O._originValidation(g),function Cd(w){Hn().location.href=w}(tl(g,_,I,Ue(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(we(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(g);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(g){var _=this;return(0,f.Z)(function*(){const I=yield function Lg(w){return Md.apply(this,arguments)}(g),x=new Ir(g);return I.register("authEvent",O=>(se(O?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=I,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(nl,{type:nl},x=>{var O;const re=null===(O=x?.[0])||void 0===O?void 0:O[nl];void 0!==re&&_(!!re),et(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function fo(w){return ui.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return fn()||W()||rt()}};class Rf extends class Pd{constructor(g){this.factorId=g}_process(g,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,I);case"signin":return this._finalizeSignIn(g,_.credential);default:return de("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Rf(g)}_finalizeEnroll(g,_,I){return function Gu(w,g){return Ut(w,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(w,g))}(g,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function ta(w,g){return Ut(w,"POST","/v2/accounts/mfaSignIn:finalize",Wt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ks=(()=>{class w{constructor(){}static assertion(_){return Rf._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var _o="@firebase/auth";class Ry{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(I=>{var x;g((null===(x=I)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function NE(w){(0,P._registerComponent)(new ye.wA("auth",(g,{options:_})=>{const I=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:O,authDomain:re}=I.options;return((De,Je)=>{se(O&&!O.includes(":"),"invalid-api-key",{appName:De.name}),se(!re?.includes(":"),"argument-error",{appName:De.name});const ht={apiKey:O,authDomain:re,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:En(w)},Bt=new Mo(De,Je,ht);return function ae(w,g){const _=g?.persistence||[],I=(Array.isArray(_)?_:[_]).map(te);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(I,g?.popupRedirectResolver)}(Bt,_),Bt})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,I)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new ye.wA("auth-internal",g=>{const _=wt(g.getProvider("auth").getImmediate());return new Ry(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(_o,"0.20.7",function RE(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,P.registerVersion)(_o,"0.20.7","esm2017")}("Browser")},2090:(pt,Re,F)=>{F.d(Re,{$s:()=>kr,BH:()=>Ge,DV:()=>Ut,Dv:()=>vr,G6:()=>se,GJ:()=>Xt,L:()=>fe,LL:()=>Ue,Pz:()=>Gt,Sg:()=>Oe,UG:()=>Ce,UI:()=>zs,US:()=>ye,Wj:()=>wn,Yr:()=>ze,ZB:()=>z,ZR:()=>ae,b$:()=>et,cI:()=>Jt,dS:()=>gt,eu:()=>we,g5:()=>P,gK:()=>Fi,gQ:()=>Di,h$:()=>me,hl:()=>de,hu:()=>B,jU:()=>_e,lb:()=>_n,m9:()=>zt,ne:()=>Oi,p$:()=>q,pd:()=>Vn,r3:()=>Wt,ru:()=>Xe,tV:()=>ve,uI:()=>st,ug:()=>mt,vZ:()=>Ar,w1:()=>Ne,w9:()=>rn,xO:()=>ki,xb:()=>Sr,z$:()=>Te,zI:()=>J,zd:()=>ei});const B=function(Q,G){if(!Q)throw P(G)},P=function(Q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Q)},oe=function(Q){const G=[];let H=0;for(let K=0;K<Q.length;K++){let Z=Q.charCodeAt(K);Z<128?G[H++]=Z:Z<2048?(G[H++]=Z>>6|192,G[H++]=63&Z|128):55296==(64512&Z)&&K+1<Q.length&&56320==(64512&Q.charCodeAt(K+1))?(Z=65536+((1023&Z)<<10)+(1023&Q.charCodeAt(++K)),G[H++]=Z>>18|240,G[H++]=Z>>12&63|128,G[H++]=Z>>6&63|128,G[H++]=63&Z|128):(G[H++]=Z>>12|224,G[H++]=Z>>6&63|128,G[H++]=63&Z|128)}return G},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,G){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let Z=0;Z<Q.length;Z+=3){const xe=Q[Z],We=Z+1<Q.length,It=We?Q[Z+1]:0,ln=Z+2<Q.length,an=ln?Q[Z+2]:0;let $=(15&It)<<2|an>>6,W=63&an;ln||(W=64,We||($=64)),K.push(H[xe>>2],H[(3&xe)<<4|It>>4],H[$],H[W])}return K.join("")},encodeString(Q,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(Q):this.encodeByteArray(oe(Q),G)},decodeString(Q,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(Q):function(Q){const G=[];let H=0,K=0;for(;H<Q.length;){const Z=Q[H++];if(Z<128)G[K++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const xe=Q[H++];G[K++]=String.fromCharCode((31&Z)<<6|63&xe)}else if(Z>239&&Z<365){const ln=((7&Z)<<18|(63&Q[H++])<<12|(63&Q[H++])<<6|63&Q[H++])-65536;G[K++]=String.fromCharCode(55296+(ln>>10)),G[K++]=String.fromCharCode(56320+(1023&ln))}else{const xe=Q[H++],We=Q[H++];G[K++]=String.fromCharCode((15&Z)<<12|(63&xe)<<6|63&We)}}return G.join("")}(this.decodeStringToByteArray(Q,G))},decodeStringToByteArray(Q,G){this.init_();const H=G?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let Z=0;Z<Q.length;){const xe=H[Q.charAt(Z++)],It=Z<Q.length?H[Q.charAt(Z)]:0;++Z;const an=Z<Q.length?H[Q.charAt(Z)]:64;++Z;const ne=Z<Q.length?H[Q.charAt(Z)]:64;if(++Z,null==xe||null==It||null==an||null==ne)throw Error();K.push(xe<<2|It>>4),64!==an&&(K.push(It<<4&240|an>>2),64!==ne&&K.push(an<<6&192|ne))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},me=function(Q){const G=oe(Q);return ye.encodeByteArray(G,!0)},fe=function(Q){return me(Q).replace(/\./g,"")},ve=function(Q){try{return ye.decodeString(Q,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function q(Q){return z(void 0,Q)}function z(Q,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return G}for(const H in G)!G.hasOwnProperty(H)||!X(H)||(Q[H]=z(Q[H],G[H]));return Q}function X(Q){return"__proto__"!==Q}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,H)=>{this.resolve=G,this.reject=H})}wrapCallback(G){return(H,K)=>{H?this.reject(H):this.resolve(K),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(H):G(H,K))}}}function Oe(Q,G){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=G||"demo-project",Z=Q.iat||0,xe=Q.sub||Q.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:Z,exp:Z+3600,auth_time:Z,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(We)),""].join(".")}function Te(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function st(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function Xe(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ne(){const Q=Te();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function ze(){return!1}function se(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function de(){return"object"==typeof indexedDB}function we(){return new Promise((Q,G)=>{try{let H=!0;const K="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(K);Z.onsuccess=()=>{Z.result.close(),H||self.indexedDB.deleteDatabase(K),Q(!0)},Z.onupgradeneeded=()=>{H=!1},Z.onerror=()=>{var xe;G((null===(xe=Z.error)||void 0===xe?void 0:xe.message)||"")}}catch(H){G(H)}})}function J(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ae extends Error{constructor(G,H,K){super(H),this.code=G,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor(G,H,K){this.service=G,this.serviceName=H,this.errors=K}create(G,...H){const K=H[0]||{},Z=`${this.service}/${G}`,xe=this.errors[G],We=xe?function je(Q,G){return Q.replace(yt,(H,K)=>{const Z=G[K];return null!=Z?String(Z):`<${K}?>`})}(xe,K):"Error";return new ae(Z,`${this.serviceName}: ${We} (${Z}).`,K)}}const yt=/\{\$([^}]+)}/g;function Jt(Q){return JSON.parse(Q)}function Gt(Q){return JSON.stringify(Q)}const Ke=function(Q){let G={},H={},K={},Z="";try{const xe=Q.split(".");G=Jt(ve(xe[0])||""),H=Jt(ve(xe[1])||""),Z=xe[2],K=H.d||{},delete H.d}catch{}return{header:G,claims:H,data:K,signature:Z}},rn=function(Q){const H=Ke(Q).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},Xt=function(Q){const G=Ke(Q).claims;return"object"==typeof G&&!0===G.admin};function Wt(Q,G){return Object.prototype.hasOwnProperty.call(Q,G)}function Ut(Q,G){if(Object.prototype.hasOwnProperty.call(Q,G))return Q[G]}function Sr(Q){for(const G in Q)if(Object.prototype.hasOwnProperty.call(Q,G))return!1;return!0}function zs(Q,G,H){const K={};for(const Z in Q)Object.prototype.hasOwnProperty.call(Q,Z)&&(K[Z]=G.call(H,Q[Z],Z,Q));return K}function Ar(Q,G){if(Q===G)return!0;const H=Object.keys(Q),K=Object.keys(G);for(const Z of H){if(!K.includes(Z))return!1;const xe=Q[Z],We=G[Z];if(xn(xe)&&xn(We)){if(!Ar(xe,We))return!1}else if(xe!==We)return!1}for(const Z of K)if(!H.includes(Z))return!1;return!0}function xn(Q){return null!==Q&&"object"==typeof Q}function ki(Q){const G=[];for(const[H,K]of Object.entries(Q))Array.isArray(K)?K.forEach(Z=>{G.push(encodeURIComponent(H)+"="+encodeURIComponent(Z))}):G.push(encodeURIComponent(H)+"="+encodeURIComponent(K));return G.length?"&"+G.join("&"):""}function ei(Q){const G={};return Q.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[Z,xe]=K.split("=");G[decodeURIComponent(Z)]=decodeURIComponent(xe)}}),G}function Vn(Q){const G=Q.indexOf("?");if(!G)return"";const H=Q.indexOf("#",G);return Q.substring(G,H>0?H:void 0)}class Di{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,H){H||(H=0);const K=this.W_;if("string"==typeof G)for(let ne=0;ne<16;ne++)K[ne]=G.charCodeAt(H)<<24|G.charCodeAt(H+1)<<16|G.charCodeAt(H+2)<<8|G.charCodeAt(H+3),H+=4;else for(let ne=0;ne<16;ne++)K[ne]=G[H]<<24|G[H+1]<<16|G[H+2]<<8|G[H+3],H+=4;for(let ne=16;ne<80;ne++){const $=K[ne-3]^K[ne-8]^K[ne-14]^K[ne-16];K[ne]=4294967295&($<<1|$>>>31)}let an,rr,Z=this.chain_[0],xe=this.chain_[1],We=this.chain_[2],It=this.chain_[3],ln=this.chain_[4];for(let ne=0;ne<80;ne++){ne<40?ne<20?(an=It^xe&(We^It),rr=1518500249):(an=xe^We^It,rr=1859775393):ne<60?(an=xe&We|It&(xe|We),rr=2400959708):(an=xe^We^It,rr=3395469782);const $=(Z<<5|Z>>>27)+an+ln+rr+K[ne]&4294967295;ln=It,It=We,We=4294967295&(xe<<30|xe>>>2),xe=Z,Z=$}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+xe&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+It&4294967295,this.chain_[4]=this.chain_[4]+ln&4294967295}update(G,H){if(null==G)return;void 0===H&&(H=G.length);const K=H-this.blockSize;let Z=0;const xe=this.buf_;let We=this.inbuf_;for(;Z<H;){if(0===We)for(;Z<=K;)this.compress_(G,Z),Z+=this.blockSize;if("string"==typeof G){for(;Z<H;)if(xe[We]=G.charCodeAt(Z),++We,++Z,We===this.blockSize){this.compress_(xe),We=0;break}}else for(;Z<H;)if(xe[We]=G[Z],++We,++Z,We===this.blockSize){this.compress_(xe),We=0;break}}this.inbuf_=We,this.total_+=H}digest(){const G=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&H,H/=256;this.compress_(this.buf_);let K=0;for(let Z=0;Z<5;Z++)for(let xe=24;xe>=0;xe-=8)G[K]=this.chain_[Z]>>xe&255,++K;return G}}function Oi(Q,G){const H=new nt(Q,G);return H.subscribe.bind(H)}class nt{constructor(G,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{G(this)}).catch(K=>{this.error(K)})}next(G){this.forEachObserver(H=>{H.next(G)})}error(G){this.forEachObserver(H=>{H.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,H,K){let Z;if(void 0===G&&void 0===H&&void 0===K)throw new Error("Missing Observer.");Z=function Un(Q,G){if("object"!=typeof Q||null===Q)return!1;for(const H of G)if(H in Q&&"function"==typeof Q[H])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:H,complete:K},void 0===Z.next&&(Z.next=hn),void 0===Z.error&&(Z.error=hn),void 0===Z.complete&&(Z.complete=hn);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),xe}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,G)}sendOne(G,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{H(this.observers[G])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hn(){}const vr=function(Q,G,H,K){let Z;if(K<G?Z="at least "+G:K>H&&(Z=0===H?"none":"no more than "+H),Z)throw new Error(Q+" failed: Was called with "+K+(1===K?" argument.":" arguments.")+" Expects "+Z+".")};function Fi(Q,G){return`${Q} failed: ${G} argument `}function wn(Q,G,H,K){if((!K||H)&&"function"!=typeof H)throw new Error(Fi(Q,G)+"must be a valid function.")}function _n(Q,G,H,K){if((!K||H)&&("object"!=typeof H||null===H))throw new Error(Fi(Q,G)+"must be a valid context object.")}const gt=function(Q){const G=[];let H=0;for(let K=0;K<Q.length;K++){let Z=Q.charCodeAt(K);if(Z>=55296&&Z<=56319){const xe=Z-55296;K++,B(K<Q.length,"Surrogate pair missing trail surrogate."),Z=65536+(xe<<10)+(Q.charCodeAt(K)-56320)}Z<128?G[H++]=Z:Z<2048?(G[H++]=Z>>6|192,G[H++]=63&Z|128):Z<65536?(G[H++]=Z>>12|224,G[H++]=Z>>6&63|128,G[H++]=63&Z|128):(G[H++]=Z>>18|240,G[H++]=Z>>12&63|128,G[H++]=Z>>6&63|128,G[H++]=63&Z|128)}return G},mt=function(Q){let G=0;for(let H=0;H<Q.length;H++){const K=Q.charCodeAt(H);K<128?G++:K<2048?G+=2:K>=55296&&K<=56319?(G+=4,H++):G+=3}return G};function kr(Q,G=1e3,H=2){const K=G*Math.pow(H,Q),Z=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+Z)}function zt(Q){return Q&&Q._delegate?Q._delegate:Q}},3656:(pt,Re,F)=>{var f=F(4650);let B=null;function P(){return B}const me=new f.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(){return(0,f.LFG)(z)}()},providedIn:"platform"}),n})();const q=new f.OlP("Location Initialized");let z=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ge(){return new z((0,f.LFG)(me))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function st(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Xe)},providedIn:"root"}),n})();const _e=new f.OlP("appBaseHref");let Xe=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+st(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+st(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+st(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(_e,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),et=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+st(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+st(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(_e,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Te(ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+st(r))}normalize(t){return n.stripTrailingSlash(function Ae(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=st,n.joinWithSlash=Oe,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(f.LFG(Ce))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ne(){return new Le((0,f.LFG)(Ce))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}function Vu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let Dn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new uf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ir("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ir("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class uf{constructor(){this.$implicit=null,this.ngIf=null}}function ir(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}class Tg{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class is{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Sg=new is,rd=new Tg;let $l=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return Sg;if((0,f.F4k)(t))return rd;throw function hi(n,e){return new f.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Mg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Vo(n){return"server"===n}let cd=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new lf((0,f.LFG)(me),window)}),n})();class lf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Si(this.window.history)||Si(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Si(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class to{}class Ss extends class gd extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){B||(B=n)}(new Ss)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function md(){return As=As||document.querySelector("base"),As?As.getAttribute("href"):null}();return null==t?null:function as(n){Rn=Rn||document.createElement("a"),Rn.setAttribute("href",n);const e=Rn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Vu(document.cookie,e)}}let Rn,As=null;const Nn=new f.OlP("TRANSITION_ID"),Jl=[{provide:f.ip1,useFactory:function Ql(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Nn,me,f.zs3],multi:!0}];let Xl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ec=new f.OlP("EventManagerPlugins");let yd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ec),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class tc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Wo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),zo=(()=>{class n extends Wo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(vd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vd))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function vd(n){P().remove(n)}const qo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wd=/%COMP%/g;function Wu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Wu(n,i,t):(i=i.replace(wd,n),t.push(i))}return t}function zu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let qu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new us(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Id(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new mf(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Wu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(yd),f.LFG(zo),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class us{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(qo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(eu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(eu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=qo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zu(r)):this.eventManager.addEventListener(e,t,zu(r))}}function eu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Id extends us{constructor(e,t,r,i){super(e),this.component=r;const a=Wu(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function jn(n){return"_ngcontent-%COMP%".replace(wd,n)}(i+"-"+r.id),this.hostAttr=function Gu(n){return"_nghost-%COMP%".replace(wd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class mf extends us{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Wu(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ar=(()=>{class n extends tc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const _f=["alt","control","meta","shift"],xs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ic={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tu=(()=>{class n extends tc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),_f.forEach(v=>{const D=r.indexOf(v);D>-1&&(r.splice(D,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=xs[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),_f.forEach(l=>{l!==i&&(0,ic[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const nu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function bd(){Ss.makeCurrent()},multi:!0},{provide:me,useFactory:function sc(){return(0,f.RDi)(document),document},deps:[]}]),io=new f.OlP(""),ru=[{provide:f.rWj,useClass:class _d{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Zo=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function ls(){return new f.qLn},deps:[]},{provide:ec,useClass:ar,multi:!0,deps:[me,f.R0b,f.Lbi]},{provide:ec,useClass:tu,multi:!0,deps:[me]},{provide:qu,useClass:qu,deps:[yd,zo,f.AFp]},{provide:f.FYo,useExisting:qu},{provide:Wo,useExisting:zo},{provide:zo,useClass:zo,deps:[me]},{provide:yd,useClass:yd,deps:[ec,f.R0b]},{provide:to,useClass:Xl,deps:[]},[]];let Yo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Nn,useExisting:f.AFp},Jl]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(io,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Zo,...ru],imports:[Mg,f.hGG]}),n})(),Ui=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function iu(){return new Ui((0,f.LFG)(me))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var en=F(8996),ji=F(7669);function at(...n){const e=(0,ji.yG)(n);return(0,en.D)(n,e)}var Hi=F(7579);class Cn extends Hi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const oo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var dr=F(9751);const{isArray:ao}=Array,{getPrototypeOf:Sd,prototype:Ad,keys:Cf}=Object;function uo(n){if(1===n.length){const e=n[0];if(ao(e))return{args:e,keys:null};if(function uc(n){return n&&"object"==typeof n&&Sd(n)===Ad}(e)){const t=Cf(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var lo=F(4671),it=F(4004);const{isArray:su}=Array;function Xu(n){return(0,it.U)(e=>function $i(n,e){return su(e)?n(...e):n(e)}(n,e))}function ou(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var kn=F(5403),au=F(9672);function el(...n){const e=(0,ji.yG)(n),t=(0,ji.jO)(n),{args:r,keys:i}=uo(n);if(0===r.length)return(0,en.D)([],e);const a=new dr.y(function xd(n,e,t=lo.y){return r=>{bf(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)bf(e,()=>{const v=(0,en.D)(n[m],e);let D=!1;v.subscribe((0,kn.x)(r,S=>{a[m]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>ou(i,l):lo.y));return t?a.pipe(Xu(t)):a}function bf(n,e,t){n?(0,au.f)(t,n,e):e()}var sa=F(8189);function oa(...n){return function uu(){return(0,sa.J)(1)}()((0,en.D)(n,(0,ji.yG)(n)))}var oi=F(8421);function co(n){return new dr.y(e=>{(0,oi.Xf)(n()).subscribe(e)})}var lc=F(9635),Rs=F(576);function ai(n,e){const t=(0,Rs.m)(n)?n:()=>n,r=i=>i.error(t());return new dr.y(e?i=>e.schedule(r,0,i):r)}var ds=F(515),Ns=F(727),Qn=F(4482);function ho(){return(0,Qn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,kn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class hs extends dr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Qn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ns.w0;const t=this.getSubject();e.add(this.source.subscribe((0,kn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ns.w0.EMPTY)}return e}refCount(){return ho()(this)}}function $n(n,e){return(0,Qn.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,kn.x)(r,m=>{i?.unsubscribe();let v=0;const D=a++;(0,oi.Xf)(n(m,D)).subscribe(i=(0,kn.x)(r,S=>r.next(e?e(m,S,D,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function Tn(n){return n<=0?()=>ds.E:(0,Qn.e)((e,t)=>{let r=0;e.subscribe((0,kn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function aa(...n){const e=(0,ji.yG)(n);return(0,Qn.e)((t,r)=>{(e?oa(n,t,e):oa(n,t)).subscribe(r)})}function b(n,e){return(0,Qn.e)((t,r)=>{let i=0;t.subscribe((0,kn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var T=F(5577);function M(n){return(0,Qn.e)((e,t)=>{let r=!1;e.subscribe((0,kn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function U(n=ee){return(0,Qn.e)((e,t)=>{let r=!1;e.subscribe((0,kn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ee(){return new oo}function ue(n,e){const t=arguments.length>=2;return r=>r.pipe(n?b((i,a)=>n(i,a,r)):lo.y,Tn(1),t?M(e):U(()=>new oo))}function Me(n,e){return(0,Rs.m)(e)?(0,T.z)(n,e,1):(0,T.z)(n,1)}var Be=F(8505);function dt(n){return(0,Qn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,kn.x)(t,void 0,void 0,l=>{a=(0,oi.Xf)(n(l,dt(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function St(n,e,t,r,i){return(a,l)=>{let h=t,m=e,v=0;a.subscribe((0,kn.x)(l,D=>{const S=v++;m=h?n(m,D,S):(h=!0,D),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}function xt(n,e){return(0,Qn.e)(St(n,e,arguments.length>=2,!0))}function _t(n){return n<=0?()=>ds.E:(0,Qn.e)((e,t)=>{let r=[];e.subscribe((0,kn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Gn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?b((i,a)=>n(i,a,r)):lo.y,_t(1),t?M(e):U(()=>new oo))}function Ps(n){return(0,Qn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ot="primary",xi=Symbol("RouteTitle");class fs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Gi(n){return new fs(n)}function la(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ui(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!xy(n[i],e[i]))return!1;return!0}function xy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Og(n){return Array.prototype.concat.apply([],n)}function Df(n){return n.length>0?n[n.length-1]:null}function Wn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function po(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,en.D)(Promise.resolve(n)):at(n)}const ME={exact:function Lg(n,e,t){if(!mo(n.segments,e.segments)||!go(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Lg(n.children[r],e.children[r],t))return!1;return!0},subset:cc},Sf={exact:function Af(n,e){return ui(n,e)},subset:function Md(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xy(n[t],e[t]))},ignored:()=>!0};function My(n,e,t){return ME[t.paths](n.root,e.root,t.matrixParams)&&Sf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function cc(n,e,t){return Rd(n,e,e.segments,t)}function Rd(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!mo(i,t)||e.hasChildren()||!go(i,t,r))}if(n.segments.length===t.length){if(!mo(n.segments,t)||!go(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!cc(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(mo(n.segments,i)&&go(n.segments,i,r)&&n.children[Ot])&&Rd(n.children[Ot],e,a,r)}}function go(n,e,t){return e.every((r,i)=>Sf[t](n[i].parameters,r.parameters))}class lu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gi(this.queryParams)),this._queryParamMap}toString(){return Ug.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Wn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nl(this)}}class dc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Gi(this.parameters)),this._parameterMap}toString(){return Ry(this)}}function mo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let xf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new tl},providedIn:"root"}),n})();class tl{parse(e){const t=new O(e);return new lu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${hc(e.root,!0)}`,r=function NE(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Pd(t)}=${Pd(i)}`).join("&"):`${Pd(t)}=${Pd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Rf(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ug=new tl;function nl(n){return n.segments.map(e=>Ry(e)).join("/")}function hc(n,e){if(!n.hasChildren())return nl(n);if(e){const t=n.children[Ot]?hc(n.children[Ot],!1):"",r=[];return Wn(n.children,(i,a)=>{a!==Ot&&r.push(`${a}:${hc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Vg(n,e){let t=[];return Wn(n.children,(r,i)=>{i===Ot&&(t=t.concat(e(r,i)))}),Wn(n.children,(r,i)=>{i!==Ot&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ot?[hc(n.children[Ot],!1)]:[`${i}:${hc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${nl(n)}/${t[0]}`:`${nl(n)}/(${t.join("//")})`}}function Mf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pd(n){return Mf(n).replace(/%3B/gi,";")}function ks(n){return Mf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _o(n){return decodeURIComponent(n)}function Nf(n){return _o(n.replace(/\+/g,"%20"))}function Ry(n){return`${ks(n.path)}${function RE(n){return Object.keys(n).map(e=>`;${ks(e)}=${ks(n[e])}`).join("")}(n.parameters)}`}const fT=/^[^\/()?;=#]+/;function w(n){const e=n.match(fT);return e?e[0]:""}const g=/^[^=?&#]+/,I=/^[^&#]+/;class O{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Qt(e,t)),r}parseSegment(){const e=w(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new dc(_o(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=w(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=w(this.remaining);i&&(r=i,this.capture(r))}e[_o(t)]=_o(r)}parseQueryParam(e){const t=function _(n){const e=n.match(g);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function x(n){const e=n.match(I);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Nf(t),a=Nf(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=w(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ot);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Ot]:new Qt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function re(n){return n.segments.length>0?new Qt([],{[Ot]:n}):n}function De(n){const e={};for(const r of Object.keys(n.children)){const a=De(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Je(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function ht(n){return n instanceof lu}function Pf(n,e,t,r,i){if(0===t.length)return rl(e.root,e.root,e.root,r,i);const a=function kf(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new fc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Wn(a.outlets,(m,v)=>{h[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new fc(t,e,r)}(t);return a.toRoot()?rl(e.root,e.root,new Qt([],{}),r,i):function l(m){const v=function jg(n,e,t,r){if(n.isAbsolute)return new du(e.root,!0,0);if(-1===r)return new du(t,t===e.root,0);return function Ff(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new du(r,!1,i-a)}(t,r+(ca(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),D=v.processChildren?pc(v.segmentGroup,v.index,a.commands):Lf(v.segmentGroup,v.index,a.commands);return rl(e.root,v.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function ca(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function vo(n){return"object"==typeof n&&null!=n&&n.outlets}function rl(n,e,t,r,i){let l,a={};r&&Wn(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),l=n===e?t:Bg(n,e,t);const h=re(De(l));return new lu(h,a,i)}function Bg(n,e,t){const r={};return Wn(n.children,(i,a)=>{r[a]=i===e?t:Bg(i,e,t)}),new Qt(n.segments,r)}class fc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ca(r[0]))throw new f.vHH(4003,!1);const i=r.find(vo);if(i&&i!==Df(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class du{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Lf(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return pc(n,e,t);const r=function pT(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(vo(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Hg(m,v,l))return a;r+=2}else{if(!Hg(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Qt(n.segments.slice(0,r.pathIndex),{});return a.children[Ot]=new Qt(n.segments.slice(r.pathIndex),n.children),pc(a,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?hr(n,e,t):r.match?pc(n,0,i):hr(n,e,t)}function pc(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function il(n){return vo(n[0])?n[0].outlets:{[Ot]:n}}(t),i={};return Wn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Lf(n.children[l],e,a))}),Wn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Qt(n.segments,i)}}function hr(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(vo(a)){const m=gT(a.outlets);return new Qt(r,m)}if(0===i&&ca(t[0])){r.push(new dc(n.segments[e].path,PE(t[0]))),i++;continue}const l=vo(a)?a.outlets[Ot]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&ca(h)?(r.push(new dc(l,PE(h))),i+=2):(r.push(new dc(l,{})),i++)}return new Qt(r,{})}function gT(n){const e={};return Wn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=hr(new Qt([],{}),0,t))}),e}function PE(n){const e={};return Wn(n,(t,r)=>e[r]=`${t}`),e}function Hg(n,e,t){return n==t.path&&ui(e,t.parameters)}class da{constructor(e,t){this.id=e,this.url=t}}class Ny extends da{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gc extends da{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $g extends da{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kE extends da{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mT extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _N extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yN extends da{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vf extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Py extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FE{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LE{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _T{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VE{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UE{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class BE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Uf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Uf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Wg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wg(e,this._root).map(t=>t.value)}}function Uf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Uf(n,t);if(r)return r}return null}function Wg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Wg(n,t);if(r.length)return r.unshift(e),r}return[]}class ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Os(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class jE extends BE{constructor(e,t){super(e),this.snapshot=t,Bf(this,e)}toString(){return this.snapshot.toString()}}function zg(n,e){const t=function qg(n,e){const l=new fa([],{},{},"",{},Ot,e,null,n.root,-1,{});return new ky("",new ha(l,[]))}(n,e),r=new Cn([new dc("",{})]),i=new Cn({}),a=new Cn({}),l=new Cn({}),h=new Cn(""),m=new mc(r,i,l,h,a,Ot,e,t.root);return m.snapshot=t.root,new jE(new ha(m,[]),t)}class mc{constructor(e,t,r,i,a,l,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,it.U)(v=>v[xi]))??at(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(e=>Gi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(e=>Gi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Zg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class fa{constructor(e,t,r,i,a,l,h,m,v,D,S,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.[xi],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=D,this._correctedLastPathIndex=R??D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ky extends BE{constructor(e,t){super(t),this.url=e,Bf(this,t)}toString(){return HE(this._root)}}function Bf(n,e){e.value._routerState=n,e.children.forEach(t=>Bf(n,t))}function HE(n){const e=n.children.length>0?` { ${n.children.map(HE).join(", ")} } `:"";return`${n.value}${e}`}function Oy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ui(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ui(e.params,t.params)||n.params.next(t.params),function fo(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ui(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ui(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Yg(n,e){const t=ui(n.params,e.params)&&function Nd(n,e){return mo(n,e)&&n.every((t,r)=>ui(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Yg(n.parent,e.parent))}function jf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function yT(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return jf(n,r,i);return jf(n,r)})}(n,e,t);return new ha(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>jf(n,h)),l}}const r=function vT(n){return new mc(new Cn(n.url),new Cn(n.params),new Cn(n.queryParams),new Cn(n.fragment),new Cn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>jf(n,a));return new ha(r,i)}}const Fy="ngNavigationCancelingError";function Qg(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ht(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$E(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function $E(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Fy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ly(n){return GE(n)&&ht(n.url)}function GE(n){return n&&n[Fy]}class WE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Jg,this.attachRef=null}}let Jg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new WE,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xg=!1;let _c=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,Xg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,Xg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,Xg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,Xg);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new wT(t,h,i.injector);if(r&&function Od(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Jg),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class wT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===mc?this.route:e===Jg?this.childContexts:this.parent.get(e,t)}}let yc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[_c],encapsulation:2}),n})();function zE(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function By(n){const e=n.children&&n.children.map(By),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=yc),t}function Fs(n){return n.outlet||Ot}function em(n,e){const t=n.filter(r=>Fs(r)===e);return t.push(...n.filter(r=>Fs(r)!==e)),t}function tm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jy{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Oy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Os(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Wn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Os(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Os(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Os(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new UE(a.value.snapshot))}),e.children.length&&this.forwardEvent(new _T(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Oy(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Oy(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=tm(i.snapshot),m=h?.get(f._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class IT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hy{constructor(e,t){this.component=e,this.route=t}}function CN(n,e,t){const r=n._root;return $f(r,e?e._root:null,t,[r.value])}function Hf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function $f(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Os(e);return n.children.forEach(l=>{(function ZE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function $y(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!mo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mo(n.url,e.url)||!ui(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yg(n,e)||!ui(n.queryParams,e.queryParams);default:return!Yg(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new IT(r)):(a.data=l.data,a._resolvedData=l._resolvedData),$f(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Hy(h.outlet.component,l))}else l&&Fd(e,h,i),i.canActivateChecks.push(new IT(r)),$f(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Wn(a,(l,h)=>Fd(l,t.getContext(h),i)),i}function Fd(n,e,t){const r=Os(n),i=n.value;Wn(r,(a,l)=>{Fd(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Hy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ld(n){return"function"==typeof n}function nm(n){return n instanceof oo||"EmptyError"===n?.name}const rm=Symbol("INITIAL_VALUE");function Vd(){return $n(n=>el(n.map(e=>e.pipe(Tn(1),aa(rm)))).pipe((0,it.U)(e=>{for(const t of e)if(!0!==t){if(t===rm)return rm;if(!1===t||t instanceof lu)return t}return!0}),b(e=>e!==rm),Tn(1)))}function mi(n){return(0,lc.z)((0,Be.b)(e=>{if(ht(e))throw Qg(0,e)}),(0,it.U)(e=>!0===e))}const im={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sm(n,e,t,r,i){const a=zr(n,e,t);return a.matched?function qy(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?at(i.map(l=>{const h=Hf(l,n);return po(function bT(n){return n&&Ld(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Vd(),mi()):at(!0)}(r=zE(e,r),e,t).pipe((0,it.U)(l=>!0===l?a:{...im})):at(a)}function zr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...im}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||la)(t,n,e);if(!i)return{...im};const a={};Wn(i.posParams,(h,m)=>{a[m]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function sl(n,e,t,r,i="corrected"){if(t.length>0&&function kT(n,e,t){return t.some(r=>om(n,e,r)&&Fs(r)!==Ot)}(n,t,r)){const l=new Qt(e,function PT(n,e,t,r){const i={};i[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Fs(a)!==Ot){const l=new Qt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Fs(a)]=l}return i}(n,e,r,new Qt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function XE(n,e,t){return t.some(r=>om(n,e,r))}(n,t,r)){const l=new Qt(n.segments,function JE(n,e,t,r,i,a){const l={};for(const h of r)if(om(n,t,h)&&!i[Fs(h)]){const m=new Qt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Fs(h)]=m}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Qt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function om(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ky(n,e,t,r){return!!(Fs(n)===r||r!==Ot&&om(e,t,n))&&("**"===n.path||zr(e,n,t).matched)}function eI(n,e,t){return 0===e.length&&!n.children[t]}const Wf=!1;class am{constructor(e){this.segmentGroup=e||null}}class tI{constructor(e){this.urlTree=e}}function zf(n){return ai(new am(n))}function nI(n){return ai(new tI(n))}class FT{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=sl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ot).pipe((0,it.U)(a=>this.createUrlTree(De(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(dt(a=>{if(a instanceof tI)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof am?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ot).pipe((0,it.U)(i=>this.createUrlTree(De(i),e.queryParams,e.fragment))).pipe(dt(i=>{throw i instanceof am?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,Wf)}createUrlTree(e,t,r){const i=re(e);return new lu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,it.U)(a=>new Qt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,en.D)(i).pipe(Me(a=>{const l=r.children[a],h=em(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,it.U)(m=>({segment:m,outlet:a})))}),xt((a,l)=>(a[l.outlet]=l.segment,a),{}),Gn())}expandSegment(e,t,r,i,a,l){return(0,en.D)(r).pipe(Me(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(dt(v=>{if(v instanceof am)return at(null);throw v}))),ue(h=>!!h),dt((h,m)=>{if(nm(h))return eI(t,i,a)?at(new Qt([],{})):zf(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return Ky(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):zf(t):zf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?nI(a):this.lineralizeSegments(r,a).pipe((0,T.z)(l=>{const h=new Qt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:m,remainingSegments:v,positionalParamSegments:D}=zr(t,i,a);if(!h)return zf(t);const S=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?nI(S):this.lineralizeSegments(i,S).pipe((0,T.z)(R=>this.expandSegment(e,t,r,R.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=zE(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,it.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Qt(i,{})))):at(new Qt(i,{}))):sm(t,r,i,e).pipe($n(({matched:l,consumedSegments:h,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,T.z)(D=>{const S=D.injector??e,R=D.routes,{segmentGroup:V,slicedSegments:j}=sl(t,h,m,R),ce=new Qt(V.segments,V.children);if(0===j.length&&ce.hasChildren())return this.expandChildren(S,R,ce).pipe((0,it.U)(lt=>new Qt(h,lt)));if(0===R.length&&0===j.length)return at(new Qt(h,{}));const Ee=Fs(r)===a;return this.expandSegment(S,ce,R,j,Ee?Ot:a,!0).pipe((0,it.U)(ot=>new Qt(h.concat(ot.segments),ot.children)))})):zf(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function NT(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?at(!0):at(i.map(l=>{const h=Hf(l,n);return po(function Gy(n){return n&&Ld(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Vd(),mi())}(e,t,r).pipe((0,T.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Be.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Ud(n){return ai($E(Wf,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[Ot])return ai(new f.vHH(4e3,Wf));i=i.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new lu(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Wn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Wn(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,r,i)}),new Qt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,Wf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class TN{}class pa{constructor(e,t,r,i,a,l,h,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h,this.urlSerializer=m}recognize(){const e=sl(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ot).pipe((0,it.U)(t=>{if(null===t)return null;const r=new fa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ha(r,t),a=new ky(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Kg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,en.D)(Object.keys(r.children)).pipe(Me(i=>{const a=r.children[i],l=em(t,i);return this.processSegmentGroup(e,l,a,i)}),xt((i,a)=>i&&a?(i.push(...a),i):null),function Ir(n,e=!1){return(0,Qn.e)((t,r)=>{let i=0;t.subscribe((0,kn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),M(null),Gn(),(0,it.U)(i=>{if(null===i)return null;const a=Jy(i);return function Yy(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,en.D)(t).pipe(Me(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),ue(l=>!!l),dt(l=>{if(nm(l))return eI(r,i,a)?at([]):at(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!Ky(t,r,i,a))return at(null);let l;if("**"===t.path){const h=i.length>0?Df(i).parameters:{},m=iI(r)+i.length;l=at({snapshot:new fa(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,um(t),Fs(t),t.component??t._loadedComponent??null,t,Bd(r),m,lm(t),m),consumedSegments:[],remainingSegments:[]})}else l=sm(r,t,i,e).pipe((0,it.U)(({matched:h,consumedSegments:m,remainingSegments:v,parameters:D})=>{if(!h)return null;const S=iI(r)+m.length;return{snapshot:new fa(m,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,um(t),Fs(t),t.component??t._loadedComponent??null,t,Bd(r),S,lm(t),S),consumedSegments:m,remainingSegments:v}}));return l.pipe($n(h=>{if(null===h)return at(null);const{snapshot:m,consumedSegments:v,remainingSegments:D}=h;e=t._injector??e;const S=t._loadedInjector??e,R=function Qy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:j}=sl(r,v,D,R.filter(Ee=>void 0===Ee.redirectTo),this.relativeLinkResolution);if(0===j.length&&V.hasChildren())return this.processChildren(S,R,V).pipe((0,it.U)(Ee=>null===Ee?null:[new ha(m,Ee)]));if(0===R.length&&0===j.length)return at([new ha(m,[])]);const ce=Fs(t)===a;return this.processSegment(S,R,V,j,ce?Ot:a).pipe((0,it.U)(Ee=>null===Ee?null:[new ha(m,Ee)]))}))}}function VT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Jy(n){const e=[],t=new Set;for(const r of n){if(!VT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Jy(r.children);e.push(new ha(r.value,i))}return e.filter(r=>!t.has(r))}function Bd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function iI(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function um(n){return n.data||{}}function lm(n){return n.resolve||{}}function cm(n){return"string"==typeof n.title||null===n.title}function ev(n){return $n(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,it.U)(()=>e)):at(e)})}let uI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Ot);return r}getResolvedTitleForRoute(t){return t.data[xi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(lI)},providedIn:"root"}),n})(),lI=(()=>{class n extends uI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ui))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class jT{}class cI extends class HT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const qf=new f.OlP("",{providedIn:"root",factory:()=>({})}),nv=new f.OlP("ROUTES");let rv=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=po(t.loadComponent()).pipe((0,Be.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Ps(()=>{this.componentLoaders.delete(t)})),i=new hs(r,()=>new Hi.x).pipe(ho());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,it.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,D=!1;Array.isArray(h)?v=h:(m=h.create(t).injector,v=Og(m.get(nv,[],f.XFs.Self|f.XFs.Optional)));return{routes:v.map(By),injector:m}}),Ps(()=>{this.childrenLoaders.delete(r)})),l=new hs(a,()=>new Hi.x).pipe(ho());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return po(t()).pipe((0,T.z)(r=>r instanceof f.YKP||Array.isArray(r)?at(r):(0,en.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dI{}class hI{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function fI(n){throw n}function pI(n,e,t){return e.parse("/")}const $T={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function gI(){const n=(0,f.f3M)(xf),e=(0,f.f3M)(Jg),t=(0,f.f3M)(Le),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),a=(0,f.f3M)(nv,{optional:!0})??[],l=(0,f.f3M)(qf,{optional:!0})??{},h=(0,f.f3M)(lI),m=(0,f.f3M)(uI,{optional:!0}),v=(0,f.f3M)(dI,{optional:!0}),D=(0,f.f3M)(jT,{optional:!0}),S=new Jn(null,n,e,t,r,i,Og(a));return v&&(S.urlHandlingStrategy=v),D&&(S.routeReuseStrategy=D),S.titleStrategy=m??h,function hm(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S}let Jn=(()=>{class n{constructor(t,r,i,a,l,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Hi.x,this.errorHandler=fI,this.malformedUriErrorHandler=pI,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>at(void 0),this.urlHandlingStrategy=new hI,this.routeReuseStrategy=new cI,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(rv),this.configLoader.onLoadEndListener=R=>this.triggerEvent(new FE(R)),this.configLoader.onLoadStartListener=R=>this.triggerEvent(new OE(R)),this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const S=l.get(f.R0b);this.isNgZoneEnabled=S instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function Fg(){return new lu(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zg(this.currentUrlTree,this.rootComponentType),this.transitions=new Cn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(b(i=>0!==i.id),(0,it.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),$n(i=>{let a=!1,l=!1;return at(i).pipe((0,Be.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$n(h=>{const m=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return iv(h.source)&&(this.browserUrlTree=h.extractedUrl),at(h).pipe($n(S=>{const R=this.transitions.getValue();return r.next(new Ny(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),R!==this.transitions.getValue()?ds.E:Promise.resolve(S)}),function LT(n,e,t,r){return $n(i=>function hu(n,e,t,r,i){return new FT(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,it.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Be.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function oI(n,e,t,r,i,a){return(0,T.z)(l=>function SN(n,e,t,r,i,a,l="emptyOnly",h="legacy"){return new pa(n,e,t,r,i,l,h,a).recognize().pipe($n(m=>null===m?function rI(n){return new dr.y(e=>e.error(n))}(new TN):at(m)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,it.U)(h=>({...l,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Be.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const R=new mT(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(R)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:V,source:j,restoredState:ce,extras:Ee}=h,Ze=new Ny(R,this.serializeUrl(V),j,ce);r.next(Ze);const ot=zg(V,this.rootComponentType).snapshot;return at(i={...h,targetSnapshot:ot,urlAfterRedirects:V,extras:{...Ee,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),ds.E}),(0,Be.b)(h=>{const m=new _N(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,it.U)(h=>i={...h,guards:CN(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function TT(n,e){return(0,T.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?at({...t,guardsResult:!0}):function ST(n,e,t,r){return(0,en.D)(n).pipe((0,T.z)(i=>function RT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?at(a.map(h=>{const m=tm(e)??i,v=Hf(h,m);return po(function Gf(n){return n&&Ld(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(ue())})).pipe(Vd()):at(!0)}(i.component,i.route,t,e,r)),ue(i=>!0!==i,!0))}(l,r,i,n).pipe((0,T.z)(h=>h&&function YE(n){return"boolean"==typeof n}(h)?function zy(n,e,t,r){return(0,en.D)(e).pipe(Me(i=>oa(function xT(n,e){return null!==n&&e&&e(new LE(n)),at(!0)}(i.route.parent,r),function AT(n,e){return null!==n&&e&&e(new VE(n)),at(!0)}(i.route,r),function QE(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function bN(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>co(()=>at(l.guards.map(m=>{const v=tm(l.node)??t,D=Hf(m,v);return po(function Wy(n){return n&&Ld(n.canActivateChild)}(D)?D.canActivateChild(r,n):v.runInContext(()=>D(r,n))).pipe(ue())})).pipe(Vd())));return at(a).pipe(Vd())}(n,i.path,t),function MT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(a=>co(()=>{const l=tm(e)??t,h=Hf(a,l);return po(function CT(n){return n&&Ld(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(ue())}));return at(i).pipe(Vd())}(n,i.route,t))),ue(i=>!0!==i,!0))}(r,a,n,e):at(h)),(0,it.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Be.b)(h=>{if(i.guardsResult=h.guardsResult,ht(h.guardsResult))throw Qg(0,h.guardsResult);const m=new yN(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),b(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),ev(h=>{if(h.guards.canActivateChecks.length)return at(h).pipe((0,Be.b)(m=>{const v=new Vf(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),$n(m=>{let v=!1;return at(m).pipe(function AN(n,e){return(0,T.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let a=0;return(0,en.D)(i).pipe(Me(l=>function jd(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!cm(i)&&(a[xi]=i.title),function Xy(n,e,t,r){const i=function aI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return at({});const a={};return(0,en.D)(i).pipe((0,T.z)(l=>function BT(n,e,t,r){const i=tm(e)??r,a=Hf(n,i);return po(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(ue(),(0,Be.b)(h=>{a[l]=h}))),_t(1),function ua(n){return(0,it.U)(()=>n)}(a),dt(l=>nm(l)?ds.E:ai(l)))}(a,n,e,r).pipe((0,it.U)(l=>(n._resolvedData=l,n.data=Kg(n,t).resolve,i&&cm(i)&&(n.data[xi]=i.title),null)))}(l.route,r,n,e)),(0,Be.b)(()=>a++),_t(1),(0,T.z)(l=>a===i.length?at(t):ds.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Be.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Be.b)(m=>{const v=new Py(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),ev(h=>{const m=v=>{const D=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Be.b)(S=>{v.component=S}),(0,it.U)(()=>{})));for(const S of v.children)D.push(...m(S));return D};return el(m(h.targetSnapshot.root)).pipe(M(),Tn(1))}),ev(()=>this.afterPreactivation()),(0,it.U)(h=>{const m=function kd(n,e,t){const r=jf(n,e._root,t?t._root:void 0);return new jE(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:m}}),(0,Be.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,it.U)(r=>(new jy(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Be.b)({next(){a=!0},complete(){a=!0}}),Ps(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),dt(h=>{if(l=!0,GE(h)){Ly(h)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new $g(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(m),Ly(h)){const v=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||iv(i.source)};this.scheduleNavigation(v,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new kE(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return ds.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(By),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,v=i||this.routerState.root,D=m?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),Pf(v,this.currentUrlTree,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ht(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function mI(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...$T}:!1===r?{...MN}:r,ht(t))return My(this.currentUrlTree,t,i);const a=this.parseUrl(t);return My(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new gc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,m,v;l?(h=l.resolve,m=l.reject,v=l.promise):v=new Promise((R,V)=>{h=R,m=V});const D=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:D,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new $g(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return gI()},providedIn:"root"}),n})();function iv(n){return"imperative"!==n}let ma=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Hi.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Jn),f.Y36(mc),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})(),vc=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Hi.x,this.subscription=t.events.subscribe(a=>{a instanceof gc&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){return!!(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Jn),f.Y36(mc),f.Y36(Ce))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class sv{}let ov=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(b(t=>t instanceof gc),Me(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,f.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,en.D)(i).pipe((0,sa.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const a=i.pipe((0,T.z)(l=>null===l?at(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,en.D)([a,l]).pipe((0,sa.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Jn),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(sv),f.LFG(rv))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wc=new f.OlP("");let yI=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ny?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Gg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ec(n,e){return{\u0275kind:n,\u0275providers:e}}function Zf(n){return[{provide:nv,multi:!0,useValue:n}]}function zT(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Jn),i=n.get(av);1===n.get(uv)&&r.initialNavigation(),n.get(Ls,null,f.XFs.Optional)?.setUpPreloading(),n.get(wc,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const av=new f.OlP("",{factory:()=>new Hi.x}),uv=new f.OlP("",{providedIn:"root",factory:()=>1});const Ls=new f.OlP("");function ZT(n){return Ec(0,[{provide:Ls,useExisting:ov},{provide:sv,useExisting:n}])}const EI=new f.OlP("ROUTER_FORROOT_GUARD"),QT=[Le,{provide:xf,useClass:tl},{provide:Jn,useFactory:gI},Jg,{provide:mc,useFactory:function vI(n){return n.routerState.root},deps:[Jn]},rv];function II(){return new f.PXZ("Router",Jn)}let CI=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[QT,[],Zf(t),{provide:EI,useFactory:bI,deps:[[Jn,new f.FiY,new f.tp0]]},{provide:qf,useValue:r||{}},r?.useHash?{provide:Ce,useClass:et}:{provide:Ce,useClass:Xe},{provide:wc,useFactory:()=>{const n=(0,f.f3M)(Jn),e=(0,f.f3M)(cd),t=(0,f.f3M)(qf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new yI(n,e,t)}},r?.preloadingStrategy?ZT(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:II},r?.initialNavigation?DI(r):[],[{provide:lv,useFactory:zT},{provide:f.tb,multi:!0,useExisting:lv}]]}}static forChild(t){return{ngModule:n,providers:[Zf(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(EI,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[yc]}),n})();function bI(n){return"guarded"}function DI(n){return["disabled"===n.initialNavigation?Ec(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Jn);return()=>{e.setUpLocationChangeListener()}}},{provide:uv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ec(2,[{provide:uv,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(q,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(Jn),h=e.get(av);(function i(a){e.get(Jn).events.pipe(b(h=>h instanceof gc||h instanceof $g||h instanceof kE),(0,it.U)(h=>h instanceof gc||h instanceof $g&&(0===h.code||1===h.code)&&null),b(h=>null!==h),Tn(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||h.closed?at(void 0):h),l.initialNavigation()}))}}]).\u0275providers:[]]}const lv=new f.OlP("");let TI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-admin-dashboard"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"p"),f._uU(1,"admin-dashboard works!"),f.qZA())}}),n})();var be=F(5861),SI=F(7143),k=F(2090),Mi=F(9681),_a=F(1877),Vs=F(4859),mm=F(6451),ya=F(5363),tS=F(6063);class cv extends Hi.x{constructor(e=1/0,t=1/0,r=tS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var _m=F(3099);function AI(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,_m.B)({connector:()=>new cv(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function nS(n,e){return(0,Rs.m)(e)?$n(()=>n,e):$n(()=>n)}var xI=F(9468),bn=F(5813),Fr=F(2011);F(5867);const vm=new Map,BN={activated:!1,tokenObservers:[]},pv={initialized:!1,enabled:!1};function qr(n){return vm.get(n)||BN}function va(n,e){vm.set(n,e)}function fu(){return pv}class mv{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function pu(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _i=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function cS(n){if(!qr(n).activated)throw _i.create("use-before-activation",{appName:n.name})}function $d(n,e){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,be.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const V=yield l.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const h={method:"POST",body:JSON.stringify(e),headers:a};let m,v;try{m=yield fetch(n,h)}catch(V){throw _i.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==m.status)throw _i.create("fetch-status-error",{httpStatus:m.status});try{v=yield m.json()}catch(V){throw _i.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const D=v.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(D[1]),R=Date.now();return{token:v.token,expireTimeMillis:R+S,issuedAtTimeMillis:R}})).apply(this,arguments)}function Ev(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Qf="firebase-app-check-store";let Cm=null;function Iv(){return Cm||(Cm=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(_i.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Qf,{keyPath:"compositeKey"})}}catch(r){e(_i.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Cm)}function bv(){return(bv=(0,be.Z)(function*(n,e){const r=(yield Iv()).transaction(Qf,"readwrite"),a=r.objectStore(Qf).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;h(_i.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Dm=new _a.Yd("@firebase/app-check");function pS(n,e){return(0,k.hl)()?function hS(n,e){return function Cv(n,e){return bv.apply(this,arguments)}(function fS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Dm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gS(){return fu().enabled}function mS(){return wa.apply(this,arguments)}function wa(){return(wa=(0,be.Z)(function*(){const n=fu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const _S={error:"UNKNOWN_ERROR"};function LI(n){return k.US.encodeString(JSON.stringify(n),!1)}function Wd(n){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,be.Z)(function*(n,e=!1){const t=n.app;cS(t);const r=qr(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&Sm(m)&&(i=m)}if(!e&&i&&Sm(i))return{token:i.token};let h,l=!1;if(gS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$d(Ev(t,yield mS()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0);const m=yield r.exchangeTokenPromise;return yield pS(t,m),va(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),l=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Dm.warn(m.message):Dm.error(m),a=m}return i?(h={token:i.token},va(t,Object.assign(Object.assign({},r),{token:i})),yield pS(t,i)):h=BI(a),l&&UI(t,h),h})).apply(this,arguments)}function Tv(n,e){const t=qr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),va(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function gu(n){const{app:e}=n,t=qr(e);let r=t.tokenRefresher;r||(r=function VI(n){const{app:e}=n;return new mv((0,be.Z)(function*(){let r;if(r=qr(e).token?yield Wd(n,!0):yield Wd(n),r.error)throw r.error}),()=>!0,()=>{const t=qr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),va(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function UI(n,e){const t=qr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Sm(n){return n.expireTimeMillis-Date.now()>0}function BI(n){return{token:LI(_S),error:n}}class yS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=qr(this.app);for(const t of e)Tv(this.app,t.next);return Promise.resolve()}}const kv="app-check-internal";!function IS(){(0,Mi._registerComponent)(new Vs.wA("app-check",n=>function vS(n,e){return new yS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kv).initialize()})),(0,Mi._registerComponent)(new Vs.wA(kv,n=>function Am(n){return{getToken:e=>Wd(n,e),addTokenListener:e=>function Jf(n,e,t,r){const{app:i}=n,a=qr(i),l={next:t,error:r,type:e};if(va(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&Sm(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),gu(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>gu(n))}(n,"INTERNAL",e),removeTokenListener:e=>Tv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Mi.registerVersion)("@firebase/app-check","0.5.12")}();class Kd{constructor(){return(0,bn.vb)("app-check")}}typeof window<"u"&&window;var KI=F(127);const Lv=new f.OlP("angularfire2.auth.use-emulator"),Vv=new f.OlP("angularfire2.auth.settings"),Zd=new f.OlP("angularfire2.auth.tenant-id"),ep=new f.OlP("angularfire2.auth.langugage-code"),Yd=new f.OlP("angularfire2.auth.use-device-language"),ZI=new f.OlP("angularfire.auth.persistence"),tp=(n,e,t,r,i,a,l,h)=>(0,Fr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,D]of Object.entries(l))m.settings[v]=D;return h&&m.setPersistence(h),m},[t,r,i,a,l,h]);let Ea=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,R,V){const j=new Hi.x,ce=at(void 0).pipe((0,ya.Q)(l.outsideAngular),$n(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,it.U)(()=>(0,Fr.on)(t,a,r)),(0,it.U)(Ee=>tp(Ee,a,h,v,D,S,m,R)),AI({bufferSize:1,refCount:!1}));if(Vo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{ce.pipe(ue()).subscribe();const Ze=ce.pipe($n(ct=>ct.getRedirectResult().then(Rt=>Rt,()=>null)),bn.iC,AI({bufferSize:1,refCount:!1})),ot=ce.pipe($n(ct=>new dr.y(Rt=>({unsubscribe:a.runOutsideAngular(()=>ct.onAuthStateChanged($t=>Rt.next($t),$t=>Rt.error($t),()=>Rt.complete()))})))),lt=ce.pipe($n(ct=>new dr.y(Rt=>({unsubscribe:a.runOutsideAngular(()=>ct.onIdTokenChanged($t=>Rt.next($t),$t=>Rt.error($t),()=>Rt.complete()))}))));this.authState=Ze.pipe(nS(ot),(0,xI.R)(l.outsideAngular),(0,ya.Q)(l.insideAngular)),this.user=Ze.pipe(nS(lt),(0,xI.R)(l.outsideAngular),(0,ya.Q)(l.insideAngular)),this.idToken=this.user.pipe($n(ct=>ct?(0,en.D)(ct.getIdToken()):at(null))),this.idTokenResult=this.user.pipe($n(ct=>ct?(0,en.D)(ct.getIdTokenResult()):at(null))),this.credential=(0,mm.T)(Ze,j,this.authState.pipe(b(ct=>!ct))).pipe((0,it.U)(ct=>ct?.user?ct:null),(0,xI.R)(l.outsideAngular),(0,ya.Q)(l.insideAngular))}return(0,Fr.pX)(this,ce,a,{spy:{apply:(Ee,Ze,ot)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&ot.then(lt=>j.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fr.Dh),f.LFG(Fr.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(Lv,8),f.LFG(Vv,8),f.LFG(Zd,8),f.LFG(ep,8),f.LFG(Yd,8),f.LFG(ZI,8),f.LFG(Kd,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var km=F(4986);function Om(){return(0,Qn.e)((n,e)=>{let t,r=!1;n.subscribe((0,kn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Uv(n,e=lo.y){return n=n??Bv,(0,Qn.e)((t,r)=>{let i,a=!0;t.subscribe((0,kn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function Bv(n,e){return n===e}F(5881);var Et,Qd=F(3942),Fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gs={},np=np||{},Vt=Fm||self;function Lm(){}function Vm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function _u(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var YI="closure_uid_"+(1e9*Math.random()>>>0),MS=0;function tP(n,e,t){return n.call.apply(n.bind,arguments)}function RS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function yi(n,e,t){return(yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tP:RS).apply(null,arguments)}function Um(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Kr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Ia(){this.s=this.s,this.o=this.o}var jv={};Ia.prototype.s=!1,Ia.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function xS(n){return Object.prototype.hasOwnProperty.call(n,YI)&&n[YI]||(n[YI]=++MS)}(this);delete jv[n]}},Ia.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const QI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Hv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function JI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Vm(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function vi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}vi.prototype.h=function(){this.defaultPrevented=!0};var PS=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",Lm,e),Vt.removeEventListener("test",Lm,e)}catch{}return n}();function Bm(n){return/^[\s\xa0]*$/.test(n)}var rp=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function yu(n,e){return n<e?-1:n>e?1:0}function $v(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function Wi(n){return-1!=$v().indexOf(n)}function Gv(n){return Gv[" "](n),n}Gv[" "]=Lm;var Ri,n,Wv=Wi("Opera"),Jd=Wi("Trident")||Wi("MSIE"),Eo=Wi("Edge"),Ic=Eo||Jd,li=Wi("Gecko")&&!(-1!=$v().toLowerCase().indexOf("webkit")&&!Wi("Edge"))&&!(Wi("Trident")||Wi("MSIE"))&&!Wi("Edge"),Cc=-1!=$v().toLowerCase().indexOf("webkit")&&!Wi("Edge");function ip(){var n=Vt.document;return n?n.documentMode:void 0}e:{var sp="",al=(n=$v(),li?/rv:([^\);]+)(\)|;)/.exec(n):Eo?/Edge\/([\d\.]+)/.exec(n):Jd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Cc?/WebKit\/(\S+)/.exec(n):Wv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(al&&(sp=al?al[1]:""),Jd){var ul=ip();if(null!=ul&&ul>parseFloat(sp)){Ri=String(ul);break e}}Ri=sp}var Xd={};var th=Vt.document&&Jd&&(ip()||parseInt(Ri,10))||void 0;function Ca(n,e){if(vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(li){e:{try{Gv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:nh[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ca.X.h.call(this)}}Kr(Ca,vi);var nh={2:"touch",3:"pen",4:"mouse"};Ca.prototype.h=function(){Ca.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var rh="closure_listenable_"+(1e6*Math.random()|0),XI=0;function eC(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++XI,this.ba=this.ea=!1}function op(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function jm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function zv(n){const e={};for(const t in n)e[t]=n[t];return e}const qv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<qv.length;a++)t=qv[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ap(n){this.src=n,this.g={},this.h=0}function Zv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=QI(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(op(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Yv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}ap.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Yv(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new eC(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Hm="closure_lm_"+(1e6*Math.random()|0),Qv={};function tC(n,e,t,r,i){if(r&&r.once)return nC(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)tC(n,e[a],t,r,i);return null}return t=Wm(t),n&&n[rh]?n.N(e,t,_u(r)?!!r.capture:!!r,i):$m(n,e,t,!1,r,i)}function $m(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=_u(i)?!!i.capture:!!i,h=lp(n);if(h||(n[Hm]=h=new ap(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function Jv(){const e=OS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)PS||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Gm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function nC(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)nC(n,e[a],t,r,i);return null}return t=Wm(t),n&&n[rh]?n.O(e,t,_u(r)?!!r.capture:!!r,i):$m(n,e,t,!0,r,i)}function up(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)up(n,e[a],t,r,i);else r=_u(r)?!!r.capture:!!r,t=Wm(t),n&&n[rh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Yv(a=n.g[e],t,r,i))&&(op(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=lp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Yv(e,t,r,i)),(t=-1<n?e[n]:null)&&ih(t))}function ih(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[rh])Zv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Gm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=lp(e))?(Zv(t,n),0==t.h&&(t.src=null,e[Hm]=null)):op(n)}}}function Gm(n){return n in Qv?Qv[n]:Qv[n]="on"+n}function OS(n,e){if(n.ba)n=!0;else{e=new Ca(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ih(n),n=t.call(r,e)}return n}function lp(n){return(n=n[Hm])instanceof ap?n:null}var cp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wm(n){return"function"==typeof n?n:(n[cp]||(n[cp]=function(e){return n.handleEvent(e)}),n[cp])}function Lr(){Ia.call(this),this.i=new ap(this),this.P=this,this.I=null}function Vr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new vi(e,n);else if(e instanceof vi)e.target=e.target||n;else{var i=e;Kv(e=new vi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=dp(l,r,!0,e)&&i}if(i=dp(l=e.g=n,r,!0,e)&&i,i=dp(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=dp(l=e.g=t[a],r,!1,e)&&i}function dp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,m=l.ha||l.src;l.ea&&Zv(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Kr(Lr,Ia),Lr.prototype[rh]=!0,Lr.prototype.removeEventListener=function(n,e,t,r){up(this,n,e,t,r)},Lr.prototype.M=function(){if(Lr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)op(t[r]);delete n.g[e],n.h--}}this.I=null},Lr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Lr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var zm=Vt.JSON.stringify;function Xv(){var n=aC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var qm,iC=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new sC,n=>n.reset());class sC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oC(n){Vt.setTimeout(()=>{throw n},0)}function e0(n,e){qm||function FS(){var n=Vt.Promise.resolve(void 0);qm=function(){n.then(uC)}}(),t0||(qm(),t0=!0),aC.add(n,e)}var t0=!1,aC=new class rC{constructor(){this.h=this.g=null}add(e,t){const r=iC.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function uC(){for(var n;n=Xv();){try{n.h.call(n.g)}catch(t){oC(t)}var e=iC;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}t0=!1}function sh(n,e){Lr.call(this),this.h=n||1,this.g=e||Vt,this.j=yi(this.kb,this),this.l=Date.now()}function Km(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Zm(n,e,t){if("function"==typeof n)t&&(n=yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function n0(n){n.g=Zm(()=>{n.g=null,n.i&&(n.i=!1,n0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kr(sh,Lr),(Et=sh.prototype).ca=!1,Et.R=null,Et.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Vr(this,"tick"),this.ca&&(Km(this),this.start()))}},Et.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Et.M=function(){sh.X.M.call(this),Km(this),delete this.g};class lC extends Ia{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:n0(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oh(n){Ia.call(this),this.h=n,this.g={}}Kr(oh,Ia);var r0=[];function s0(n,e,t,r){Array.isArray(t)||(t&&(r0[0]=t.toString()),t=r0);for(var i=0;i<t.length;i++){var a=tC(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function o0(n){jm(n.g,function(e,t){this.g.hasOwnProperty(t)&&ih(e)},n),n.g={}}function a0(){this.g=!0}function Dc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ur(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return zm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}oh.prototype.M=function(){oh.X.M.call(this),o0(this)},oh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},a0.prototype.Aa=function(){this.g=!1},a0.prototype.info=function(){};var cl={},cC=null;function Ym(){return cC=cC||new Lr}function u0(n){vi.call(this,cl.Oa,n)}function hp(n){const e=Ym();Vr(e,new u0(e,n))}function l0(n,e){vi.call(this,cl.STAT_EVENT,n),this.stat=e}function wi(n){const e=Ym();Vr(e,new l0(e,n))}function Tc(n,e){vi.call(this,cl.Pa,n),this.size=e}function fp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}cl.Oa="serverreachability",Kr(u0,vi),cl.STAT_EVENT="statevent",Kr(l0,vi),cl.Pa="timingevent",Kr(Tc,vi);var Qm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},c0={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function d0(){}function BS(){}d0.prototype.h=null;var f0,ah={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function pp(){vi.call(this,"d")}function Us(){vi.call(this,"c")}function Jm(){}function zi(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new oh(this),this.O=Io,this.T=new sh(n=Ic?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Bs}function Bs(){this.i=null,this.g="",this.h=!1}Kr(pp,vi),Kr(Us,vi),Kr(Jm,d0),Jm.prototype.g=function(){return new XMLHttpRequest},Jm.prototype.i=function(){return{}},f0=new Jm;var Io=45e3,Xm={},gp={};function p0(n,e,t){n.K=1,n.v=wp(Da(e)),n.s=t,n.P=!0,dC(n,null)}function dC(n,e){n.F=Date.now(),vu(n),n.A=Da(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),yC(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Bs,n.g=hh(n.l,t?e:null,!n.s),0<n.N&&(n.L=new lC(yi(n.Ka,n,n.g),n.N)),s0(n.S,n.g,"readystatechange",n.hb),e=n.H?zv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),hp(1),function LS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function hC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function fC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=g0(n,t),i==gp){4==e&&(n.o=4,wi(14),r=!1),Dc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Xm){n.o=4,wi(15),Dc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Dc(n.j,n.m,i,null),e_(n,i)}hC(n)&&i!=gp&&i!=Xm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,wi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),D0(e),e.K=!0,wi(11))):(Dc(n.j,n.m,t,"[Invalid Chunked Response]"),dl(n),_p(n))}function g0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gp:(t=Number(e.substring(t,r)),isNaN(t)?Xm:(r+=1)+t>e.length?gp:(e=e.substr(r,t),n.C=r+t,e))}function vu(n){n.V=Date.now()+n.O,pC(n,n.O)}function pC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=fp(yi(n.fb,n),e)}function mp(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function _p(n){0==n.l.G||n.I||xp(n.l,n)}function dl(n){mp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Km(n.T),o0(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function e_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||n_(t.h,n)))if(!n.J&&n_(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;l_(t),u_(t)}Ac(t),wi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=fp(yi(t.bb,t),6e3));if(1>=EC(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else fl(t,11)}else if((n.J||t.g==n)&&l_(t),!Bm(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const D=v[3];null!=D&&(t.ma=D,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const R=v[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const j=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.h;a.g||-1==j.indexOf("spdy")&&-1==j.indexOf("quic")&&-1==j.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(r_(a,a.h),a.h=null))}if(r.D){const ce=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.za=ce,zn(r.F,r.D,ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=kC(r,r.H?r.ka:null,r.V),l.J){w0(r.h,l);var h=l,m=r.J;m&&h.setTimeout(m),h.B&&(mp(h),vu(h)),r.g=l}else NC(r);0<t.i.length&&Sp(t)}else"stop"!=v[0]&&"close"!=v[0]||fl(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?fl(t,7):a_(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}hp(4)}catch{}}function m0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Vm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function jS(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Vm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function t_(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Vm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Et=zi.prototype).setTimeout=function(n){this.O=n},Et.hb=function(n){n=n.target;const e=this.L;e&&3==Eu(n)?e.l():this.Ka(n)},Et.Ka=function(n){try{if(n==this.g)e:{const D=Eu(this.g);var e=this.g.Ea();const S=this.g.aa();if(!(3>D)&&(3!=D||Ic||this.g&&(this.h.h||this.g.fa()||Dp(this.g)))){this.I||4!=D||7==e||hp(8==e||0>=S?3:2),mp(this);var t=this.g.aa();this.Y=t;t:if(hC(this)){var r=Dp(this.g);n="";var i=r.length,a=4==Eu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){dl(this),_p(this);var l="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function VS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,D,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bm(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,wi(12),dl(this),_p(this);break e}Dc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,e_(this,t)}this.P?(fC(this,D,l),Ic&&this.i&&3==D&&(s0(this.S,this.T,"tick",this.gb),this.T.start())):(Dc(this.j,this.m,l,null),e_(this,l)),4==D&&dl(this),this.i&&!this.I&&(4==D?xp(this.l,this):(this.i=!1,vu(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,wi(12)):(this.o=0,wi(13)),dl(this),_p(this)}}}catch{}},Et.gb=function(){if(this.g){var n=Eu(this.g),e=this.g.fa();this.C<e.length&&(mp(this),fC(this,n,e),this.i&&4!=n&&vu(this))}},Et.cancel=function(){this.I=!0,dl(this)},Et.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function US(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(hp(3),wi(17)),dl(this),this.o=2,_p(this)):pC(this,this.V-n)};var _0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ba(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ba){this.h=void 0!==e?e:n.h,yp(this,n.j),this.s=n.s,this.g=n.g,vp(this,n.m),this.l=n.l,e=n.i;var t=new Ep;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),v0(this,t),this.o=n.o}else n&&(t=String(n).match(_0))?(this.h=!!e,yp(this,t[1]||"",!0),this.s=uh(t[2]||""),this.g=uh(t[3]||"",!0),vp(this,t[4]),this.l=uh(t[5]||"",!0),v0(this,t[6]||"",!0),this.o=uh(t[7]||"")):(this.h=!!e,this.i=new Ep(null,this.h))}function Da(n){return new ba(n)}function yp(n,e,t){n.j=t?uh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function vp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function v0(n,e,t){e instanceof Ep?(n.i=e,function qS(n,e){e&&!n.j&&(hl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(mC(this,r),yC(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=lh(e,WS)),n.i=new Ep(e,n.h))}function zn(n,e,t){n.i.set(e,t)}function wp(n){return zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function uh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function lh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,HS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function HS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ba.prototype.toString=function(){var n=[],e=this.j;e&&n.push(lh(e,gC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(lh(e,gC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(lh(t,"/"==t.charAt(0)?GS:$S,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",lh(t,zS)),n.join("")};var gC=/[#\/\?@]/g,$S=/[#\?:]/g,GS=/[#\?]/g,WS=/[#\?@]/g,zS=/#/g;function Ep(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function hl(n){n.g||(n.g=new Map,n.h=0,n.i&&function y0(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function mC(n,e){hl(n),e=ch(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function _C(n,e){return hl(n),e=ch(n,e),n.g.has(e)}function yC(n,e,t){mC(n,e),0<t.length&&(n.i=null,n.g.set(ch(n,e),Hv(t)),n.h+=t.length)}function ch(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function vC(n){this.l=n||ZS,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ga&&Vt.g.Ga()&&Vt.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Et=Ep.prototype).add=function(n,e){hl(this),this.i=null,n=ch(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Et.forEach=function(n,e){hl(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Et.oa=function(){hl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Et.W=function(n){hl(this);let e=[];if("string"==typeof n)_C(this,n)&&(e=e.concat(this.g.get(ch(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Et.set=function(n,e){return hl(this),this.i=null,_C(this,n=ch(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Et.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var ZS=10;function wC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function EC(n){return n.h?1:n.g?n.g.size:0}function n_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function r_(n,e){n.g?n.g.add(e):n.h=e}function w0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function E0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Hv(n.i)}function i_(){}function IC(){this.g=new i_}function CC(n,e,t){const r=t||"";try{m0(n,function(i,a){let l=i;_u(i)&&(l=zm(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ip(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function dh(n){this.l=n.$b||null,this.j=n.ib||!1}function Cp(n,e){Lr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=wu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vC.prototype.cancel=function(){if(this.i=E0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},i_.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},i_.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},Kr(dh,d0),dh.prototype.g=function(){return new Cp(this.l,this.j)},dh.prototype.i=function(n){return function(){return n}}({}),Kr(Cp,Lr);var wu=0;function DC(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function bp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ta(n)}function Ta(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Et=Cp.prototype).open=function(n,e){if(this.readyState!=wu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ta(this)},Et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},Et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bp(this)),this.readyState=wu},Et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;DC(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},Et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?bp(this):Ta(this),3==this.readyState&&DC(this)}},Et.Ua=function(n){this.g&&(this.response=this.responseText=n,bp(this))},Et.Ta=function(n){this.g&&(this.response=n,bp(this))},Et.ga=function(){this.g&&bp(this)},Et.setRequestHeader=function(n,e){this.v.append(n,e)},Et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nP=Vt.JSON.parse;function fr(n){Lr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=YS,this.K=this.L=!1}Kr(fr,Lr);var YS="",TC=/^https?$/i,SC=["POST","PUT"];function Tt(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,AC(n),s_(n)}function AC(n){n.D||(n.D=!0,Vr(n,"complete"),Vr(n,"error"))}function xC(n){if(n.h&&typeof np<"u"&&(!n.C[1]||4!=Eu(n)||2!=n.aa()))if(n.v&&4==Eu(n))Zm(n.Ha,0,n);else if(Vr(n,"readystatechange"),4==Eu(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(_0)[1]||null;if(!i&&Vt.self&&Vt.self.location){var a=Vt.self.location.protocol;i=a.substr(0,a.length-1)}r=!TC.test(i?i.toLowerCase():"")}t=r}if(t)Vr(n,"complete"),Vr(n,"success");else{n.m=6;try{var l=2<Eu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",AC(n)}}finally{s_(n)}}}function s_(n,e){if(n.g){Sc(n);const t=n.g,r=n.C[0]?Lm:null;n.g=null,n.C=null,e||Vr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Sc(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function Eu(n){return n.g?n.g.readyState:0}function Dp(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case YS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Tp(n){let e="";return jm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Xn(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Tp(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):zn(n,e,t))}function o_(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function I0(n){this.Ca=0,this.i=[],this.j=new a0,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=o_("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=o_("baseRetryDelayMs",5e3,n),this.ab=o_("retryDelaySeedMs",1e4,n),this.Za=o_("forwardChannelMaxRetries",2,n),this.ta=o_("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new vC(n&&n.concurrentRequestLimit),this.Fa=new IC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function a_(n){if(C0(n),3==n.G){var e=n.U++,t=Da(n.F);zn(t,"SID",n.I),zn(t,"RID",e),zn(t,"TYPE","terminate"),Ap(n,t),(e=new zi(n,n.j,e,void 0)).K=2,e.v=wp(Da(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=hh(e.l,null),e.g.da(e.v)),e.F=Date.now(),vu(e)}S0(n)}function u_(n){n.g&&(D0(n),n.g.cancel(),n.g=null)}function C0(n){u_(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),l_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function Sp(n){wC(n.h)||n.m||(n.m=!0,e0(n.Ja,n),n.C=0)}function b0(n,e){var t;t=e?e.m:n.U++;const r=Da(n.F);zn(r,"SID",n.I),zn(r,"RID",t),zn(r,"AID",n.T),Ap(n,r),n.o&&n.s&&Xn(r,n.o,n.s),t=new zi(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=RC(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),r_(n.h,t),p0(t,r,e)}function Ap(n,e){n.ia&&jm(n.ia,function(t,r){zn(e,r,t)}),n.l&&m0({},function(t,r){zn(e,r,t)})}function RC(n,e,t){t=Math.min(n.i.length,t);var r=n.l?yi(n.l.Qa,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let v=i[m].h;const D=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),h=!1;else try{CC(D,l,"req"+v+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function NC(n){n.g||n.u||(n.Z=1,e0(n.Ia,n),n.A=0)}function Ac(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=fp(yi(n.Ia,n),T0(n,n.A)),n.A++,0))}function D0(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function PC(n){n.g=new zi(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Da(n.sa);zn(e,"RID","rpc"),zn(e,"SID",n.I),zn(e,"CI",n.L?"0":"1"),zn(e,"AID",n.T),zn(e,"TYPE","xmlhttp"),Ap(n,e),n.o&&n.s&&Xn(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=wp(Da(e)),t.s=null,t.P=!0,dC(t,n)}function l_(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function xp(n,e){var t=null;if(n.g==e){l_(n),D0(n),n.g=null;var r=2}else{if(!n_(n.h,e))return;t=e.D,w0(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Vr(r=Ym(),new Tc(r,t,e,i)),Sp(n)}else NC(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function MC(n,e){return!(EC(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=fp(yi(n.Ja,n,e),T0(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ac(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:fl(n,5);break;case 4:fl(n,10);break;case 3:fl(n,6);break;default:fl(n,2)}}function T0(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function fl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=yi(n.jb,n);t||(t=new ba("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||yp(t,"https"),wp(t)),function bC(n,e){const t=new a0;if(Vt.Image){const r=new Image;r.onload=Um(Ip,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Um(Ip,t,r,"TestLoadImage: error",!1,e),r.onabort=Um(Ip,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Um(Ip,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else wi(2);n.G=0,n.l&&n.l.va(e),S0(n),C0(n)}function S0(n){if(n.G=0,n.la=[],n.l){const e=E0(n.h);(0!=e.length||0!=n.i.length)&&(JI(n.la,e),JI(n.la,n.i),n.h.i.length=0,Hv(n.i),n.i.length=0),n.l.ua()}}function kC(n,e,t){var r=t instanceof ba?Da(t):new ba(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),vp(r,r.m);else{var i=Vt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new ba(null,void 0);r&&yp(a,r),e&&(a.g=e),i&&vp(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&zn(r,t,e),zn(r,"VER",n.ma),Ap(n,r),r}function hh(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fr(t&&n.Da&&!n.ra?new dh({ib:!0}):n.ra)).L=n.H,e}function fh(){}function c_(){if(Jd&&!(10<=Number(th)))throw Error("Environmental error: no available transport.")}function ms(n,e){Lr.call(this),this.g=new I0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!Bm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new xc(this)}function OC(n){pp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function A0(){Us.call(this),this.status=1}function xc(n){this.g=n}(Et=fr.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():f0.g(),this.C=function h0(n){return n.h||(n.h=n.i())}(this.u?this.u:f0),this.g.onreadystatechange=yi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Tt(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Vt.FormData&&n instanceof Vt.FormData,!(0<=QI(SC,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Sc(this),0<this.B&&((this.K=function rP(n){return Jd&&function eh(){return function kS(n){var e=Xd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=rp(String(Ri)).split("."),t=rp("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=yu(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||yu(0==i[2].length,0==a[2].length)||yu(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yi(this.qa,this)):this.A=Zm(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Tt(this,a)}},Et.qa=function(){typeof np<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))},Et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Vr(this,"complete"),Vr(this,"abort"),s_(this))},Et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),s_(this,!0)),fr.X.M.call(this)},Et.Ha=function(){this.s||(this.F||this.v||this.l?xC(this):this.eb())},Et.eb=function(){xC(this)},Et.aa=function(){try{return 2<Eu(this)?this.g.status:-1}catch{return-1}},Et.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Et.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nP(e)}},Et.Ea=function(){return this.m},Et.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(Et=I0.prototype).ma=8,Et.G=1,Et.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new zi(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=zv(a),Kv(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=RC(this,i,e),zn(t=Da(this.F),"RID",n),zn(t,"CVER",22),this.D&&zn(t,"X-HTTP-Session-Id",this.D),Ap(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(Tp(a)))+"&"+e:this.o&&Xn(t,this.o,a)),r_(this.h,i),this.Xa&&zn(t,"TYPE","init"),this.O?(zn(t,"$req",e),zn(t,"SID","null"),i.Z=!0,p0(i,t,null)):p0(i,t,e),this.G=2}}else 3==this.G&&(n?b0(this,n):0==this.i.length||wC(this.h)||b0(this))},Et.Ia=function(){if(this.u=null,PC(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=fp(yi(this.cb,this),n)}},Et.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,wi(10),u_(this),PC(this))},Et.bb=function(){null!=this.v&&(this.v=null,u_(this),Ac(this),wi(19))},Et.jb=function(n){n?(this.j.info("Successfully pinged google.com"),wi(2)):(this.j.info("Failed to ping google.com"),wi(1))},(Et=fh.prototype).xa=function(){},Et.wa=function(){},Et.va=function(){},Et.ua=function(){},Et.Qa=function(){},c_.prototype.g=function(n,e){return new ms(n,e)},Kr(ms,Lr),ms.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;wi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=kC(n,null,n.V),Sp(n)},ms.prototype.close=function(){a_(this.g)},ms.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=zm(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&Sp(e)},ms.prototype.M=function(){this.g.l=null,delete this.j,a_(this.g),delete this.g,ms.X.M.call(this)},Kr(OC,pp),Kr(A0,Us),Kr(xc,fh),xc.prototype.xa=function(){Vr(this.g,"a")},xc.prototype.wa=function(n){Vr(this.g,new OC(n))},xc.prototype.va=function(n){Vr(this.g,new A0(n))},xc.prototype.ua=function(){Vr(this.g,"b")},c_.prototype.createWebChannel=c_.prototype.g,ms.prototype.send=ms.prototype.u,ms.prototype.open=ms.prototype.m,ms.prototype.close=ms.prototype.close,Qm.NO_ERROR=0,Qm.TIMEOUT=8,Qm.HTTP_ERROR=6,c0.COMPLETE="complete",BS.EventType=ah,ah.OPEN="a",ah.CLOSE="b",ah.ERROR="c",ah.MESSAGE="d",Lr.prototype.listen=Lr.prototype.N,fr.prototype.listenOnce=fr.prototype.O,fr.prototype.getLastError=fr.prototype.Na,fr.prototype.getLastErrorCode=fr.prototype.Ea,fr.prototype.getStatus=fr.prototype.aa,fr.prototype.getResponseJson=fr.prototype.Ra,fr.prototype.getResponseText=fr.prototype.fa,fr.prototype.send=fr.prototype.da;var FC=gs.createWebChannelTransport=function(){return new c_},QS=gs.getStatEventTarget=function(){return Ym()},d_=gs.ErrorCode=Qm,JS=gs.EventType=c0,XS=gs.Event=cl,eA=gs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},iP=gs.FetchXmlHttpFactory=dh,x0=gs.WebChannel=BS,sP=gs.XhrIo=fr;const M0="@firebase/firestore";class Cr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");let ph="9.10.0";const pl=new _a.Yd("@firebase/firestore");function h_(){return pl.logLevel}function He(n,...e){if(pl.logLevel<=_a.in.DEBUG){const t=e.map(R0);pl.debug(`Firestore (${ph}): ${n}`,...t)}}function br(n,...e){if(pl.logLevel<=_a.in.ERROR){const t=e.map(R0);pl.error(`Firestore (${ph}): ${n}`,...t)}}function Mc(n,...e){if(pl.logLevel<=_a.in.WARN){const t=e.map(R0);pl.warn(`Firestore (${ph}): ${n}`,...t)}}function R0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${ph}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function Pt(n,e){n||ft()}function tt(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class LC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cr.UNAUTHENTICATED))}shutdown(){}}class nA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class UC{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Br,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,be.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Br)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new LC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new Cr(e)}}class rA{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Pt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class N0{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new rA(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jC{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,He("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.A=t.token,new BC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function sA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class HC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function gl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $C(n){return n+"\0"}class qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ve(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new qn(0,0))}static max(){return new Mt(new qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rp{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends Rp{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const oA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pr extends Rp{construct(e,t,r){return new pr(e,t,r)}static isValidIdentifier(e){return oA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ve(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ve(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ve(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ve(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pr(t)}static emptyPath(){return new pr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(cn.fromString(e))}static fromName(e){return new Qe(cn.fromString(e).popFirst(5))}static empty(){return new Qe(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new cn(e.slice()))}}class f_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function P0(n){return n.fields.find(e=>2===e.kind)}function ml(n){return n.fields.filter(e=>2!==e.kind)}f_.UNKNOWN_ID=-1;class p_{constructor(e,t){this.fieldPath=e,this.kind=t}}class gh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gh(0,_s.min())}}function WC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new qn(t+1,0):new qn(t,r));return new _s(i,Qe.empty(),e)}function zC(n){return new _s(n.readTime,n.key,-1)}class _s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _s(Mt.min(),Qe.empty(),-1)}static max(){return new _s(Mt.max(),Qe.empty(),-1)}}function Np(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}const g_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Sa(n){return O0.apply(this,arguments)}function O0(){return O0=(0,be.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==g_)throw n;He("LocalStore","Unexpectedly lost primary lease")}),O0.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(D=>{l[v]=D,++h,h===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new he((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class mh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Br,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Aa(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Pp(r.target.error);this.P.reject(new Aa(e,i))}}static open(e,t,r,i){try{return new mh(t,e.transaction(i,r))}catch(a){throw new Aa(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uA(t)}}class Co{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Co.D((0,k.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),_h(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,k.hl)())return!1;if(Co.N())return!0;const e=(0,k.z$)(),t=Co.D(e),r=0<t&&t<10,i=Co.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,be.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Aa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ve(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ve(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Aa(e,h))},a.onupgradeneeded=l=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,be.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const m=mh.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(D=>(m.V(),D)).catch(D=>(m.abort(D),he.reject(D))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,D="FirebaseError"!==v.name&&h<3;if(He("SimpleDb","Transaction failed with error:",v.message,"Retrying:",D),a.close(),!D)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qC{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return _h(this.U.delete())}}class Aa extends Ve{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Iu(n){return"IndexedDbTransactionError"===n.name}class uA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_h(r)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),_h(this.store.add(e))}get(e){return _h(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),_h(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),_h(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new he((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=a=>{const l=Pp(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new he((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new qC(h),v=t(h.primaryKey,h.value,m);if(v instanceof he){const D=v.catch(S=>(m.done(),he.reject(S)));r.push(D)}m.isDone?i():null===m.G?h.continue():h.continue(m.G)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _h(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Pp(r.target.error);t(i)}})}let F0=!1;function Pp(n){const e=Co.D((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return F0||(F0=!0,setTimeout(()=>{throw r},0)),r}}return n}class lA{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;He("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{He("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Iu(r)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Sa(r)}yield t.nt(6e4)}))}}class L0{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return he.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return He("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>(He("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=zC(a);Np(l,r)>0&&(r=l)}),new _s(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class qi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function V0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function U0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}qi.at=-1;class ur{constructor(e,t){this.comparator=e,this.root=t||Zr.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kp(this.root,e,this.comparator,!1)}getReverseIterator(){return new kp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kp(this.root,e,this.comparator,!0)}}class kp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Zr.RED,this.left=i??Zr.EMPTY,this.right=a??Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Zr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Zr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1,Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sn{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new KC(this.data.getIterator())}getIteratorFrom(e){return new KC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class KC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yh(n){return n.hasNext()?n.getNext():void 0}class ys{constructor(e){this.fields=e,e.sort(pr.comparator)}static empty(){return new ys([])}unionWith(e){let t=new Sn(pr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Yr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const YC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=YC.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(n.seconds),nanos:gr(n.nanos)}}function gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vh(n){return"string"==typeof n?Yr.fromBase64String(n):Yr.fromUint8Array(n)}function QC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function JC(n){const e=n.mapValue.fields.__previous_value__;return QC(e)?JC(e):e}function Op(n){const e=_l(n.mapValue.fields.__local_write_time__.timestampValue);return new qn(e.seconds,e.nanos)}class cA{constructor(e,t,r,i,a,l,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class yl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}function Fp(n){return null==n}function Lp(n){return 0===n&&1/n==-1/0}function XC(n){return"number"==typeof n&&Number.isInteger(n)&&!Lp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},m_={nullValue:"NULL_VALUE"};function Rc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?QC(n)?4:tb(n)?9007199254740991:10:ft()}function xa(n,e){if(n===e)return!0;const t=Rc(n);if(t!==Rc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Op(n).isEqual(Op(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=_l(r.timestampValue),l=_l(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,vh(n.bytesValue).isEqual(vh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return gr(r.geoPointValue.latitude)===gr(i.geoPointValue.latitude)&&gr(r.geoPointValue.longitude)===gr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return gr(r.integerValue)===gr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=gr(r.doubleValue),l=gr(i.doubleValue);return a===l?Lp(a)===Lp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return gl(n.arrayValue.values||[],e.arrayValue.values||[],xa);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(V0(a)!==V0(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!xa(a[h],l[h])))return!1;return!0}(n,e);default:return ft()}var i}function Vp(n,e){return void 0!==(n.values||[]).find(t=>xa(t,e))}function js(n,e){if(n===e)return 0;const t=Rc(n),r=Rc(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=gr(i.integerValue||i.doubleValue),h=gr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return B0(n.timestampValue,e.timestampValue);case 4:return B0(Op(n),Op(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=vh(i),h=vh(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let m=0;m<l.length&&m<h.length;m++){const v=jt(l[m],h[m]);if(0!==v)return v}return jt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=jt(gr(i.latitude),gr(a.latitude));return 0!==l?l:jt(gr(i.longitude),gr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let m=0;m<l.length&&m<h.length;++m){const v=js(l[m],h[m]);if(v)return v}return jt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===vl.mapValue&&a===vl.mapValue)return 0;if(i===vl.mapValue)return 1;if(a===vl.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=a.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let D=0;D<h.length&&D<v.length;++D){const S=jt(h[D],v[D]);if(0!==S)return S;const R=js(l[h[D]],m[v[D]]);if(0!==R)return R}return jt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ft()}}function B0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=_l(n),r=_l(e),i=jt(t.seconds,r.seconds);return 0!==i?i:jt(t.nanos,r.nanos)}function Nc(n){return __(n)}function __(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=_l(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vh(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=__(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${__(r.fields[h])}`;return a+"}"}(n.mapValue):ft();var e}function wl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function y_(n){return!!n&&"integerValue"in n}function wh(n){return!!n&&"arrayValue"in n}function eb(n){return!!n&&"nullValue"in n}function dA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Up(n){return!!n&&"mapValue"in n}function Bp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function hA(n){return"nullValue"in n?m_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wl(yl.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function fA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wl(yl.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vl:ft()}function Eh(n,e){const t=js(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nb(n,e){const t=js(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Up(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bp(t)}setAll(e){let t=pr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Bp(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Up(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Up(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cu(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new jr(Bp(this.value))}}function bo(n){const e=[];return Cu(n.fields,(t,r)=>{const i=new pr([t]);if(Up(r)){const a=bo(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new ys(e)}class Fn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Fn(e,0,Mt.min(),Mt.min(),jr.empty(),0)}static newFoundDocument(e,t,r){return new Fn(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new Fn(e,2,t,Mt.min(),jr.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Mt.min(),jr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class j0{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ht=null}}function Ih(n,e=null,t=[],r=[],i=null,a=null,l=null){return new j0(n,e,t,r,i,a,l)}function Pc(n){const e=tt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Nc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nc(r)).join(",")),e.ht=t}return e.ht}function jp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!W0(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!xa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lb(n.startAt,e.startAt)&&lb(n.endAt,e.endAt)}function kc(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Oc(n,e){return n.filters.filter(t=>t instanceof Qr&&t.field.isEqual(e))}function rb(n,e,t){let r=m_,i=!0;for(const a of Oc(n,e)){let l=m_,h=!0;switch(a.op){case"<":case"<=":l=hA(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=m_}Eh({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Eh({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function ib(n,e,t){let r=vl,i=!0;for(const a of Oc(n,e)){let l=vl,h=!0;switch(a.op){case">=":case">":l=fA(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=vl}nb({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];nb({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new sb(e,t,r):"array-contains"===t?new gA(e,r):"in"===t?new oP(e,r):"not-in"===t?new $0(e,r):"array-contains-any"===t?new G0(e,r):new Qr(e,t,r)}static lt(e,t,r){return"in"===t?new H0(e,r):new ob(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(js(t,this.value)):null!==t&&Rc(this.value)===Rc(t)&&this.ft(js(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sb extends Qr{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.ft(t)}}class H0 extends Qr{constructor(e,t){super(e,"in",t),this.keys=ab(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ob extends Qr{constructor(e,t){super(e,"not-in",t),this.keys=ab(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ab(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class gA extends Qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wh(t)&&Vp(t.arrayValue,this.value)}}class oP extends Qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vp(this.value.arrayValue,t)}}class $0 extends Qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vp(this.value.arrayValue,t)}}class G0 extends Qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vp(this.value.arrayValue,r))}}class bu{constructor(e,t){this.position=e,this.inclusive=t}}class El{constructor(e,t="asc"){this.field=e,this.dir=t}}function W0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ub(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):js(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function lb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xa(n.position[t],e.position[t]))return!1;return!0}class Du{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=m,this._t=null,this.wt=null}}function cb(n,e,t,r,i,a,l,h){return new Du(n,e,t,r,i,a,l,h)}function Fc(n){return new Du(n)}function v_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function w_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function z0(n){for(const e of n.filters)if(e.dt())return e.field;return null}function E_(n){return null!==n.collectionGroup}function Lc(n){const e=tt(n);if(null===e._t){e._t=[];const t=z0(e),r=w_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new El(t)),e._t.push(new El(pr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new El(pr.keyField(),a))}}}return e._t}function Ki(n){const e=tt(n);if(!e.wt)if("F"===e.limitType)e.wt=Ih(e.path,e.collectionGroup,Lc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Lc(e))t.push(new El(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new bu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new bu(e.startAt.position,e.startAt.inclusive):null;e.wt=Ih(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Hp(n,e,t){return new Du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ch(n,e){return jp(Ki(n),Ki(e))&&n.limitType===e.limitType}function db(n){return`${Pc(Ki(n))}|lt:${n.limitType}`}function I_(n){return`Query(target=${function pA(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Nc(r.value)}`;var r}).join(", ")}]`),Fp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Nc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Nc(t)).join(",")),`Target(${e})`}(Ki(n))}; limitType=${n.limitType})`}function q0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=ub(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Lc(t),r)||t.endAt&&!function(i,a,l){const h=ub(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Lc(t),r)));var t,r}function Ei(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vc(n){return(e,t)=>{let r=!1;for(const i of Lc(n)){const a=mA(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function mA(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),m=l.data.field(i);return null!==h&&null!==m?js(h,m):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function hb(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lp(e)?"-0":e}}function _A(n){return{integerValue:""+n}}function yA(n,e){return XC(e)?_A(e):hb(n,e)}class $p{constructor(){this._=void 0}}function fb(n,e,t){return n instanceof Il?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Uc?K0(n,e):n instanceof Bc?gb(n,e):function(r,i){const a=pb(r,i),l=C_(a)+C_(r.yt);return y_(a)&&y_(r.yt)?_A(l):hb(r.It,l)}(n,e)}function Gp(n,e,t){return n instanceof Uc?K0(n,e):n instanceof Bc?gb(n,e):t}function pb(n,e){return n instanceof bh?y_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Il extends $p{}class Uc extends $p{constructor(e){super(),this.elements=e}}function K0(n,e){const t=Z0(e);for(const r of n.elements)t.some(i=>xa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bc extends $p{constructor(e){super(),this.elements=e}}function gb(n,e){let t=Z0(e);for(const r of n.elements)t=t.filter(i=>!xa(i,r));return{arrayValue:{values:t}}}class bh extends $p{constructor(e,t){super(),this.It=e,this.yt=t}}function C_(n){return gr(n.integerValue||n.doubleValue)}function Z0(n){return wh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Dh{constructor(e,t){this.field=e,this.transform=t}}class Y0{constructor(e,t){this.version=e,this.transformResults=t}}class lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class D_{}function Q0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Sh(n.key,lr.none()):new qp(n.key,n.data,lr.none());{const t=n.data,r=jr.empty();let i=new Sn(pr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Tu(n.key,r,new ys(i.toArray()),lr.none())}}function Th(n,e,t){n instanceof qp?function(r,i,a){const l=r.value.clone(),h=_b(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Tu?function(r,i,a){if(!Wp(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=_b(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(vA(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zp(n,e,t,r){return n instanceof qp?function(i,a,l,h){if(!Wp(i.precondition,a))return l;const m=i.value.clone(),v=yb(i.fieldTransforms,h,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tu?function(i,a,l,h){if(!Wp(i.precondition,a))return l;const m=yb(i.fieldTransforms,h,a),v=a.data;return v.setAll(vA(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,Wp(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function mb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=pb(r.transform,i||null);null!=a&&(null===t&&(t=jr.empty()),t.set(r.field,a))}return t||null}function T_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gl(t,r,(i,a)=>function b_(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Uc&&r instanceof Uc||t instanceof Bc&&r instanceof Bc?gl(t.elements,r.elements,xa):t instanceof bh&&r instanceof bh?xa(t.yt,r.yt):t instanceof Il&&r instanceof Il);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class qp extends D_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tu extends D_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function vA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _b(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,Gp(l,h,t[i]))}return r}function yb(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,fb(a,l,e))}return r}class Sh extends D_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S_ extends D_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vb{constructor(e){this.count=e}}var Nr,un;function J0(n){switch(n){default:return ft();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function wb(n){if(void 0===n)return br("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Nr.OK:return ge.OK;case Nr.CANCELLED:return ge.CANCELLED;case Nr.UNKNOWN:return ge.UNKNOWN;case Nr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Nr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Nr.INTERNAL:return ge.INTERNAL;case Nr.UNAVAILABLE:return ge.UNAVAILABLE;case Nr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Nr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Nr.NOT_FOUND:return ge.NOT_FOUND;case Nr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Nr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Nr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Nr.ABORTED:return ge.ABORTED;case Nr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Nr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Nr.DATA_LOSS:return ge.DATA_LOSS;default:return ft()}}(un=Nr||(Nr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class Cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cu(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return U0(this.inner)}size(){return this.innerSize}}const Eb=new ur(Qe.comparator);function Zi(){return Eb}const X0=new ur(Qe.comparator);function Ah(...n){let e=X0;for(const t of n)e=e.insert(t.key,t);return e}function ew(n){let e=X0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Do(){return Kp()}function Ib(){return Kp()}function Kp(){return new Cl(n=>n.toString(),(n,e)=>n.isEqual(e))}const aP=new ur(Qe.comparator),Cb=new Sn(Qe.comparator);function Kt(...n){let e=Cb;for(const t of n)e=e.add(t);return e}const uP=new Sn(jt);function tw(){return uP}class A_{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,x_.createSynthesizedTargetChangeForCurrentChange(e,t)),new A_(Mt.min(),r,tw(),Zi(),Kt())}}class x_{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new x_(Yr.EMPTY_BYTE_STRING,t,Kt(),Kt(),Kt())}}class nw{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class wA{constructor(e,t){this.targetId=e,this.At=t}}class EA{constructor(e,t,r=Yr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Zp{constructor(){this.Rt=0,this.bt=Yp(),this.Pt=Yr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Kt(),t=Kt(),r=Kt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new x_(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Yp()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class lP{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Zi(),this.qt=rw(),this.Kt=new Sn(jt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(kc(a))if(0===r){const l=new Qe(a.path);this.jt(t,l,Fn.newNoDocument(l,Mt.min()))}else Pt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const h=this.Xt(l);if(h){if(a.current&&kc(h.target)){const m=new Qe(h.target.path);null!==this.Ut.get(m)||this.ee(l,m)||this.jt(l,m,Fn.newNoDocument(m,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=Kt();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(m=>{const v=this.Xt(m);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new A_(e,t,this.Kt,this.Ut,r);return this.Ut=Zi(),this.qt=rw(),this.Kt=new Sn(jt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new Zp,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Sn(jt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Zp),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function rw(){return new ur(Qe.comparator)}function Yp(){return new ur(Qe.comparator)}const bb={asc:"ASCENDING",desc:"DESCENDING"},Db={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class cP{constructor(e,t){this.databaseId=e,this.gt=t}}function jc(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iw(n,e){return n.gt?e.toBase64():e.toUint8Array()}function IA(n,e){return jc(n,e.toTimestamp())}function Hr(n){return Pt(!!n),Mt.fromTimestamp(function(e){const t=_l(e);return new qn(t.seconds,t.nanos)}(n))}function Tb(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function CA(n){const e=cn.fromString(n);return Pt(uw(e)),e}function Qp(n,e){return Tb(n.databaseId,e.path)}function Ma(n,e){const t=CA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(bA(t))}function xh(n,e){return Tb(n.databaseId,e)}function Sb(n){const e=CA(n);return 4===e.length?cn.emptyPath():bA(e)}function M_(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bA(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function DA(n,e,t){return{name:Qp(n,e),fields:t.value.mapValue.fields}}function Ab(n,e,t){const r=Ma(n,e.name),i=Hr(e.updateTime),a=new jr({mapValue:{fields:e.fields}}),l=Fn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function R_(n,e){let t;if(e instanceof qp)t={update:DA(n,e.key,e.value)};else if(e instanceof Sh)t={delete:Qp(n,e.key)};else if(e instanceof Tu)t={update:DA(n,e.key,e.data),updateMask:aw(e.fieldMask)};else{if(!(e instanceof S_))return ft();t={verify:Qp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Il)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Uc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof bh)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:IA(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function sw(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?lr.updateTime(Hr(i.updateTime)):void 0!==i.exists?lr.exists(i.exists):lr.none():lr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Pt("REQUEST_TIME"===l.setToServerValue),h=new Il):"appendMissingElements"in l?h=new Uc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Bc(l.removeAllFromArray.values||[]):"increment"in l?h=new bh(a,l.increment):ft();const m=pr.fromServerFormat(l.fieldPath);return new Dh(m,h)}(n,i)):[];var i;if(e.update){const i=Ma(n,e.update.name),a=new jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ys((e.updateMask.fieldPaths||[]).map(v=>pr.fromServerFormat(v)));return new Tu(i,a,l,t,r)}return new qp(i,a,t,r)}if(e.delete){const i=Ma(n,e.delete);return new Sh(i,t)}if(e.verify){const i=Ma(n,e.verify);return new S_(i,t)}return ft()}function ow(n,e){return{documents:[xh(n,e.path)]}}function AA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=xh(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xh(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(D=>function(S){if("=="===S.op){if(dA(S.value))return{unaryFilter:{field:Mh(S.field),op:"IS_NAN"}};if(eb(S.value))return{unaryFilter:{field:Mh(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(dA(S.value))return{unaryFilter:{field:Mh(S.field),op:"IS_NOT_NAN"}};if(eb(S.value))return{unaryFilter:{field:Mh(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mh(S.field),op:$s(S.op),value:S.value}}}(D));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Mh((D=v).field),direction:MA(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.gt||Fp(v)?v:{value:v});var v,h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Hs(n){let e=Sb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=N_(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new El(bl((S=D).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Fp(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new bu((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new bu(D.values||[],!D.before)}(t.endAt)),cb(e,i,l,a,h,"F",m,v)}function N_(n){return n?void 0!==n.unaryFilter?[NA(n)]:void 0!==n.fieldFilter?[RA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>N_(e)).reduce((e,t)=>e.concat(t)):ft():[]}function MA(n){return bb[n]}function $s(n){return Db[n]}function Mh(n){return{fieldPath:n.canonicalString()}}function bl(n){return pr.fromServerFormat(n.fieldPath)}function RA(n){return Qr.create(bl(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function NA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=bl(n.unaryFilter.field);return Qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=bl(n.unaryFilter.field);return Qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bl(n.unaryFilter.field);return Qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=bl(n.unaryFilter.field);return Qr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function aw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lw(e)),e=PA(n.get(t),e);return lw(e)}function PA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function lw(n){return n+"\x01\x01"}function To(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ft(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ft()}a=l+2}return new cn(r)}const Mb=["userId","batchId"];function Jp(n,e){return[n,Ii(e)]}function Rb(n,e,t){return[n,Ii(e),t]}const cw={},Dl=["prefixPath","collectionGroup","readTime","documentId"],Nb=["prefixPath","collectionGroup","documentId"],dw=["collectionGroup","readTime","prefixPath","documentId"],Su=["canonicalId","targetId"],kA=["targetId","path"],dP=["path","targetId"],OA=["collectionId","parent"],FA=["indexId","uid"],LA=["uid","sequenceNumber"],VA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Pb=["indexId","uid","orderedDocumentKey"],hP=["userId","collectionPath","documentId"],kb=["userId","collectionPath","largestBatchId"],UA=["userId","collectionGroup","largestBatchId"],hw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fP=[...hw,"documentOverlays"],P_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fw=P_,Ob=[...fw,"indexConfiguration","indexState","indexEntries"];class k_ extends k0{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function $r(n,e){const t=tt(n);return Co.O(t.ie,e)}class O_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Th(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ib();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const m=Q0(l,h);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,(t,r)=>T_(t,r))&&gl(this.baseMutations,e.baseMutations,(t,r)=>T_(t,r))}}class Rh{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=aP;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Rh(e,t,r,i)}}class Nh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Au{constructor(e,t,r,i,a=Mt.min(),l=Mt.min(),h=Yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Fb{constructor(e){this.re=e}}function pw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:F_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Qp(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:jc(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hc(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:Hc(e.version)}}var i,a;return r}function F_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ph(n){const e=new qn(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function kh(n,e){const t=(e.baseMutations||[]).map(a=>sw(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>sw(n.re,a)),i=qn.fromMillis(e.localWriteTimeMs);return new O_(e.batchId,i,t,r)}function Oh(n){const e=Ph(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ph(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=Ki(Fc(Sb(i.documents[0])))):r=Ki(Hs(n.query)),new Au(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Yr.fromBase64String(n.resumeToken))}function Vb(n,e){const t=Hc(e.snapshotVersion),r=Hc(e.lastLimboFreeSnapshotVersion);let i;i=kc(e.target)?ow(n.re,e.target):AA(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function gw(n){const e=Hs({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Hp(e,e.limit,"L"):e}function mw(n,e){return new Nh(e.largestBatchId,sw(n.re,e.overlayMutation))}function BA(n,e){const t=e.path.lastSegment();return[n,Ii(e.path.popLast()),t]}function jA(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Hc(r.readTime),documentKey:Ii(r.documentKey.path),largestBatchId:r.largestBatchId}}class pP{getBundleMetadata(e,t){return HA(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ph(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return HA(e).put({bundleId:(r=t).id,createTime:Hc(Hr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return $A(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:gw(i.bundledQuery),readTime:Ph(i.readTime)};var i})}saveNamedQuery(e,t){return $A(e).put({name:(r=t).name,readTime:Hc(Hr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function HA(n){return $r(n,"bundles")}function $A(n){return $r(n,"namedQueries")}class L_{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new L_(e,t.uid||"")}getOverlay(e,t){return Tl(e).get(BA(this.userId,t)).next(r=>r?mw(this.It,r):null)}getOverlays(e,t){const r=Do();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new Nh(t,l);i.push(this.ue(e,h))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ii(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Tl(e).Y("collectionPathOverlayIndex",h))}),he.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Do(),a=Ii(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Tl(e).W("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const v=mw(this.It,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Do();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tl(e).Z({index:"collectionGroupOverlayIndex",range:h},(m,v,D)=>{const S=mw(this.It,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}ue(e,t){return Tl(e).put(function(r,i,a){const[l,h,m]=BA(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:R_(r.re,a.mutation)}}(this.It,this.userId,t))}}function Tl(n){return $r(n,"documentOverlays")}class $c{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(gr(e.integerValue));else if("doubleValue"in e){const r=gr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Lp(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(vh(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?tb(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ft()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Qe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function GA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function _w(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=GA(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}$c.Te=new $c;class Gc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=_w(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=_w(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Ub{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class yw{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Wc{constructor(){this.Be=new Gc,this.Le=new Ub(this.Be),this.Ue=new yw(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class zc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zc(this.indexId,this.documentKey,this.arrayValue,r)}}function xu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=V_(n.arrayValue,e.arrayValue),0!==t?t:(t=V_(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function V_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class U_{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=P0(e);if(void 0!==t&&!this.ze(t))return!1;const r=ml(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class gP{constructor(){this.Ye=new Bb}addToCollectionParentIndex(e,t){return this.Ye.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(_s.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Bb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Sn(cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Sn(cn.comparator)).toArray()}}const vw=new Uint8Array(0);class mP{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Bb,this.Ze=new Cl(r=>Pc(r),(r,i)=>jp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Ii(i)};return ww(e).put(a)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$C(t),""],!1,!0);return ww(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(To(l.parent))}return r})}addFieldIndex(e,t){const r=B_(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=eg(e);return a.next(h=>{l.put(jA(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=B_(e),i=eg(e),a=Xp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Xp(e);let i=!0;const a=new Map;return he.forEach(this.tn(t),l=>this.en(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Kt();const h=[];return he.forEach(a,(m,v)=>{var D;He("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${Pc(t)}`);const S=function(lt,ct){const Rt=P0(ct);if(void 0===Rt)return null;for(const $t of Oc(lt,Rt.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(v,m),R=function(lt,ct){const Rt=new Map;for(const $t of ml(ct))for(const Tr of Oc(lt,$t.fieldPath))switch(Tr.op){case"==":case"in":Rt.set($t.fieldPath.canonicalString(),Tr.value);break;case"not-in":case"!=":return Rt.set($t.fieldPath.canonicalString(),Tr.value),Array.from(Rt.values())}return null}(v,m),V=function(lt,ct){const Rt=[];let $t=!0;for(const Tr of ml(ct)){const Fu=0===Tr.kind?rb(lt,Tr.fieldPath,lt.startAt):ib(lt,Tr.fieldPath,lt.startAt);Rt.push(Fu.value),$t&&($t=Fu.inclusive)}return new bu(Rt,$t)}(v,m),j=function(lt,ct){const Rt=[];let $t=!0;for(const Tr of ml(ct)){const Fu=0===Tr.kind?ib(lt,Tr.fieldPath,lt.endAt):rb(lt,Tr.fieldPath,lt.endAt);Rt.push(Fu.value),$t&&($t=Fu.inclusive)}return new bu(Rt,$t)}(v,m),ce=this.nn(m,v,V),Ee=this.nn(m,v,j),Ze=this.sn(m,v,R),ot=this.rn(m.indexId,S,ce,V.inclusive,Ee,j.inclusive,Ze);return he.forEach(ot,lt=>r.J(lt,t.limit).next(ct=>{ct.forEach(Rt=>{const $t=Qe.fromSegments(Rt.documentKey);l.has($t)||(l=l.add($t),h.push($t))})}))}).next(()=>h)}return he.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),D=[];for(let S=0;S<m;++S){const R=t?this.on(t[S/v]):vw,V=this.un(e,R,r[S%v],i),j=this.cn(e,R,a[S%v],l),ce=h.map(Ee=>this.un(e,R,Ee,!0));D.push(...this.createRange(V,j,ce))}return D}un(e,t,r,i){const a=new zc(e,Qe.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new zc(e,Qe.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new U_(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.We(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return he.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new Sn(pr.comparator),m=!1;for(const v of l.filters){const D=v;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?m=!0:h=h.add(D.field))}for(const v of l.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Wc;for(const i of ml(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);$c.Te.ce(a,l)}return r.$e()}on(e){const t=new Wc;return $c.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Wc;return $c.Te.ce(wl(this.databaseId,t),r.qe(function(i){const a=ml(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Wc);let a=0;for(const l of ml(e)){const h=r[a++];for(const m of i)if(this.ln(t,l.fieldPath)&&wh(h))i=this.fn(i,l,h);else{const v=m.qe(l.kind);$c.Te.ce(h,v)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const m=new Wc;m.seed(h.$e()),$c.Te.ce(l,m.qe(t.kind)),a.push(m)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=B_(e),i=eg(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return he.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(v,D){const S=D?new gh(D.sequenceNumber,new _s(Ph(D.readTime),new Qe(To(D.documentKey)),D.largestBatchId)):gh.empty(),R=v.fields.map(([V,j])=>new p_(pr.fromServerFormat(V),j));return new f_(v.indexId,v.collectionGroup,R,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=B_(e),a=eg(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>he.forEach(h,m=>a.put(jA(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?he.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),he.forEach(h,m=>this.wn(e,i,m).next(v=>{const D=this.mn(a,m);return v.isEqual(D)?he.resolve():this.gn(e,a,m,v,D)}))))})}yn(e,t,r,i){return Xp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Xp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Xp(e);let a=new Sn(xu);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,h)=>{a=a.add(new zc(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}mn(e,t){let r=new Sn(xu);const i=this.an(t,e);if(null==i)return r;const a=P0(t);if(null!=a){const l=e.data.field(a.fieldPath);if(wh(l))for(const h of l.arrayValue.values||[])r=r.add(new zc(t.indexId,e.key,this.on(h),i))}else r=r.add(new zc(t.indexId,e.key,vw,i));return r}gn(e,t,r,i,a){He("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,v,D,S){const R=h.getIterator(),V=m.getIterator();let j=yh(R),ce=yh(V);for(;j||ce;){let Ee=!1,Ze=!1;if(j&&ce){const ot=v(j,ce);ot<0?Ze=!0:ot>0&&(Ee=!0)}else null!=j?Ze=!0:Ee=!0;Ee?(D(ce),ce=yh(V)):Ze?(S(j),j=yh(R)):(j=yh(R),ce=yh(V))}}(i,a,xu,h=>{l.push(this.yn(e,t,r,h))},h=>{l.push(this.pn(e,t,r,h))}),he.waitFor(l)}_n(e){let t=1;return eg(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>xu(l,h)).filter((l,h,m)=>!h||0!==xu(l,m[h-1]));const i=[];i.push(e);for(const l of r){const h=xu(l,e),m=xu(l,t);if(0===h)i[0]=e.Ke();else if(h>0&&m<0)i.push(l),i.push(l.Ke());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,vw,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,vw,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jb)}getMinOffset(e,t){return he.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ft())).next(jb)}}function ww(n){return $r(n,"collectionParents")}function Xp(n){return $r(n,"indexEntries")}function B_(n){return $r(n,"indexConfiguration")}function eg(n){return $r(n,"indexState")}function jb(n){Pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Np(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new _s(e.readTime,e.documentKey,t)}const Ew={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ni{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ni(e,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Iw(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.Z({range:l},(D,S,R)=>(h++,R.delete()));a.push(m.next(()=>{Pt(1===h)}));const v=[];for(const D of t.mutations){const S=Rb(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return he.waitFor(a).next(()=>v)}function j_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}Ni.DEFAULT_COLLECTION_PERCENTILE=10,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ni.DEFAULT=new Ni(41943040,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ni.DISABLED=new Ni(-1,0,0);class H_{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Pt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new H_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ra(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=tg(e),l=Ra(e);return l.add({}).next(h=>{Pt("number"==typeof h);const m=new O_(h,t,r,i),v=function(R,V,j){const ce=j.baseMutations.map(Ze=>R_(R.re,Ze)),Ee=j.mutations.map(Ze=>R_(R.re,Ze));return{userId:V,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:ce,mutations:Ee}}(this.It,this.userId,m),D=[];let S=new Sn((R,V)=>jt(R.canonicalString(),V.canonicalString()));for(const R of i){const V=Rb(this.userId,R.key.path,h);S=S.add(R.key.path.popLast()),D.push(l.put(v)),D.push(a.put(V,cw))}return S.forEach(R=>{D.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.In[h]=m.keys()}),he.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return Ra(e).get(t).next(r=>r?(Pt(r.userId===this.userId),kh(this.It,r)):null)}Tn(e,t){return this.In[t]?he.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ra(e).Z({index:"userMutationsIndex",range:i},(l,h,m)=>{h.userId===this.userId&&(Pt(h.batchId>=r),a=kh(this.It,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ra(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ra(e).W("userMutationsIndex",t).next(r=>r.map(i=>kh(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return tg(e).Z({range:i},(l,h,m)=>{const[v,D,S]=l,R=To(D);if(v===this.userId&&t.path.isEqual(R))return Ra(e).get(S).next(V=>{if(!V)throw ft();Pt(V.userId===this.userId),a.push(kh(this.It,V))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(jt);const i=[];return t.forEach(a=>{const l=Jp(this.userId,a.path),h=IDBKeyRange.lowerBound(l),m=tg(e).Z({range:h},(v,D,S)=>{const[R,V,j]=v,ce=To(V);R===this.userId&&a.path.isEqual(ce)?r=r.add(j):S.done()});i.push(m)}),he.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Jp(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Sn(jt);return tg(e).Z({range:l},(m,v,D)=>{const[S,R,V]=m,j=To(R);S===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(V)):D.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ra(e).get(a).next(l=>{if(null===l)throw ft();Pt(l.userId===this.userId),r.push(kh(this.It,l))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Iw(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return tg(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const m=To(a[1]);i.push(m)}else h.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return Cw(e,this.userId,t)}Rn(e){return bw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Cw(n,e,t){const r=Jp(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return tg(n).Z({range:a,X:!0},(h,m,v)=>{const[D,S,R]=h;D===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Ra(n){return $r(n,"mutations")}function tg(n){return $r(n,"documentMutations")}function bw(n){return $r(n,"mutationQueues")}class Mu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Mu(0)}static vn(){return new Mu(-1)}}class WA{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Mu(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Mt.fromTimestamp(new qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Fh(e).Z((l,h)=>{const m=Oh(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>he.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Fh(e).Z((r,i)=>{const a=Oh(i);t(a)})}Vn(e){return zA(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}Sn(e,t){return zA(e).put("targetGlobalKey",t)}Dn(e,t){return Fh(e).put(Vb(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Pc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Fh(e).Z({range:i,index:"queryTargetsIndex"},(l,h,m)=>{const v=Oh(h);jp(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=qc(e);return t.forEach(l=>{const h=Ii(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=qc(e);return he.forEach(t,a=>{const l=Ii(a.path);return he.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=qc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=qc(e);let a=Kt();return i.Z({range:r,X:!0},(l,h,m)=>{const v=To(l[1]),D=new Qe(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Ii(t.path),i=IDBKeyRange.bound([r],[$C(r)],!1,!0);let a=0;return qc(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}se(e,t){return Fh(e).get(t).next(r=>r?Oh(r):null)}}function Fh(n){return $r(n,"targets")}function zA(n){return $r(n,"targetGlobal")}function qc(n){return $r(n,"targetDocuments")}function Hb([n,e],[t,r]){const i=jt(n,t);return 0===i?jt(e,r):i}class qA{constructor(e){this.xn=e,this.buffer=new Sn(Hb),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Hb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;He("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Iu(r)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Sa(r)}yield t.Fn(3e5)}))}}class _P{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(qi.at);const r=new qA(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Ew)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ew):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,h,m,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),h_()<=_a.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-D}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class yP{constructor(e,t){this.db=e,this.garbageCollector=new _P(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Dw(e,r)}removeReference(e,t,r){return Dw(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Dw(e,t)}Gn(e,t){return function(r,i){let a=!1;return bw(r).tt(l=>Cw(r,l,i).next(h=>(h&&(a=!0),he.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const m=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Mt.min()),qc(e).delete([0,Ii(l.path)])))});i.push(m)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Dw(e,t)}Kn(e,t){const r=qc(e);let i,a=qi.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:v})=>{0===l?(a!==qi.at&&t(new Qe(To(i)),a),a=v,i=m):a=qi.at}).next(()=>{a!==qi.at&&t(new Qe(To(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dw(n,e){return qc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ii(e.path),sequenceNumber:r}));var r}class ZA{constructor(){this.changes=new Cl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vP{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Lh(e).put(r)}removeEntry(e,t,r){return Lh(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],F_(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return Lh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($_(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return Lh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($_(t))},(i,a)=>{r={document:this.jn(t,a),size:j_(a)}}).next(()=>r)}getEntries(e,t){let r=Zi();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Zi(),i=new ur(Qe.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,j_(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return he.resolve();let i=new Sn(JA);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound($_(i.first()),$_(i.last())),l=i.getIterator();let h=l.getNext();return Lh(e).Z({index:"documentKeyIndex",range:a},(m,v,D)=>{const S=Qe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&JA(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?D.j($_(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),F_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lh(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Zi();for(const m of l){const v=this.jn(Qe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(v.key,v)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Zi();const l=QA(t,r),h=QA(t,_s.max());return Lh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,v,D)=>{const S=this.jn(Qe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new wP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return YA(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}Qn(e,t){return YA(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Lb(n,e){let t;if(e.document)t=Ab(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=Ph(e.noDocument.readTime);t=Fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=Qe.fromSegments(e.unknownDocument.path),i=Ph(e.unknownDocument.version);t=Fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new qn(r[0],r[1]);return Mt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return Fn.newInvalidDocument(e)}}function $b(n){return new vP(n)}class wP extends ZA{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Cl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Sn((a,l)=>jt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const m=pw(this.Yn.It,l);i=i.add(a.path.popLast()),r+=j_(m)-h.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=pw(this.Yn.It,l.convertToNoDocument(Mt.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function YA(n){return $r(n,"remoteDocumentGlobal")}function Lh(n){return $r(n,"remoteDocumentsV14")}function $_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QA(n,e){const t=e.documentKey.path.toArray();return[n,F_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function JA(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=jt(t[a],r[a]),i)return i;return i=jt(t.length,r.length),i||(i=jt(t[t.length-2],r[r.length-2]),i||jt(t[t.length-1],r[r.length-1]))}class s{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class o{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&zp(r.mutation,i,ys.empty(),qn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Kt()){const i=Do();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Ah();return a.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Do();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Zi();const l=Kp(),h=Kp();return t.forEach((m,v)=>{const D=r.get(v.key);i.has(v.key)&&(void 0===D||D.mutation instanceof Tu)?a=a.insert(v.key,v):void 0!==D&&(l.set(v.key,D.mutation.getFieldMask()),zp(D.mutation,v,D.mutation.getFieldMask(),qn.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,D)=>l.set(v,D)),t.forEach((v,D)=>{var S;return h.set(v,new s(D,null!==(S=l.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Kp();let i=new ur((l,h)=>l-h),a=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let D=r.get(m)||ys.empty();D=h.applyToLocalView(v,D),r.set(m,D);const S=(i.get(h.batchId)||Kt()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),v=m.key,D=m.value,S=Ib();D.forEach(R=>{if(!a.has(R)){const V=Q0(t.get(R),r.get(R));null!==V&&S.set(R,V),a=a.add(R)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return he.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):E_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):he.resolve(Do());let h=-1,m=a;return l.next(v=>he.forEach(v,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(D)?he.resolve():this.getBaseDocument(e,D,S).next(R=>{m=m.insert(D,R)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Kt())).next(D=>({batchId:h,changes:ew(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=Ah();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Ah();return this.indexManager.getCollectionParents(e,i).next(l=>he.forEach(l,h=>{const m=(v=t,D=h.child(i),new Du(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,Fn.newInvalidDocument(v)))});let l=Ah();return i.forEach((h,m)=>{const v=a.get(h);void 0!==v&&zp(v.mutation,m,ys.empty(),qn.now()),q0(t,m)&&(l=l.insert(h,m))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(Fn.newInvalidDocument(t))}}class u{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return he.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Hr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:gw(r.bundledQuery),readTime:Hr(r.readTime)}),he.resolve();var r}}class c{constructor(){this.overlays=new ur(Qe.comparator),this.es=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Do();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=Do(),a=t.length+1,l=new Qe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ur((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=Do(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const h=Do(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,D)=>h.set(v,D)),!(h.size()>=i)););return he.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Nh(t,r));let a=this.es.get(t);void 0===a&&(a=Kt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class d{constructor(){this.ns=new Sn(p.ss),this.rs=new Sn(p.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new p(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new p(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Qe(new cn([])),r=new p(t,e),i=new p(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Qe(new cn([])),r=new p(t,e),i=new p(t,e+1);let a=Kt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new p(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class p{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Qe.comparator(e.key,t.key)||jt(e._s,t._s)}static os(e,t){return jt(e._s,t._s)||Qe.comparator(e.key,t.key)}}class y{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Sn(p.ss)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new O_(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new p(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(l)}lookupMutationBatch(e,t){return he.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new p(t,0),i=new p(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(jt);return t.forEach(i=>{const a=new p(i,0),l=new p(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),he.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Qe.isDocumentKey(a)||(a=a.child(""));const l=new p(new Qe(a),0);let h=new Sn(jt);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m._s)),!0)},l),he.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return he.forEach(t.mutations,i=>{const a=new p(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new p(t,0),i=this.gs.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class E{constructor(e){this.Es=e,this.docs=new ur(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=Zi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Fn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=Zi();const a=new Qe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:m}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||Np(zC(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ft()}As(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new C(this)}getSize(e){return he.resolve(this.size)}}class C extends ZA{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class A{constructor(e){this.persistence=e,this.Rs=new Cl(t=>Pc(t),jp),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new d,this.targetCount=0,this.vs=Mu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),he.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Mu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Dn(t),he.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),he.waitFor(a).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.Ps.containsKey(t))}}class N{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new qi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new A(this),this.indexManager=new gP,this.remoteDocumentCache=new E(r=>this.referenceDelegate.xs(r)),this.It=new Fb(t),this.Ns=new u(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new c,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new y(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const i=new L(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Ms(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return he.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class L extends k0{constructor(e){super(),this.currentSequenceNumber=e}}class Y{constructor(e){this.persistence=e,this.Fs=new d,this.$s=null}static Bs(e){return new Y(e)}get Ls(){if(this.$s)return this.$s;throw ft()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),he.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ls,r=>{const i=Qe.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return he.or([()=>he.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class ie{constructor(e){this.It=e}$(e,t,r,i){const a=new mh("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mb,{unique:!0}),h.createObjectStore("documentMutations"),Se(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=he.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),Se(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store("mutations").W().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mb,{unique:!0});const D=m.store("mutations"),S=v.map(R=>D.put(R));return he.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:hP});m.createIndex("collectionPathOverlayIndex",kb,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",UA,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:Dl});m.createIndex("documentKeyIndex",Nb),m.createIndex("collectionGroupIndex",dw)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:FA}).createIndex("sequenceNumberIndex",LA,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:VA}).createIndex("documentKeyIndex",Pb,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=j_(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>he.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>he.forEach(h,m=>{Pt(m.userId===a.userId);const v=kh(this.It,m);return Iw(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const m=new cn(l),v=[0,Ii(m)];a.push(t.get(v).next(D=>D?he.resolve():t.put({targetId:0,path:Ii(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:OA});const r=t.store("collectionParents"),i=new Bb,a=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:Ii(m)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const m=new cn(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,m],v)=>{const D=To(h);return a(D.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=Oh(i),l=Vb(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Qe(cn.fromString(v.document.name).popFirst(5)):v.noDocument?Qe.fromSegments(v.noDocument.path):v.unknownDocument?Qe.fromSegments(v.unknownDocument.path):ft()).path.toArray();var v;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>he.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=$b(this.It),a=new N(Y.Bs,this.It.re);return r.W().next(l=>{const h=new Map;return l.forEach(m=>{var v;let D=null!==(v=h.get(m.userId))&&void 0!==v?v:Kt();kh(this.It,m).keys().forEach(S=>D=D.add(S)),h.set(m.userId,D)}),he.forEach(h,(m,v)=>{const D=new Cr(v),S=L_.oe(this.It,D),R=a.getIndexManager(D),V=H_.oe(D,this.It,R,a.referenceDelegate);return new o(i,V,S,R).recalculateAndSaveOverlaysForDocumentKeys(new k_(t,qi.at),m).next()})})}}function Se(n){n.createObjectStore("targetDocuments",{keyPath:kA}).createIndex("documentTargetsIndex",dP,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Su,{unique:!0}),n.createObjectStore("targetGlobal")}const $e="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ye{constructor(e,t,r,i,a,l,h,m,v,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=v,this.Ys=D,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=R=>Promise.resolve(),!Ye.C())throw new Ve(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yP(this,i),this.ii=t+"main",this.It=new Fb(m),this.ri=new Co(this.ii,this.Xs,new ie(this.It)),this.Cs=new WA(this.referenceDelegate,this.It),this.remoteDocumentCache=$b(this.It),this.Ns=new pP,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===D&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(ge.FAILED_PRECONDITION,$e);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new qi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ct(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Iu(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return ut(e).get("owner").next(t=>he.resolve(this.mi(t)))}gi(e){return Ct(e).delete(this.clientId)}yi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=$r(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(m=>-1===l.indexOf(m));return he.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?he.resolve(!0):ut(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ve(ge.FAILED_PRECONDITION,$e);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ct(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new k_(t,qi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Ct(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return H_.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mP(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return L_.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?Ob:14===l?fw:13===l?P_:12===l?fP:11===l?hw:void ft();var l;let h;return this.ri.runTransaction(e,i,a,m=>(h=new k_(m,this.Ss?this.Ss.next():qi.at),"readwrite-primary"===t?this.fi(h).next(v=>!!v||this.di(h)).next(v=>{if(!v)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ve(ge.FAILED_PRECONDITION,g_);return r(h)}).next(v=>this.wi(h).next(()=>v)):this.Vi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Vi(e){return ut(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ve(ge.FAILED_PRECONDITION,$e)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ut(e).put("owner",t)}static C(){return Co.C()}_i(e){const t=ut(e);return t.get("owner").next(r=>this.mi(r)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return He("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ut(n){return $r(n,"owner")}function Ct(n){return $r(n,"clientMetadata")}function ke(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class At{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Kt(),i=Kt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new At(e,t.fromCache,r,i)}}class gn{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Mi(e,t,i,r)).next(a=>a||this.Oi(e,t))}ki(e,t){if(v_(t))return he.resolve(null);let r=Ki(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Hp(t,null,"F"),r=Ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Kt(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,h);return this.$i(t,v,l,m.readTime)?this.ki(e,Hp(t,null,"F")):this.Bi(e,v,t,m)}))})))}Mi(e,t,r,i){return v_(t)||i.isEqual(Mt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Oi(e,t):(h_()<=_a.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),I_(t)),this.Bi(e,l,t,WC(i,-1)))})}Fi(e,t){let r=new Sn(Vc(e));return t.forEach((i,a)=>{q0(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return h_()<=_a.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",I_(t)),this.Ni.getDocumentsMatchingQuery(e,t,_s.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class er{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new ur(jt),this.qi=new Cl(a=>Pc(a),jp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Sl(n,e,t,r){return new er(n,e,t,r)}function G_(n,e){return ng.apply(this,arguments)}function ng(){return ng=(0,be.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let m=Kt();for(const v of i){l.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}for(const v of a){h.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:h}))})})}),ng.apply(this,arguments)}function Tw(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,v){const D=m.batch,S=D.keys();let R=he.resolve();return S.forEach(V=>{R=R.next(()=>v.getEntry(h,V)).next(j=>{const ce=m.docVersions.get(V);Pt(null!==ce),j.version.compareTo(ce)<0&&(D.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),v.addEntry(j)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Kt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function W_(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Sw(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((D,S)=>{const R=i.get(S);if(!R)return;h.push(t.Cs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,D.addedDocuments,S)));let V=R.withSequenceNumber(a.currentSequenceNumber);var j,ce,Ee;e.targetMismatches.has(S)?V=V.withResumeToken(Yr.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):D.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(D.resumeToken,r)),i=i.insert(S,V),ce=V,Ee=D,(0===(j=R).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,V))});let m=Zi(),v=Kt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(z_(a,l,e.documentUpdates).next(D=>{m=D.Wi,v=D.zi})),!r.isEqual(Mt.min())){const D=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return he.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ui=i,a))}function z_(n,e,t){let r=Kt(),i=Kt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Zi();return t.forEach((h,m)=>{const v=a.get(h);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Mt.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):He("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",m.version)}),{Wi:l,zi:i}})}function Aw(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Al(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,he.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Au(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function xl(n,e,t){return XA.apply(this,arguments)}function XA(){return XA=(0,be.Z)(function*(n,e,t){const r=tt(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Iu(l))throw l;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),XA.apply(this,arguments)}function Gb(n,e,t){const r=tt(n);let i=Mt.min(),a=Kt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,v){const D=tt(h),S=D.qi.get(v);return void 0!==S?he.resolve(D.Ui.get(S)):D.Cs.getTargetData(m,v)}(r,l,Ki(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Mt.min(),t?a:Kt())).next(h=>(CP(r,Ei(e),h),{documents:h,Hi:a})))}function EP(n,e){const t=tt(n),r=tt(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function IP(n,e){const t=tt(n),r=t.Ki.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,WC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CP(t,e,i),i))}function CP(n,e,t){let r=Mt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function ex(){return ex=(0,be.Z)(function*(n,e,t,r){const i=tt(n);let a=Kt(),l=Zi();for(const v of t){const D=e.Ji(v.metadata.name);v.document&&(a=a.add(D));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(D,S)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield Al(i,(v=r,Ki(Fc(cn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>z_(v,h,l).next(D=>(h.apply(v),D)).next(D=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,D.Wi,D.zi)).next(()=>D.Wi)))}),ex.apply(this,arguments)}function wV(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,be.Z)(function*(n,e,t=Kt()){const r=yield Al(n,Ki(gw(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Hr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(Yr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),tx.apply(this,arguments)}function bP(n,e){return`firestore_clients_${n}_${e}`}function DP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function nx(n,e){return`firestore_targets_${n}_${e}`}class Wb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ve(i.error.code,i.error.message))),l?new Wb(e,t,i.state,a):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ve(r.error.code,r.error.message))),a?new xw(e,r.state,i):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=tw();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=XC(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new zb(e,a):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class rx{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rx(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ix{constructor(){this.activeTargetIds=tw()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sx{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ur(jt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=bP(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new ix),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(bP(e.persistenceKey,i));if(a){const l=zb.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(nx(this.persistenceKey,e));if(r){const i=xw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nx(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=qi.at;if(null!=a)try{const h=JSON.parse(a);Pt("number"==typeof h),l=h}catch(h){br("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==qi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Or(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Wb(this.currentUser,e,t,r),a=DP(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=DP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=nx(this.persistenceKey,e),a=new xw(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return zb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Wb.Zi(new Cr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return xw.Zi(i,t)}yr(e){return rx.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=tw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class TP{constructor(){this.Lr=new ix,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new ix,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EV{qr(e){}shutdown(){}}class SP{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const IV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class CV{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class bV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const l=this.ao(e,t);He("RestConnection","Sending: ",l,r);const h={};return this.ho(h,i,a),this.lo(e,l,h,r).then(m=>(He("RestConnection","Received: ",m),m),m=>{throw Mc("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}fo(e,t,r,i,a,l){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ph,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.oo}/v1/${t}:${IV[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((a,l)=>{const h=new sP;h.listenOnce(JS.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case d_.NO_ERROR:const v=h.getResponseJson();He("Connection","XHR received:",JSON.stringify(v)),a(v);break;case d_.TIMEOUT:He("Connection",'RPC "'+e+'" timed out'),l(new Ve(ge.DEADLINE_EXCEEDED,"Request time out"));break;case d_.HTTP_ERROR:const D=h.getStatus();if(He("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const R=function(V){const j=V.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(j)>=0?j:ge.UNKNOWN}(S.status);l(new Ve(R,S.message))}else l(new Ve(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ve(ge.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{He("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=FC(),l=QS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new iP({})),this.ho(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=i.join("");He("Connection","Creating WebChannel: "+m,h);const v=a.createWebChannel(m,h);let D=!1,S=!1;const R=new CV({Hr:j=>{S?He("Connection","Not sending because WebChannel is closed:",j):(D||(He("Connection","Opening WebChannel transport."),v.open(),D=!0),He("Connection","WebChannel sending:",j),v.send(j))},Jr:()=>v.close()}),V=(j,ce,Ee)=>{j.listen(ce,Ze=>{try{Ee(Ze)}catch(ot){setTimeout(()=>{throw ot},0)}})};return V(v,x0.EventType.OPEN,()=>{S||He("Connection","WebChannel transport opened.")}),V(v,x0.EventType.CLOSE,()=>{S||(S=!0,He("Connection","WebChannel transport closed"),R.io())}),V(v,x0.EventType.ERROR,j=>{S||(S=!0,Mc("Connection","WebChannel transport errored:",j),R.io(new Ve(ge.UNAVAILABLE,"The operation could not be completed")))}),V(v,x0.EventType.MESSAGE,j=>{var ce;if(!S){const Ee=j.data[0];Pt(!!Ee);const Ze=Ee,ot=Ze.error||(null===(ce=Ze[0])||void 0===ce?void 0:ce.error);if(ot){He("Connection","WebChannel received error:",ot);const lt=ot.status;let ct=function($t){const Tr=Nr[$t];if(void 0!==Tr)return wb(Tr)}(lt),Rt=ot.message;void 0===ct&&(ct=ge.INTERNAL,Rt="Unknown error status: "+lt+" with message "+ot.message),S=!0,R.io(new Ve(ct,Rt)),v.close()}else He("Connection","WebChannel received:",Ee),R.ro(Ee)}}),V(l,XS.STAT_EVENT,j=>{j.stat===eA.PROXY?He("Connection","Detected buffering proxy"):j.stat===eA.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.so()},0),R}}function AP(){return typeof window<"u"?window:null}function qb(){return typeof document<"u"?document:null}function Mw(n){return new cP(n,!0)}class ox{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class xP{constructor(e,t,r,i,a,l,h,m){this.Hs=e,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ox(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,be.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,be.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ve(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,be.Z)(function*(){e.state=0,e.start()}))}Qo(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DV extends xP{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function SA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ft(),i=e.targetChange.targetIds||[],a=function(m,v){return m.gt?(Pt(void 0===v||"string"==typeof v),Yr.fromBase64String(v||"")):(Pt(void 0===v||v instanceof Uint8Array),Yr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=void 0===m.code?ge.UNKNOWN:wb(m.code);return new Ve(v,m.message||"")}(l);t=new EA(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Ma(n,r.document.name),a=Hr(r.document.updateTime),l=new jr({mapValue:{fields:r.document.fields}}),h=Fn.newFoundDocument(i,a,l);t=new nw(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Ma(n,r.document),a=r.readTime?Hr(r.readTime):Mt.min(),l=Fn.newNoDocument(i,a);t=new nw([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ma(n,r.document);t=new nw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,a=new vb(r.count||0);t=new wA(r.targetId,a)}}var m;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Mt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Mt.min():a.readTime?Hr(a.readTime):Mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=M_(this.It),t.addTarget=function(i,a){let l;const h=a.target;return l=kc(h)?{documents:ow(i,h)}:{query:AA(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=iw(i,a.resumeToken):a.snapshotVersion.compareTo(Mt.min())>0&&(l.readTime=jc(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function xA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=M_(this.It),t.removeTarget=e,this.Bo(t)}}class TV extends xP{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function xb(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let a=Hr(r.updateTime?r.updateTime:i);return a.isEqual(Mt.min())&&(a=Hr(i)),new Y0(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Hr(e.commitTime);return this.listener.Zo(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=M_(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>R_(this.It,r))};this.Bo(t)}}class SV extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ve(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.Vo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ve(ge.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.Vo.fo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(ge.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class AV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(br(t),this.ou=!1):He("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class xV{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(h=>{r.enqueueAndForget((0,be.Z)(function*(){var m;Vh(l)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,be.Z)(function*(v){const D=tt(v);D._u.add(4),yield q_(D),D.gu.set("Unknown"),D._u.delete(4),yield Rw(D)}),function(v){return m.apply(this,arguments)})(l))}))}),this.gu=new AV(r,i)}}function Rw(n){return ax.apply(this,arguments)}function ax(){return ax=(0,be.Z)(function*(n){if(Vh(n))for(const e of n.wu)yield e(!0)}),ax.apply(this,arguments)}function q_(n){return ux.apply(this,arguments)}function ux(){return ux=(0,be.Z)(function*(n){for(const e of n.wu)yield e(!1)}),ux.apply(this,arguments)}function Kb(n,e){const t=tt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),dx(t)?cx(t):Z_(t).ko()&&lx(t,e))}function Nw(n,e){const t=tt(n),r=Z_(t);t.du.delete(e),r.ko()&&MP(t,e),0===t.du.size&&(r.ko()?r.Fo():Vh(t)&&t.gu.set("Unknown"))}function lx(n,e){n.yu.Ot(e.targetId),Z_(n).zo(e)}function MP(n,e){n.yu.Ot(e),Z_(n).Ho(e)}function cx(n){n.yu=new lP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Z_(n).start(),n.gu.uu()}function dx(n){return Vh(n)&&!Z_(n).No()&&n.du.size>0}function Vh(n){return 0===tt(n)._u.size}function RP(n){n.yu=void 0}function MV(n){return hx.apply(this,arguments)}function hx(){return hx=(0,be.Z)(function*(n){n.du.forEach((e,t)=>{lx(n,e)})}),hx.apply(this,arguments)}function RV(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,be.Z)(function*(n,e){RP(n),dx(n)?(n.gu.hu(e),cx(n)):n.gu.set("Unknown")}),fx.apply(this,arguments)}function NV(n,e,t){return px.apply(this,arguments)}function px(){return px=(0,be.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof EA&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zb(n,r)}else if(e instanceof nw?n.yu.Gt(e):e instanceof wA?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Mt.min()))try{const r=yield W_(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const m=i.du.get(h);if(!m)return;i.du.set(h,m.withResumeToken(Yr.EMPTY_BYTE_STRING,m.snapshotVersion)),MP(i,h);const v=new Au(m.target,h,1,m.sequenceNumber);lx(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield Zb(n,r)}var r}),px.apply(this,arguments)}function Zb(n,e,t){return gx.apply(this,arguments)}function gx(){return gx=(0,be.Z)(function*(n,e,t){if(!Iu(e))throw e;n._u.add(1),yield q_(n),n.gu.set("Offline"),t||(t=()=>W_(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Rw(n)}))}),gx.apply(this,arguments)}function NP(n,e){return e().catch(t=>Zb(n,t,e))}function K_(n){return mx.apply(this,arguments)}function mx(){return mx=(0,be.Z)(function*(n){const e=tt(n),t=Uh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;PV(e);)try{const i=yield Aw(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,kV(e,i)}catch(i){yield Zb(e,i)}PP(e)&&kP(e)}),mx.apply(this,arguments)}function PV(n){return Vh(n)&&n.fu.length<10}function kV(n,e){n.fu.push(e);const t=Uh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function PP(n){return Vh(n)&&!Uh(n).No()&&n.fu.length>0}function kP(n){Uh(n).start()}function OV(n){return _x.apply(this,arguments)}function _x(){return _x=(0,be.Z)(function*(n){Uh(n).eu()}),_x.apply(this,arguments)}function FV(n){return yx.apply(this,arguments)}function yx(){return yx=(0,be.Z)(function*(n){const e=Uh(n);for(const t of n.fu)e.Xo(t.mutations)}),yx.apply(this,arguments)}function LV(n,e,t){return vx.apply(this,arguments)}function vx(){return vx=(0,be.Z)(function*(n,e,t){const r=n.fu.shift(),i=Rh.from(r,e,t);yield NP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield K_(n)}),vx.apply(this,arguments)}function VV(n,e){return wx.apply(this,arguments)}function wx(){return wx=(0,be.Z)(function*(n,e){var t;e&&Uh(n).Yo&&(yield(t=(0,be.Z)(function*(r,i){if(J0(a=i.code)&&a!==ge.ABORTED){const l=r.fu.shift();Uh(r).Oo(),yield NP(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield K_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),PP(n)&&kP(n)}),wx.apply(this,arguments)}function OP(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,be.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=Vh(t);t._u.add(3),yield q_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Rw(t)}),Ex.apply(this,arguments)}function Ix(n,e){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,be.Z)(function*(n,e){const t=tt(n);e?(t._u.delete(2),yield Rw(t)):e||(t._u.add(2),yield q_(t),t.gu.set("Unknown"))}),Cx.apply(this,arguments)}function Z_(n){return n.pu||(n.pu=function(e,t,r){const i=tt(e);return i.su(),new DV(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:MV.bind(null,n),Zr:RV.bind(null,n),Wo:NV.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.pu.Oo(),dx(n)?cx(n):n.gu.set("Unknown")):(yield n.pu.stop(),RP(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Uh(n){return n.Iu||(n.Iu=function(e,t,r){const i=tt(e);return i.su(),new TV(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:OV.bind(null,n),Zr:VV.bind(null,n),tu:FV.bind(null,n),Zo:LV.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Oo(),yield K_(n)):(yield n.Iu.stop(),n.fu.length>0&&(He("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class bx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new bx(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Y_(n,e){if(br("AsyncQueue",`${e}: ${n}`),Iu(n))return new Ve(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Q_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Ah(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new Q_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Q_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Q_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class FP{constructor(){this.Tu=new ur(Qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ft():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class J_{constructor(e,t,r,i,a,l,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new J_(e,t,Q_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class UV{constructor(){this.Au=void 0,this.listeners=[]}}class BV{constructor(){this.queries=new Cl(e=>db(e),Ch),this.onlineState="Unknown",this.Ru=new Set}}function Dx(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,be.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new UV),i)try{a.Au=yield t.onListen(r)}catch(l){const h=Y_(l,`Initialization of query '${I_(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&xx(t)}),Tx.apply(this,arguments)}function Sx(n,e){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,be.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Ax.apply(this,arguments)}function jV(n,e){const t=tt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&xx(t)}function HV(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function xx(n){n.Ru.forEach(e=>{e.next()})}class Mx{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new J_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=J_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class $V{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class LP{constructor(e){this.It=e}Ji(e){return Ma(this.It,e)}Yi(e){return e.metadata.exists?Ab(this.It,e.document,!1):Fn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Hr(e)}}class GV{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VP(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=cn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new LP(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Kt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function vV(n,e,t,r){return ex.apply(this,arguments)}(e.localStore,new LP(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield wV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function VP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class UP{constructor(e){this.key=e}}class BP{constructor(e){this.key=e}}class jP{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Kt(),this.mutatedKeys=Kt(),this.Ku=Vc(e),this.Gu=new Q_(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new FP,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const R=i.get(D),V=q0(this.query,S)?S:null,j=!!R&&this.mutatedKeys.has(R.key),ce=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ee=!1;R&&V?R.data.isEqual(V.data)?j!==ce&&(r.track({type:3,doc:V}),Ee=!0):this.zu(R,V)||(r.track({type:2,doc:V}),Ee=!0,(m&&this.Ku(V,m)>0||v&&this.Ku(V,v)<0)&&(h=!0)):!R&&V?(r.track({type:0,doc:V}),Ee=!0):R&&!V&&(r.track({type:1,doc:R}),Ee=!0,(m||v)&&(h=!0)),Ee&&(V?(l=l.add(V),a=ce?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Gu:l,Wu:r,$i:h,mutatedKeys:a}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.Wu.Eu();a.sort((v,D)=>function(S,R){const V=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return V(S)-V(R)}(v.type,D.type)||this.Ku(v.doc,D.doc)),this.Hu(r);const l=t?this.Ju():[],h=0===this.qu.size&&this.current?1:0,m=h!==this.Uu;return this.Uu=h,0!==a.length||m?{snapshot:new J_(this.query,e.Gu,i,a,e.mutatedKeys,0===h,m,!1),Yu:l}:{Yu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new FP,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Kt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new BP(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new UP(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Kt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return J_.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class WV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class zV{constructor(e){this.key=e,this.ec=!1}}class qV{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new Cl(h=>db(h),Ch),this.ic=new Map,this.rc=new Set,this.oc=new ur(Qe.comparator),this.uc=new Map,this.cc=new d,this.ac={},this.hc=new Map,this.lc=Mu.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function KV(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,be.Z)(function*(n,e){const t=eM(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const l=yield Al(t.localStore,Ki(e));t.isPrimaryClient&&Kb(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Nx(t,e,r,"current"===h)}return i}),Rx.apply(this,arguments)}function Nx(n,e,t,r){return Px.apply(this,arguments)}function Px(){return Px=(0,be.Z)(function*(n,e,t,r){n.dc=(D,S,R)=>{return(V=(0,be.Z)(function*(j,ce,Ee,Ze){let ot=ce.view.ju(Ee);ot.$i&&(ot=yield Gb(j.localStore,ce.query,!1).then(({documents:Rt})=>ce.view.ju(Rt,ot)));const lt=Ze&&Ze.targetChanges.get(ce.targetId),ct=ce.view.applyChanges(ot,j.isPrimaryClient,lt);return $x(j,ce.targetId,ct.Yu),ct.snapshot}),function(j,ce,Ee,Ze){return V.apply(this,arguments)})(n,D,S,R);var V};const i=yield Gb(n.localStore,e,!0),a=new jP(e,i.Hi),l=a.ju(i.documents),h=x_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(l,n.isPrimaryClient,h);$x(n,t,m.Yu);const v=new WV(e,t,a);return n.sc.set(e,v),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),m.snapshot}),Px.apply(this,arguments)}function ZV(n,e){return kx.apply(this,arguments)}function kx(){return kx=(0,be.Z)(function*(n,e){const t=tt(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!Ch(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield xl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Nw(t.remoteStore,r.targetId),X_(t,r.targetId)}).catch(Sa))):(X_(t,r.targetId),yield xl(t.localStore,r.targetId,!0))}),kx.apply(this,arguments)}function Ox(){return Ox=(0,be.Z)(function*(n,e,t){const r=tM(n);try{const i=yield function(a,l){const h=tt(a),m=qn.now(),v=l.reduce((R,V)=>R.add(V.key),Kt());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=Zi(),j=Kt();return h.Gi.getEntries(R,v).next(ce=>{V=ce,V.forEach((Ee,Ze)=>{Ze.isValidDocument()||(j=j.add(Ee))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,V)).next(ce=>{D=ce;const Ee=[];for(const Ze of l){const ot=mb(Ze,D.get(Ze.key).overlayedDocument);null!=ot&&Ee.push(new Tu(Ze.key,ot,bo(ot.value.mapValue),lr.exists(!0)))}return h.mutationQueue.addMutationBatch(R,m,Ee,l)}).next(ce=>{S=ce;const Ee=ce.applyToLocalDocumentSet(D,j);return h.documentOverlayCache.saveOverlays(R,ce.batchId,Ee)})}).then(()=>({batchId:S.batchId,changes:ew(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let m=a.ac[a.currentUser.toKey()];m||(m=new ur(jt)),m=m.insert(l,h),a.ac[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Kc(r,i.changes),yield K_(r.remoteStore)}catch(i){const a=Y_(i,"Failed to persist write");t.reject(a)}}),Ox.apply(this,arguments)}function HP(n,e){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,be.Z)(function*(n,e){const t=tt(n);try{const r=yield Sw(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.uc.get(a);l&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ec=!0:i.modifiedDocuments.size>0?Pt(l.ec):i.removedDocuments.size>0&&(Pt(l.ec),l.ec=!1))}),yield Kc(t,r,e)}catch(r){yield Sa(r)}}),Fx.apply(this,arguments)}function $P(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=tt(a);h.onlineState=l;let m=!1;h.queries.forEach((v,D)=>{for(const S of D.listeners)S.bu(l)&&(m=!0)}),m&&xx(h)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QV(n,e,t){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,be.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let l=new ur(Qe.comparator);l=l.insert(a,Fn.newNoDocument(a,Mt.min()));const h=Kt().add(a),m=new A_(Mt.min(),new Map,new Sn(jt),l,h);yield HP(r,m),r.oc=r.oc.remove(a),r.uc.delete(e),Gx(r)}else yield xl(r.localStore,e,!1).then(()=>X_(r,e,t)).catch(Sa)}),Lx.apply(this,arguments)}function JV(n,e){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,be.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield Tw(t.localStore,e);Hx(t,r,null),jx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Kc(t,i)}catch(i){yield Sa(i)}}),Vx.apply(this,arguments)}function XV(n,e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,be.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(a,l){const h=tt(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.mutationQueue.lookupMutationBatch(m,l).next(D=>(Pt(null!==D),v=D.keys(),h.mutationQueue.removeMutationBatch(m,D))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>h.localDocuments.getDocuments(m,v))})}(r.localStore,e);Hx(r,e,t),jx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Kc(r,i)}catch(i){yield Sa(i)}}),Ux.apply(this,arguments)}function Bx(){return Bx=(0,be.Z)(function*(n,e){const t=tt(n);Vh(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=tt(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=Y_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Bx.apply(this,arguments)}function jx(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function Hx(n,e,t){const r=tt(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function X_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||GP(n,r)})}function GP(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Nw(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),Gx(n))}function $x(n,e,t){for(const r of t)r instanceof UP?(n.cc.addReference(r.key,e),tU(n,r)):r instanceof BP?(He("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||GP(n,r.key)):ft()}function tU(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(He("SyncEngine","New document in limbo: "+t),n.rc.add(r),Gx(n))}function Gx(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Qe(cn.fromString(e)),r=n.lc.next();n.uc.set(r,new zV(t)),n.oc=n.oc.insert(t,r),Kb(n.remoteStore,new Au(Ki(Fc(t.path)),r,2,qi.at))}}function Kc(n,e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,be.Z)(function*(n,e,t){const r=tt(n),i=[],a=[],l=[];var h;r.sc.isEmpty()||(r.sc.forEach((h,m)=>{l.push(r.dc(m,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v.fromCache?"not-current":"current"),i.push(v);const D=At.Ci(m.targetId,v);a.push(D)}}))}),yield Promise.all(l),r.nc.Wo(i),yield(h=(0,be.Z)(function*(m,v){const D=tt(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>he.forEach(v,R=>he.forEach(R.Si,V=>D.persistence.referenceDelegate.addReference(S,R.targetId,V)).next(()=>he.forEach(R.Di,V=>D.persistence.referenceDelegate.removeReference(S,R.targetId,V)))))}catch(S){if(!Iu(S))throw S;He("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const R=S.targetId;if(!S.fromCache){const V=D.Ui.get(R),ce=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);D.Ui=D.Ui.insert(R,ce)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,a))}),Wx.apply(this,arguments)}function nU(n,e){return zx.apply(this,arguments)}function zx(){return zx=(0,be.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield G_(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(l=>{l.forEach(h=>{h.reject(new Ve(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Kc(t,r.ji)}var i}),zx.apply(this,arguments)}function rU(n,e){const t=tt(n),r=t.uc.get(e);if(r&&r.ec)return Kt().add(r.key);{let i=Kt();const a=t.ic.get(e);if(!a)return i;for(const l of a){const h=t.sc.get(l);i=i.unionWith(h.view.Qu)}return i}}function iU(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,be.Z)(function*(n,e){const t=tt(n),r=yield Gb(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&$x(t,e.targetId,i.Yu),i}),qx.apply(this,arguments)}function sU(n,e){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,be.Z)(function*(n,e){const t=tt(n);return IP(t.localStore,e).then(r=>Kc(t,r))}),Kx.apply(this,arguments)}function oU(n,e,t,r){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,be.Z)(function*(n,e,t,r){const i=tt(n),a=yield function(l,h){const m=tt(l),v=tt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.Tn(D,h).next(S=>S?m.localDocuments.getDocuments(D,S):he.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield K_(i.remoteStore):"acknowledged"===t||"rejected"===t?(Hx(i,e,r||null),jx(i,e),h=e,tt(tt(i.localStore).mutationQueue).An(h)):ft(),yield Kc(i,a)):He("SyncEngine","Cannot apply mutation batch with id: "+e)}),Zx.apply(this,arguments)}function Yx(){return Yx=(0,be.Z)(function*(n,e){const t=tt(n);if(eM(t),tM(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield WP(t,r.toArray());t.fc=!0,yield Ix(t.remoteStore,!0);for(const a of i)Kb(t.remoteStore,a)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(X_(t,l),xl(t.localStore,l,!0))),Nw(t.remoteStore,l)}),yield i,yield WP(t,r),function(a){const l=tt(a);l.uc.forEach((h,m)=>{Nw(l.remoteStore,m)}),l.cc.fs(),l.uc=new Map,l.oc=new ur(Qe.comparator)}(t),t.fc=!1,yield Ix(t.remoteStore,!1)}}),Yx.apply(this,arguments)}function WP(n,e,t){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,be.Z)(function*(n,e,t){const r=tt(n),i=[],a=[];for(const l of e){let h;const m=r.ic.get(l);if(m&&0!==m.length){h=yield Al(r.localStore,Ki(m[0]));for(const v of m){const D=r.sc.get(v),S=yield iU(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield EP(r.localStore,l);h=yield Al(r.localStore,v),yield Nx(r,zP(v),l,!1)}i.push(h)}return r.nc.Wo(a),i}),Qx.apply(this,arguments)}function zP(n){return cb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uU(n){const e=tt(n);return tt(tt(e.localStore).persistence).vi()}function lU(n,e,t,r){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,be.Z)(function*(n,e,t,r){const i=tt(n);if(i.fc)return void He("SyncEngine","Ignoring unexpected query state notification.");const a=i.ic.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield IP(i.localStore,Ei(a[0])),h=A_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Kc(i,l,h);break}case"rejected":yield xl(i.localStore,e,!0),X_(i,e,r);break;default:ft()}}),Jx.apply(this,arguments)}function cU(n,e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,be.Z)(function*(n,e,t){const r=eM(n);if(r.fc){for(const i of e){if(r.ic.has(i)){He("SyncEngine","Adding an already active target "+i);continue}const a=yield EP(r.localStore,i),l=yield Al(r.localStore,a);yield Nx(r,zP(a),l.targetId,!1),Kb(r.remoteStore,l)}for(const i of t)r.ic.has(i)&&(yield xl(r.localStore,i,!1).then(()=>{Nw(r.remoteStore,i),X_(r,i)}).catch(Sa))}}),Xx.apply(this,arguments)}function eM(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QV.bind(null,e),e.nc.Wo=jV.bind(null,e.eventManager),e.nc._c=HV.bind(null,e.eventManager),e}function tM(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XV.bind(null,e),e}class qP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.It=Mw(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Sl(this.persistence,new gn,e.initialUser,this.It)}gc(e){return new N(Y.Bs,this.It)}mc(e){return new TP}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KP extends qP{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield tM(r.Ec.syncEngine),yield K_(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Sl(this.persistence,new gn,e.initialUser,this.It)}Ic(e,t){return new KA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new L0(t,this.persistence);return new lA(e.asyncQueue,r)}gc(e){const t=ke(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ni.withCacheSize(this.cacheSizeBytes):Ni.DEFAULT;return new Ye(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,AP(),qb(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new TP}}class hU extends KP{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof sx&&(r.sharedClientState.syncEngine={Fr:oU.bind(null,i),$r:lU.bind(null,i),Br:cU.bind(null,i),vi:uU.bind(null,i),Or:sU.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,be.Z)(function*(l){yield function aU(n,e){return Yx.apply(this,arguments)}(r.Ec.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}mc(e){const t=AP();if(!sx.C(t))throw new Ve(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ke(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class nM{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>$P(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=nU.bind(null,r.syncEngine),yield Ix(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new BV}createDatastore(e){const t=Mw(e.databaseInfo.databaseId),r=new bV(e.databaseInfo);return new SV(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>$P(this.syncEngine,h,0),l=SP.C()?new SP:new EV,new xV(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,m,v){const D=new qV(r,i,a,l,h,m);return v&&(D.fc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=tt(t);He("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield q_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ZP(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Yb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):br("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class fU{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Br,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const a=yield e.Dc(i);return new $V(JSON.parse(a),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,be.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,be.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ve(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(a,l){const h=tt(a),m=M_(h.It)+"/documents",v={documents:l.map(V=>Qp(h.It,V))},D=yield h.fo("BatchGetDocuments",m,v,l.length),S=new Map;D.forEach(V=>{const j=function TA(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=Ma(t,r.found.name),a=Hr(r.found.updateTime),l=new jr({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=Ma(t,r.missing),a=Hr(r.readTime);return Fn.newNoDocument(i,a)}(n,e):ft()}(h.It,V);S.set(j.key.toString(),j)});const R=[];return l.forEach(V=>{const j=S.get(V.toString());Pt(!!j),R.push(j)}),R}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Qe.fromPath(i);e.mutations.push(new S_(a,e.precondition(a)))}),yield(r=(0,be.Z)(function*(i,a){const l=tt(i),h=M_(l.It)+"/documents",m={writes:a.map(v=>R_(l.It,v))};yield l.co("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ve(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?lr.exists(!1):lr.updateTime(t):lr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Ve(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lr.updateTime(t)}return lr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gU{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new ox(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,be.Z)(function*(){const t=new pU(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Oc(a)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Fp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!J0(t)}return!1}}class mU{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Cr.UNAUTHENTICATED,this.clientId=HC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,be.Z)(function*(h){He("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(He("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Y_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function YP(n,e){return rM.apply(this,arguments)}function rM(){return rM=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(a){r.isEqual(a)||(yield G_(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),rM.apply(this,arguments)}function QP(n,e){return iM.apply(this,arguments)}function iM(){return iM=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield sM(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>OP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>OP(e.remoteStore,a)),n.onlineComponents=e}),iM.apply(this,arguments)}function sM(n){return oM.apply(this,arguments)}function oM(){return oM=(0,be.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield YP(n,new qP)),n.offlineComponents}),oM.apply(this,arguments)}function Qb(n){return aM.apply(this,arguments)}function aM(){return aM=(0,be.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield QP(n,new nM)),n.onlineComponents}),aM.apply(this,arguments)}function JP(n){return sM(n).then(e=>e.persistence)}function Jb(n){return sM(n).then(e=>e.localStore)}function XP(n){return Qb(n).then(e=>e.remoteStore)}function uM(n){return Qb(n).then(e=>e.syncEngine)}function ey(n){return lM.apply(this,arguments)}function lM(){return lM=(0,be.Z)(function*(n){const e=yield Qb(n),t=e.eventManager;return t.onListen=KV.bind(null,e.syncEngine),t.onUnlisten=ZV.bind(null,e.syncEngine),t}),lM.apply(this,arguments)}function ek(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,l,h,m){const v=new Yb({next:S=>{a.enqueueAndForget(()=>Sx(i,D));const R=S.docs.has(l);!R&&S.fromCache?m.reject(new Ve(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&h&&"server"===h.source?m.reject(new Ve(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new Mx(Fc(l.path),v,{includeMetadataChanges:!0,Nu:!0});return Dx(i,D)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}function tk(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,l,h,m){const v=new Yb({next:S=>{a.enqueueAndForget(()=>Sx(i,D)),S.fromCache&&"server"===h.source?m.reject(new Ve(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new Mx(l,v,{includeMetadataChanges:!0,Nu:!0});return Dx(i,D)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}const nk=new Map;function cM(n,e,t){if(!t)throw new Ve(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rk(n,e,t,r){if(!0===e&&!0===r)throw new Ve(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ik(n){if(!Qe.isDocumentKey(n))throw new Ve(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sk(n){if(Qe.isDocumentKey(n))throw new Ve(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xb(n);throw new Ve(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ok(n,e){if(e<=0)throw new Ve(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ak{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ve(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ve(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,rk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ak({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ve(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ve(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ak(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new VC;switch(t.type){case"gapi":return new N0(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ve(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nk.get(e);t&&(He("ComponentProvider","Removing Datastore"),nk.delete(e),t.terminate())}(this),Promise.resolve()}}class cr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}}class Yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class Ml extends Yi{constructor(e,t,r){super(e,t,Fc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new Qe(e))}withConverter(e){return new Ml(this.firestore,e,this._path)}}function uk(n,e,...t){if(n=(0,k.m9)(n),cM("collection","path",e),n instanceof Pw){const r=cn.fromString(e,...t);return sk(r),new Ml(n,null,r)}{if(!(n instanceof cr||n instanceof Ml))throw new Ve(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return sk(r),new Ml(n.firestore,null,r)}}function eD(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=HC.R()),cM("doc","path",e),n instanceof Pw){const r=cn.fromString(e,...t);return ik(r),new cr(n,null,new Qe(r))}{if(!(n instanceof cr||n instanceof Ml))throw new Ve(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return ik(r),new cr(n.firestore,n instanceof Ml?n.converter:null,new Qe(r))}}function lk(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof cr||n instanceof Ml)&&(e instanceof cr||e instanceof Ml)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ck(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Yi&&e instanceof Yi&&n.firestore===e.firestore&&Ch(n._query,e._query)&&n.converter===e.converter}class SU{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new ox(this,"async_queue_retry"),this.jc=()=>{const t=qb();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=qb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=qb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Br;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Iu(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,br("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=bx.createAndSchedule(this,e,t,r,a=>this.Jc(a));return this.Uc.push(i),i}Wc(){this.qc&&ft()}verifyOperationInProgress(){}Yc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function dM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class AU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mr extends Pw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new SU,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||dk(this),this._firestoreClient.terminate()}}function Jr(n){return n._firestoreClient||dk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function dk(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new cA(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new mU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function hk(n,e,t){const r=new Br;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield YP(n,t),yield QP(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===ge.FAILED_PRECONDITION||l.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Mc("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function fk(n){if(n._initialized||n._terminated)throw new Ve(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ve(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(Yr.fromBase64String(e))}catch(t){throw new Ve(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rl(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rg{constructor(e){this._methodName=e}}class tD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const VU=/^__.*__$/;class UU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Tu(e,this.data,this.fieldMask,t,this.fieldTransforms):new qp(e,this.data,t,this.fieldTransforms)}}class pk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class nD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new nD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return sD(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(gk(this.na)&&VU.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class BU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Mw(e)}fa(e,t,r,i=!1){return new nD({na:e,methodName:t,la:r,path:pr.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function ig(n){const e=n._freezeSettings(),t=Mw(n._databaseId);return new BU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rD(n,e,t,r,i,a={}){const l=n.fa(a.merge||a.mergeFields?2:0,e,t,i);gM("Data must be an object, but it was:",l,r);const h=yk(r,l);let m,v;if(a.merge)m=new ys(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const R=mM(e,S,t);if(!l.contains(R))throw new Ve(ge.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);wk(D,R)||D.push(R)}m=new ys(D),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new UU(new jr(h),m,v)}class kw extends rg{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kw}}function mk(n,e,t){return new nD({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class hM extends rg{_toFieldTransform(e){return new Dh(e.path,new Il)}isEqual(e){return e instanceof hM}}class jU extends rg{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=mk(this,e,!0),r=this.da.map(a=>sg(a,t)),i=new Uc(r);return new Dh(e.path,i)}isEqual(e){return this===e}}class HU extends rg{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=mk(this,e,!0),r=this.da.map(a=>sg(a,t)),i=new Bc(r);return new Dh(e.path,i)}isEqual(e){return this===e}}class $U extends rg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new bh(e.It,yA(e.It,this._a));return new Dh(e.path,t)}isEqual(e){return this===e}}function fM(n,e,t,r){const i=n.fa(1,e,t);gM("Data must be an object, but it was:",i,r);const a=[],l=jr.empty();Cu(r,(m,v)=>{const D=iD(e,m,t);v=(0,k.m9)(v);const S=i.ua(D);if(v instanceof kw)a.push(D);else{const R=sg(v,S);null!=R&&(a.push(D),l.set(D,R))}});const h=new ys(a);return new pk(l,h,i.fieldTransforms)}function pM(n,e,t,r,i,a){const l=n.fa(1,e,t),h=[mM(e,r,t)],m=[i];if(a.length%2!=0)throw new Ve(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<a.length;R+=2)h.push(mM(e,a[R])),m.push(a[R+1]);const v=[],D=jr.empty();for(let R=h.length-1;R>=0;--R)if(!wk(v,h[R])){const V=h[R];let j=m[R];j=(0,k.m9)(j);const ce=l.ua(V);if(j instanceof kw)v.push(V);else{const Ee=sg(j,ce);null!=Ee&&(v.push(V),D.set(V,Ee))}}const S=new ys(v);return new pk(D,S,l.fieldTransforms)}function _k(n,e,t,r=!1){return sg(t,n.fa(r?4:3,e))}function sg(n,e){if(vk(n=(0,k.m9)(n)))return gM("Unsupported field value:",e,n),yk(n,e);if(n instanceof rg)return function(t,r){if(!gk(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=sg(l,r.ca(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yA(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=qn.fromDate(t);return{timestampValue:jc(r.It,i)}}if(t instanceof qn){const i=new qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jc(r.It,i)}}if(t instanceof tD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rl)return{bytesValue:iw(r.It,t._byteString)};if(t instanceof cr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.aa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Tb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${Xb(t)}`)}(n,e)}function yk(n,e){const t={};return U0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cu(n,(r,i)=>{const a=sg(i,e.ia(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function vk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qn||n instanceof tD||n instanceof Rl||n instanceof cr||n instanceof rg)}function gM(n,e,t){if(!vk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Xb(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function mM(n,e,t){if((e=(0,k.m9)(e))instanceof Zc)return e._internalPath;if("string"==typeof e)return iD(n,e);throw sD("Field path arguments must be of type string or ",n,!1,void 0,t)}const GU=new RegExp("[~\\*/\\[\\]]");function iD(n,e,t){if(e.search(GU)>=0)throw sD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zc(...e.split("."))._internalPath}catch{throw sD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Ve(ge.INVALID_ARGUMENT,h+n+m)}function wk(n,e){return n.some(t=>t.isEqual(e))}class Ow{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new WU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class WU extends Ow{data(){return super.data()}}function oD(n,e){return"string"==typeof e?iD(n,e):e instanceof Zc?e._internalPath:e._delegate._internalPath}class og{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yc extends Ow{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Fw extends Yc{data(e={}){return super.data(e)}}class Bh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new og(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Fw(this._firestore,this._userDataWriter,r.key,r,new og(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Fw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new og(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new Fw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new og(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:zU(l.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function Ek(n,e){return n instanceof Yc&&e instanceof Yc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bh&&e instanceof Bh&&n._firestore===e._firestore&&ck(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Ik(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lw{}function jh(n,...e){for(const t of e)n=t._apply(n);return n}class qU extends Lw{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=ig(e.firestore),r=function(i,a,l,h,m,v,D){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ve(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){Ak(D,v);const V=[];for(const j of D)V.push(Sk(h,i,j));S={arrayValue:{values:V}}}else S=Sk(h,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||Ak(D,v),S=_k(l,"where",D,"in"===v||"not-in"===v);const R=Qr.create(m,v,S);return function(V,j){if(j.dt()){const Ee=z0(V);if(null!==Ee&&!Ee.isEqual(j.field))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${j.field.toString()}'`);const Ze=w_(V);null!==Ze&&xk(0,j.field,Ze)}const ce=function(Ee,Ze){for(const ot of Ee.filters)if(Ze.indexOf(ot.op)>=0)return ot.op;return null}(V,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==ce)throw new Ve(ge.INVALID_ARGUMENT,ce===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${ce.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Yi(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Du(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class ZU extends Lw{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ve(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ve(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new El(i,a);return function(h,m){if(null===w_(h)){const v=z0(h);null!==v&&xk(0,v,m.field)}}(r,l),l}(e._query,this.wa,this.ya);return new Yi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Du(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Ck extends Lw{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Yi(e.firestore,e.converter,Hp(e._query,this.pa,this.Ia))}}class bk extends Lw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=Tk(e,this.type,this.Ta,this.Ea);return new Yi(e.firestore,e.converter,(i=t,new Du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Dk extends Lw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=Tk(e,this.type,this.Ta,this.Ea);return new Yi(e.firestore,e.converter,(i=t,new Du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Tk(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof Ow)return function(i,a,l,h,m){if(!h)throw new Ve(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of Lc(i))if(D.field.isKeyField())v.push(wl(a,h.key));else{const S=h.data.field(D.field);if(QC(S))throw new Ve(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const R=D.field.canonicalString();throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}v.push(S)}return new bu(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ig(n.firestore);return function(a,l,h,m,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new Ve(ge.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let V=0;V<v.length;V++){const j=v[V];if(S[V].field.isKeyField()){if("string"!=typeof j)throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof j}`);if(!E_(a)&&-1!==j.indexOf("/"))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${j}' contains a slash.`);const ce=a.path.child(cn.fromString(j));if(!Qe.isDocumentKey(ce))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const Ee=new Qe(ce);R.push(wl(l,Ee))}else{const ce=_k(h,m,j);R.push(ce)}}return new bu(R,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Sk(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Ve(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E_(e)&&-1!==t.indexOf("/"))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!Qe.isDocumentKey(r))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wl(n,new Qe(r))}if(t instanceof cr)return wl(n,t._key);throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xb(t)}.`)}function Ak(n,e){if(!Array.isArray(n)||0===n.length)throw new Ve(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ve(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xk(n,e,t){if(!t.isEqual(e))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const r2={maxAttempts:5};class _M{convertValue(e,t="none"){switch(Rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return Cu(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new tD(gr(e.latitude),gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=JC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Op(e));default:return null}}convertTimestamp(e){const t=_l(e);return new qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);Pt(uw(r));const i=new yl(r.get(1),r.get(3)),a=new Qe(r.popFirst(5));return i.isEqual(t)||br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function aD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class i2 extends _M{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}class Mk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ig(e)}set(e,t,r){this._verifyNotCommitted();const i=Hh(e,this._firestore),a=aD(i.converter,t,r),l=rD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,lr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Hh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Zc?pM(this._dataReader,"WriteBatch.update",a._key,t,r,i):fM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hh(e,this._firestore);return this._mutations=this._mutations.concat(new Sh(t._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Ve(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ag extends _M{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}function Rk(n,e,t){n=dn(n,cr);const r=dn(n.firestore,mr),i=aD(n.converter,e,t);return ty(r,[rD(ig(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,lr.none())])}function Nk(n,e,t,...r){n=dn(n,cr);const i=dn(n.firestore,mr),a=ig(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Zc?pM(a,"updateDoc",n._key,e,t,r):fM(a,"updateDoc",n._key,e),ty(i,[l.toMutation(n._key,lr.exists(!0))])}function Pk(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||dM(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(dM(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,D;if(n instanceof cr)v=dn(n.firestore,mr),D=Fc(n._key.path),m={next:S=>{e[l]&&e[l](yM(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=dn(n,Yi);v=dn(S.firestore,mr),D=S._query;const R=new ag(v);m={next:V=>{e[l]&&e[l](new Bh(v,R,S,V))},error:e[l+1],complete:e[l+2]},Ik(n._query)}return function(S,R,V,j){const ce=new Yb(j),Ee=new Mx(R,ce,V);return S.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Dx(yield ey(S),Ee)})),()=>{ce.Rc(),S.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Sx(yield ey(S),Ee)}))}}(Jr(v),D,h,m)}function ty(n,e){return function(t,r){const i=new Br;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function YV(n,e,t){return Ox.apply(this,arguments)}(yield uM(t),r,i)})),i.promise}(Jr(n),e)}function yM(n,e,t){const r=t.docs.get(e._key),i=new ag(n);return new Yc(n,i,e._key,r,new og(t.hasPendingWrites,t.fromCache),e.converter)}class p2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ig(e)}get(e){const t=Hh(e,this._firestore),r=new i2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new Ow(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Ow(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=Hh(e,this._firestore),a=aD(i.converter,t,r),l=rD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Hh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Zc?pM(this._dataReader,"Transaction.update",a._key,t,r,i):fM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Hh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hh(e,this._firestore),r=new ag(this._firestore);return super.get(e).then(i=>new Yc(this._firestore,r,t._key,i._document,new og(!1,!1),t.converter))}}function vM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ok(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function Fk(){if(!function ZC(){return typeof atob<"u"}())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ph=Mi.SDK_VERSION,(0,Mi._registerComponent)(new Vs.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new mr(new UC(t.getProvider("auth-internal")),new jC(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ve(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(h.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Mi.registerVersion)(M0,"3.5.0",n),(0,Mi.registerVersion)(M0,"3.5.0","esm2017")}();class Vw{constructor(e){this._delegate=e}static fromBase64String(e){return Fk(),new Vw(Rl.fromBase64String(e))}static fromUint8Array(e){return Ok(),new Vw(Rl.fromUint8Array(e))}toBase64(){return Fk(),this._delegate.toBase64()}toUint8Array(){return Ok(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wM(n){return function C2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class b2{enableIndexedDbPersistence(e,t){return function MU(n,e){fk(n=dn(n,mr));const t=Jr(n),r=n._freezeSettings(),i=new nM;return hk(t,i,new KP(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function RU(n){fk(n=dn(n,mr));const e=Jr(n),t=n._freezeSettings(),r=new nM;return hk(e,r,new hU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function NU(n){if(n._initialized&&!n._terminated)throw new Ve(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Co.C())return Promise.resolve();const i=r+"main";yield Co.delete(i)}),function(r){return t.apply(this,arguments)})(ke(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Lk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof yl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Mc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function DU(n,e,t,r={}){var i;const a=(n=dn(n,Pw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Mc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Cr.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ve(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Cr(m)}n._authCredentials=new nA(new LC(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function kU(n){return function _U(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield JP(n),t=yield XP(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i._u.delete(0),Rw(i)}(t)}))}(Jr(n=dn(n,mr)))}(this._delegate)}disableNetwork(){return function OU(n){return function yU(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield JP(n),t=yield XP(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const a=tt(i);a._u.add(0),yield q_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Jr(n=dn(n,mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function PU(n){return function(e){const t=new Br;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function eU(n,e){return Bx.apply(this,arguments)}(yield uM(e),t)})),t.promise}(Jr(n=dn(n,mr)))}(this._delegate)}onSnapshotsInSync(e){return function f2(n,e){return function EU(n,e){const t=new Yb(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield ey(n),i=t,tt(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield ey(n),i=t,void tt(r).Ru.delete(i);var r,i}))}}(Jr(n=dn(n,mr)),dM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ny(this,uk(this._delegate,e))}catch(t){throw vs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Na(this,eD(this._delegate,e))}catch(t){throw vs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ws(this,function TU(n,e){if(n=dn(n,Pw),cM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ve(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(n,null,(t=e,new Du(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw vs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function g2(n,e,t){n=dn(n,mr);const r=Object.assign(Object.assign({},r2),t);return function(i){if(i.maxAttempts<1)throw new Ve(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function IU(n,e,t){const r=new Br;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const i=yield(a=n,Qb(a).then(l=>l.datastore));var a;new gU(n.asyncQueue,i,t,e,r).run()})),r.promise}(Jr(n),i=>e(new p2(n,i)),r)}(this._delegate,t=>e(new Vk(this,t)))}batch(){return Jr(this._delegate),new Uk(new Mk(this._delegate,e=>ty(this._delegate,e)))}loadBundle(e){return function FU(n,e){const t=Jr(n=dn(n,mr)),r=new AU;return function CU(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return ZP(m,v);if(m instanceof ArrayBuffer)return ZP(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new fU(m,l);var m}(t,Mw(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function dU(n,e,t){const r=tt(n);var i;(i=(0,be.Z)(function*(a,l,h){try{const m=yield l.getMetadata();if(yield function(R,V){const j=tt(R),ce=Hr(V.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",Ee=>j.Ns.getBundleMetadata(Ee,V.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(ce)>=0)}(a.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=m).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(VP(m));const v=new GV(m,a.localStore,l.It);let D=yield l.wc();for(;D;){const R=yield v.Ou(D);R&&h._updateProgress(R),D=yield l.wc()}const S=yield v.complete();return yield Kc(a,S.Bu,void 0),yield function(R,V){const j=tt(R);return j.persistence.runTransaction("Save bundle","readwrite",ce=>j.Ns.saveBundleMetadata(ce,V))}(a.localStore,m),h._completeWith(S.progress),Promise.resolve(S.$u)}catch(m){return Mc("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var R}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield uM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function LU(n,e){return function bU(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield Jb(n),e)}))}(Jr(n=dn(n,mr)),e).then(t=>t?new Yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ws(this,t):null)}}class uD extends _M{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vw(new Rl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Na.forKey(t,this.firestore,null)}}class Vk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}get(e){const t=lg(e);return this._delegate.get(t).then(r=>new Uw(this._firestore,new Yc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=lg(e);return r?(vM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=lg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=lg(e);return this._delegate.delete(t),this}}class Uk{constructor(e){this._delegate=e}set(e,t,r){const i=lg(e);return r?(vM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=lg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=lg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ug{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Fw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ug.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new ug(e,new uD(e),t),i.set(t,a)),a}}ug.INSTANCES=new WeakMap;class Na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Na(t,new cr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Na(t,new cr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ny(this.firestore,uk(this._delegate,e))}catch(t){throw vs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof cr&&lk(this._delegate,e)}set(e,t){t=vM("DocumentReference.set",t);try{return t?Rk(this._delegate,e,t):Rk(this._delegate,e)}catch(r){throw vs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Nk(this._delegate,e):Nk(this._delegate,e,t,...r)}catch(i){throw vs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function d2(n){return ty(dn(n.firestore,mr),[new Sh(n._key,lr.none())])}(this._delegate)}onSnapshot(...e){const t=Bk(e),r=jk(e,i=>new Uw(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Pk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function o2(n){n=dn(n,cr);const e=dn(n.firestore,mr),t=Jr(e),r=new ag(e);return function vU(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,l){try{const h=yield function(m,v){const D=tt(m);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ve(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Y_(h,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield Jb(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Yc(e,r,n._key,i,new og(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function a2(n){n=dn(n,cr);const e=dn(n.firestore,mr);return ek(Jr(e),n._key,{source:"server"}).then(t=>yM(e,n,t))}(this._delegate):function s2(n){n=dn(n,cr);const e=dn(n.firestore,mr);return ek(Jr(e),n._key).then(t=>yM(e,n,t))}(this._delegate),t.then(r=>new Uw(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Na(this.firestore,this._delegate.withConverter(e?ug.getInstance(this.firestore,e):null))}}function vs(n,e,t){return n.message=n.message.replace(e,t),n}function Bk(n){for(const e of n)if("object"==typeof e&&!wM(e))return e;return{}}function jk(n,e){var t,r;let i;return i=wM(n[0])?n[0]:wM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Uw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ek(this._delegate,e._delegate)}}class Bw extends Uw{data(e){const t=this._delegate.data(e);return function tA(n,e){n||ft()}(void 0!==t),t}}class ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}where(e,t,r){try{return new ws(this.firestore,jh(this._delegate,function KU(n,e,t){const r=e,i=oD("where",n);return new qU(i,r,t)}(e,t,r)))}catch(i){throw vs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ws(this.firestore,jh(this._delegate,function YU(n,e="asc"){const t=e,r=oD("orderBy",n);return new ZU(r,t)}(e,t)))}catch(r){throw vs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ws(this.firestore,jh(this._delegate,function QU(n){return ok("limit",n),new Ck("limit",n,"F")}(e)))}catch(t){throw vs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ws(this.firestore,jh(this._delegate,function JU(n){return ok("limitToLast",n),new Ck("limitToLast",n,"L")}(e)))}catch(t){throw vs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ws(this.firestore,jh(this._delegate,function XU(...n){return new bk("startAt",n,!0)}(...e)))}catch(t){throw vs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ws(this.firestore,jh(this._delegate,function e2(...n){return new bk("startAfter",n,!1)}(...e)))}catch(t){throw vs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ws(this.firestore,jh(this._delegate,function t2(...n){return new Dk("endBefore",n,!1)}(...e)))}catch(t){throw vs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ws(this.firestore,jh(this._delegate,function n2(...n){return new Dk("endAt",n,!0)}(...e)))}catch(t){throw vs(t,"endAt()","Query.endAt()")}}isEqual(e){return ck(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function l2(n){n=dn(n,Yi);const e=dn(n.firestore,mr),t=Jr(e),r=new ag(e);return function wU(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,l){try{const h=yield Gb(i,a,!0),m=new jP(a,h.Hi),v=m.ju(h.documents),D=m.applyChanges(v,!1);l.resolve(D.snapshot)}catch(h){const m=Y_(h,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield Jb(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Bh(e,r,n,i))}(this._delegate):"server"===e?.source?function c2(n){n=dn(n,Yi);const e=dn(n.firestore,mr),t=Jr(e),r=new ag(e);return tk(t,n._query,{source:"server"}).then(i=>new Bh(e,r,n,i))}(this._delegate):function u2(n){n=dn(n,Yi);const e=dn(n.firestore,mr),t=Jr(e),r=new ag(e);return Ik(n._query),tk(t,n._query).then(i=>new Bh(e,r,n,i))}(this._delegate),t.then(r=>new EM(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Bk(e),r=jk(e,i=>new EM(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Pk(this._delegate,t,r)}withConverter(e){return new ws(this.firestore,this._delegate.withConverter(e?ug.getInstance(this.firestore,e):null))}}class T2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class EM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new T2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Bw(this._firestore,r))})}isEqual(e){return Ek(this._delegate,e._delegate)}}class ny extends ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Na(this.firestore,e):null}doc(e){try{return new Na(this.firestore,void 0===e?eD(this._delegate):eD(this._delegate,e))}catch(t){throw vs(t,"doc()","CollectionReference.doc()")}}add(e){return function h2(n,e){const t=dn(n.firestore,mr),r=eD(n),i=aD(n.converter,e);return ty(t,[rD(ig(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Na(this.firestore,t))}isEqual(e){return lk(this._delegate,e._delegate)}withConverter(e){return new ny(this.firestore,this._delegate.withConverter(e?ug.getInstance(this.firestore,e):null))}}function lg(n){return dn(n,cr)}class IM{constructor(...e){this._delegate=new Zc(...e)}static documentId(){return new IM(pr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class cg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _2(){return new hM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cg(e)}static delete(){const e=function m2(){return new kw("deleteField")}();return e._methodName="FieldValue.delete",new cg(e)}static arrayUnion(...e){const t=function y2(...n){return new jU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new cg(t)}static arrayRemove(...e){const t=function v2(...n){return new HU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new cg(t)}static increment(e){const t=function w2(n){return new $U("increment",n)}(e);return t._methodName="FieldValue.increment",new cg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const S2={Firestore:Lk,GeoPoint:tD,Timestamp:qn,Blob:Vw,Transaction:Vk,WriteBatch:Uk,DocumentReference:Na,DocumentSnapshot:Uw,Query:ws,QueryDocumentSnapshot:Bw,QuerySnapshot:EM,CollectionReference:ny,FieldPath:IM,FieldValue:cg,setLogLevel:function D2(n){!function Mp(n){pl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Hk(n,e){return function M2(n,e=km.z){return new dr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function CM(n,e){return Hk(n,e).pipe((0,it.U)(t=>({payload:t,type:"query"})))}function lD(n,e){return CM(n,e).pipe(aa(void 0),Om(),(0,it.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(D=>D.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function $k(n,e,t){return lD(n,t).pipe(xt((r,i)=>function N2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function P2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Uv(),(0,it.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function bM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Gk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function x2(n){(function A2(n,e){n.INTERNAL.registerComponent(new Vs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},S2)))})(n,(e,t)=>new Lk(e,t,new b2)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(Qd.Z);class Wk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,it.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(aa(void 0),Om(),b(([r,i])=>i.length>0||!r),(0,it.U)(([r,i])=>i),bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Gk(e);return $k(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return CM(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),bn.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(bn.iC)}add(e){return this.ref.add(e)}doc(e){return new zk(this.ref.doc(e),this.afs)}}class zk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=qk(r,t);return new Wk(i,a,this.afs)}snapshotChanges(){return function R2(n,e){return Hk(n,e).pipe(aa(void 0),Om(),(0,it.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(bn.iC)}}class k2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lD(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),b(t=>t.length>0),bn.iC):lD(this.query,this.afs.schedulers.outsideAngular).pipe(bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Gk(e);return $k(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return CM(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),bn.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(bn.iC)}}const O2=new f.OlP("angularfire2.enableFirestorePersistence"),F2=new f.OlP("angularfire2.firestore.persistenceSettings"),L2=new f.OlP("angularfire2.firestore.settings"),V2=new f.OlP("angularfire2.firestore.use-emulator");function qk(n,e=(t=>t)){return{query:e(n),ref:n}}let Kk=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,R,V,j,ce,Ee,Ze,ot){this.schedulers=m;const lt=(0,Fr.on)(t,h,r),ct=D;S&&tp(lt,h,R,j,ce,Ee,V,Ze),[this.firestore,this.persistenceEnabled$]=(0,Fr.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const Rt=h.runOutsideAngular(()=>lt.firestore());if(a&&Rt.settings(a),ct&&Rt.useEmulator(...ct),i&&!Vo(l)){const $t=()=>{try{return(0,en.D)(Rt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Tr){return typeof console<"u"&&console.warn(Tr),at(!1)}};return[Rt,h.runOutsideAngular($t)]}return[Rt,at(!1)]},[a,ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=qk(i,r),h=this.schedulers.ngZone.run(()=>a);return new Wk(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new k2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new zk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fr.Dh),f.LFG(Fr.xv,8),f.LFG(O2,8),f.LFG(L2,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(F2,8),f.LFG(V2,8),f.LFG(Ea,8),f.LFG(Lv,8),f.LFG(Vv,8),f.LFG(Zd,8),f.LFG(ep,8),f.LFG(Yd,8),f.LFG(ZI,8),f.LFG(Kd,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ry=(()=>{class n{constructor(t,r,i){this.router=t,this.afAuth=r,this.afs=i,this.userLoggedIn=!1,this.afAuth.onAuthStateChanged(a=>{this.userLoggedIn=!!a})}loginUser(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(()=>{console.log("Auth Service: loginUser: success"),this.router.navigate(["/dashboard"]),localStorage.setItem("token","true")}).catch(i=>{console.log("Auth Service: login error..."),console.log("error code",i.code),console.log("error",i),this.router.navigate(["/login"])})}signupUser(t){return this.afAuth.createUserWithEmailAndPassword(t.email,t.password).then(r=>{let i=t.email.toLowerCase();this.afs.doc("/users/"+i).set({accountType:"endUser",displayName:t.displayName,displayName_lower:t.displayName.toLowerCase(),email:t.email,email_lower:i}),r.user?.sendEmailVerification(),this.router.navigate(["/verify-email"])}).catch(r=>{console.log("Auth Service: signup error",r),this.router.navigate(["/register"])})}resetPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{console.log("Auth Service: reset password success")}).catch(r=>{if(console.log("Auth Service: reset password error..."),console.log(r.code),console.log(r),r.code)return r})}resendVerificationEmail(){var t=this;return(0,be.Z)(function*(){return(yield t.afAuth.currentUser)?.sendEmailVerification().then(()=>{}).catch(r=>{if(console.log("Auth Service: sendVerificationEmail error..."),console.log("error code",r.code),console.log("error",r),r.code)return r})})()}logoutUser(){return this.afAuth.signOut().then(()=>{this.router.navigate(["/home"]),localStorage.removeItem("token")}).catch(t=>{if(console.log("Auth Service: logout error..."),console.log("error code",t.code),console.log("error",t),t.code)return t})}setUserInfo(t){console.log("Auth Service: saving user info..."),this.afs.collection("users").add(t).then(function(r){console.log("Auth Service: setUserInfo response..."),console.log(r)})}getCurrentUser(){return this.afAuth.currentUser}googleSignIn(){return this.afAuth.signInWithPopup(new SI.Q).then(t=>{this.router.navigate(["/dashboard"])},t=>{alert(t.message)})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Jn),f.LFG(Ea),f.LFG(Kk))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function U2(n,e){if(1&n&&(f.TgZ(0,"ul")(1,"li"),f._uU(2),f.ALo(3,"async"),f.qZA(),f.TgZ(4,"li"),f._uU(5),f.ALo(6,"async"),f.qZA(),f.TgZ(7,"li"),f._uU(8),f.ALo(9,"async"),f.qZA(),f.TgZ(10,"li"),f._uU(11),f.ALo(12,"async"),f.qZA(),f.TgZ(13,"li"),f._uU(14),f.ALo(15,"async"),f.qZA()()),2&n){const t=f.oxw(2);let r,i,a,l,h;f.xp6(2),f.hij("Account Type: ",null==(r=f.lcZ(3,5,t.user))?null:r.accountType,""),f.xp6(3),f.hij("Display Name (lower): ",null==(i=f.lcZ(6,7,t.user))?null:i.displayName_lower,""),f.xp6(3),f.hij("Email: ",null==(a=f.lcZ(9,9,t.user))?null:a.email,""),f.xp6(3),f.hij("Email (lower): ",null==(l=f.lcZ(12,11,t.user))?null:l.email_lower,""),f.xp6(3),f.hij("Email Verification Status: ",null==(h=f.lcZ(15,13,t.afAuth.user))?null:h.emailVerified,"")}}function B2(n,e){if(1&n){const t=f.EpF();f.O4$(),f.kcU(),f.TgZ(0,"div",5)(1,"div",6)(2,"p"),f._uU(3),f.ALo(4,"async"),f.qZA(),f.YNc(5,U2,16,15,"ul",7),f.ALo(6,"async"),f.qZA(),f.TgZ(7,"button",8),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.logout())}),f._uU(8,"Log out"),f.qZA()()}if(2&n){const t=f.oxw();let r;f.xp6(3),f.hij("Welcome, ",null==(r=f.lcZ(4,2,t.user))?null:r.displayName," !"),f.xp6(2),f.Q6J("ngIf",f.lcZ(6,4,t.user))}}let j2=(()=>{class n{constructor(t,r,i){this.authService=t,this.afAuth=r,this.firestore=i}ngOnInit(){this.afAuth.authState.subscribe(t=>{if(console.log("Dashboard: user",t),t){let r=t.email?.toLowerCase();this.user=this.firestore.collection("users").doc(r).valueChanges()}})}logout(){this.authService.logoutUser()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ry),f.Y36(Ea),f.Y36(Kk))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:6,vars:3,consts:[[1,"dashboard","page"],["routerLink","/home",1,"button","button-round"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12 2.0996094L1 12L4 12L4 21L9 21L9 14L15 14L15 21L20 21L20 12L23 12L19 8.4003906L19 4L17 4L17 6.5996094L12 2.0996094 z"],["class","dashboard-content",4,"ngIf"],[1,"dashboard-content"],[1,"background-color"],[4,"ngIf"],[1,"button","button-basic",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"button",1),f.O4$(),f.TgZ(2,"svg",2),f._UZ(3,"path",3),f.qZA()(),f.YNc(4,B2,9,6,"div",4),f.ALo(5,"async"),f.qZA()),2&t&&(f.xp6(4),f.Q6J("ngIf",f.lcZ(5,1,r.user)))},dependencies:[Dn,ma,$l],styles:['@import"https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Open+Sans:wght@400;700&display=swap";.dashboard[_ngcontent-%COMP%]{position:relative;height:100vh;width:100%;text-align:center}.dashboard-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.background-color[_ngcontent-%COMP%]{margin-bottom:5rem}.background-color[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:3rem;font-weight:700;letter-spacing:.5rem;text-align:center;background:rgb(255,253,160);background:-webkit-linear-gradient(left,#00ffff 0%,#97fba0 25%,#97b1fb 50%,#00ffff 100%) repeat;-webkit-background-clip:text;-moz-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;-ms-text-fill-color:transparent;-moz-text-fill-color:transparent;animation:masked-animation 50s infinite linear;margin-bottom:2rem}@keyframes masked-animation{0%{background-position:0 0}to{background-position:-8000px -3000px}}']}),n})(),Zk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),dg=(()=>{class n extends Zk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Nl=new f.OlP("NgValueAccessor"),G2={provide:Nl,useExisting:(0,f.Gpc)(()=>iy),multi:!0},z2=new f.OlP("CompositionEventMode");let iy=(()=>{class n extends Zk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function W2(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(z2,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([G2]),f.qOj]}),n})();function $h(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Qk(n){return null!=n&&"number"==typeof n.length}const Qi=new f.OlP("NgValidators"),Gh=new f.OlP("NgAsyncValidators"),K2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qc{static min(e){return function Jk(n){return e=>{if($h(e.value)||$h(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Xk(n){return e=>{if($h(e.value)||$h(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return eO(e)}static requiredTrue(e){return function tO(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function nO(n){return $h(n.value)||K2.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function rO(n){return e=>$h(e.value)||!Qk(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function iO(n){return e=>Qk(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function sO(n){if(!n)return cD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if($h(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return dO(e)}static composeAsync(e){return hO(e)}}function eO(n){return $h(n.value)?{required:!0}:null}function cD(n){return null}function oO(n){return null!=n}function aO(n){return(0,f.QGY)(n)?(0,en.D)(n):n}function uO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function lO(n,e){return e.map(t=>t(n))}function cO(n){return n.map(e=>function Z2(n){return!n.validate}(e)?e:t=>e.validate(t))}function dO(n){if(!n)return null;const e=n.filter(oO);return 0==e.length?null:function(t){return uO(lO(t,e))}}function DM(n){return null!=n?dO(cO(n)):null}function hO(n){if(!n)return null;const e=n.filter(oO);return 0==e.length?null:function(t){return function H2(...n){const e=(0,ji.jO)(n),{args:t,keys:r}=uo(n),i=new dr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let m=l,v=l;for(let D=0;D<l;D++){let S=!1;(0,oi.Xf)(t[D]).subscribe((0,kn.x)(a,R=>{S||(S=!0,v--),h[D]=R},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?ou(r,h):h),a.complete())}))}});return e?i.pipe(Xu(e)):i}(lO(t,e).map(aO)).pipe((0,it.U)(uO))}}function TM(n){return null!=n?hO(cO(n)):null}function fO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function pO(n){return n._rawValidators}function gO(n){return n._rawAsyncValidators}function SM(n){return n?Array.isArray(n)?n:[n]:[]}function dD(n,e){return Array.isArray(n)?n.includes(e):n===e}function mO(n,e){const t=SM(e);return SM(n).forEach(i=>{dD(t,i)||t.push(i)}),t}function _O(n,e){return SM(e).filter(t=>!dD(n,t))}class yO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Es extends yO{get formDirective(){return null}get path(){return null}}class Wh extends yO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hD=(()=>{class n extends vO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Wh,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),fD=(()=>{class n extends vO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Es,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const jw="VALID",gD="INVALID",sy="PENDING",Hw="DISABLED";function RM(n){return(mD(n)?n.validators:n)||null}function EO(n){return Array.isArray(n)?DM(n):n||null}function NM(n,e){return(mD(e)?e.asyncValidators:n)||null}function IO(n){return Array.isArray(n)?TM(n):n||null}function mD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class DO{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=EO(this._rawValidators),this._composedAsyncValidatorFn=IO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===jw}get invalid(){return this.status===gD}get pending(){return this.status==sy}get disabled(){return this.status===Hw}get enabled(){return this.status!==Hw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=EO(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=IO(e)}addValidators(e){this.setValidators(mO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_O(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_O(e,this._rawAsyncValidators))}hasValidator(e){return dD(this._rawValidators,e)}hasAsyncValidator(e){return dD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=sy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jw||this.status===sy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hw:jw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=sy,this._hasOwnPendingAsyncValidator=!0;const t=aO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Hw:this.errors?gD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sy)?sy:this._anyControlsHaveStatus(gD)?gD:jw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class oy extends DO{constructor(e,t,r){super(RM(t),NM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function bO(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function CO(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function $w(n,e){PM(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function iB(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&TO(n,e)})}(n,e),function oB(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function sB(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&TO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rB(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),wD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function vD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function PM(n,e){const t=pO(n);null!==e.validator?n.setValidators(fO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=gO(n);null!==e.asyncValidator?n.setAsyncValidators(fO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();vD(e._rawValidators,i),vD(e._rawAsyncValidators,i)}function wD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=pO(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=gO(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return vD(e._rawValidators,r),vD(e._rawAsyncValidators,r),t}function TO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function MO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function RO(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const zh=class extends DO{constructor(e=null,t,r){super(RM(t),NM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=RO(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){MO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){MO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){RO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let ED=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),LO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const LM=new f.OlP("NgModelWithFormControlWarning"),wB={provide:Es,useExisting:(0,f.Gpc)(()=>ay)};let ay=(()=>{class n extends Es{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return $w(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){yD(t.control||null,t,!1),function cB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function xO(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(yD(r||null,t),(n=>n instanceof zh)(i)&&($w(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function SO(n,e){PM(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function aB(n,e){return wD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){PM(this.form,this),this._oldForm&&wD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Qi,10),f.Y36(Gh,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([wB]),f.qOj,f.TTD]}),n})();const CB={provide:Wh,useExisting:(0,f.Gpc)(()=>Ww)};let Ww=(()=>{class n extends Wh{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function OM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===iy?t=a:function lB(n){return Object.getPrototypeOf(n.constructor)===dg}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function kM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function _D(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Es,13),f.Y36(Qi,10),f.Y36(Gh,10),f.Y36(Nl,10),f.Y36(LM,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([CB]),f.qOj,f.TTD]}),n})(),hg=(()=>{class n{constructor(){this._validator=cD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):cD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const NB={provide:Qi,useExisting:(0,f.Gpc)(()=>uy),multi:!0};let uy=(()=>{class n extends hg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>eO}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([NB]),f.qOj]}),n})(),XO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[LO]}),n})(),VB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[XO]}),n})(),UB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:LM,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[XO]}),n})();function jB(n,e){if(1&n&&(f.TgZ(0,"div",13)(1,"span"),f._uU(2),f.qZA()()),2&n){const t=f.oxw();f.xp6(2),f.Oqu(t.firebaseErrorMessage)}}function HB(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.hij("Email was sent to ",t.email,"")}}let $B=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.afAuth=i,this.resetForm=new oy({email:new zh("",[Qc.required,Qc.email])}),this.firebaseErrorMessage="",this.mailSent=!1,this.email=""}ngOnInit(){}resetPassword(){this.resetForm.invalid||(this.email=this.resetForm.value.email,this.authService.resetPassword(this.resetForm.value.email).then(t=>{null==t?(console.log("send to email..."),this.mailSent=!0):0==t.isValid&&(console.log("login error",t),this.firebaseErrorMessage=t.message)}))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ry),f.Y36(Jn),f.Y36(Ea))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:16,vars:4,consts:[[1,"forgot-password","page"],["routerLink","/home",1,"button","button-round"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12 2.0996094L1 12L4 12L4 21L9 21L9 14L15 14L15 21L20 21L20 12L23 12L19 8.4003906L19 4L17 4L17 6.5996094L12 2.0996094 z"],[1,"form"],[1,"form-title"],[1,"form-content",3,"formGroup","ngSubmit"],[1,"form-control"],["autocomplete","off","formControlName","email","type","email","id","email","required",""],["for","email"],["class","error-style",4,"ngIf"],["type","submit",1,"button","button-stroked",3,"disabled"],[4,"ngIf"],[1,"error-style"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"button",1),f.O4$(),f.TgZ(2,"svg",2),f._UZ(3,"path",3),f.qZA()(),f.kcU(),f.TgZ(4,"div",4)(5,"h1",5),f._uU(6,"Reset password"),f.qZA(),f.TgZ(7,"form",6),f.NdJ("ngSubmit",function(){return r.resetPassword()}),f.TgZ(8,"div",7),f._UZ(9,"input",8),f.TgZ(10,"label",9),f._uU(11,"Email"),f.qZA()(),f.YNc(12,jB,3,1,"div",10),f.TgZ(13,"button",11),f._uU(14,"Send to email"),f.qZA(),f.YNc(15,HB,2,1,"p",12),f.qZA()()()),2&t&&(f.xp6(7),f.Q6J("formGroup",r.resetForm),f.xp6(5),f.Q6J("ngIf",""!=r.firebaseErrorMessage),f.xp6(1),f.Q6J("disabled",r.mailSent),f.xp6(2),f.Q6J("ngIf",r.mailSent))},dependencies:[Dn,ma,ED,iy,hD,fD,uy,ay,Ww],styles:['@import"https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Open+Sans:wght@400;700&display=swap";.moving-bg[_ngcontent-%COMP%]{background:linear-gradient(-45deg,#d5f15e,#86c481,#42b49b,#319c66);background-size:400% 400%;animation:gradient 15s ease infinite;height:100vh}.img-bg[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;inset:0;z-index:2}@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.form[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:1rem 2rem;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;border-radius:.3rem;min-width:25rem;min-height:20rem;text-align:center;background:linear-gradient(-45deg,#d5f15e,#86c481,#42b49b,#319c66);background-size:200% 200%;animation:gradient 8s ease infinite}.form-title[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-weight:700;font-size:2.5rem;color:#fff;text-align:center;margin-bottom:1rem}.form-control[_ngcontent-%COMP%]{position:relative}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 0;font-size:16px;color:#fff;margin-bottom:30px;border:none;border-bottom:1px solid #ffffff;outline:none;background:transparent}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-20px;left:0;color:#d5f15e;font-size:12px}.form-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:10px 0;font-size:16px;color:#fff;pointer-events:none;transition:.5s}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem}.form-footer[_ngcontent-%COMP%]{color:#fff;font-size:.8rem;margin-top:3rem}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8rem;color:#d5f15e;text-decoration:underline}']}),n})();function GB(n,e){1&n&&(f.TgZ(0,"div",7)(1,"a",8),f._uU(2,"Sign up"),f.qZA(),f.TgZ(3,"a",9),f._uU(4,"Log in"),f.qZA()())}function WB(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",7)(1,"a",10),f._uU(2,"Dashboard"),f.qZA(),f.TgZ(3,"a",11),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.logout())}),f._uU(4,"Log out"),f.qZA()()}}let e1=(()=>{class n{constructor(t,r){this.authService=t,this.afAuth=r}ngOnInit(){console.log(this.afAuth.user)}logout(){this.authService.logoutUser()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ry),f.Y36(Ea))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:13,vars:6,consts:[[1,"home","moving-bg"],["src","../../../assets/rocket.svg","alt","",1,"image-bg","img-cover"],[1,"home-container"],[1,"home-title"],[1,"home-subtitle"],[1,"home-content"],["class","home-btns",4,"ngIf"],[1,"home-btns"],["routerLink","/signup",1,"button","button-basic"],["routerLink","/login",1,"button","button-basic"],["routerLink","/dashboard",1,"button","button-basic"],[1,"button","button-basic",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"img",1),f.TgZ(2,"div",2)(3,"h1",3),f._uU(4,"Authorization"),f.qZA(),f.TgZ(5,"h2",4),f._uU(6,"on firebase"),f.qZA(),f.TgZ(7,"p",5),f._uU(8,"Firebase Authentication for logins and Cloud Firestore to build a NoSQL database to store details about users."),f.qZA(),f.YNc(9,GB,5,0,"div",6),f.ALo(10,"async"),f.YNc(11,WB,5,0,"div",6),f.ALo(12,"async"),f.qZA()()),2&t&&(f.xp6(9),f.Q6J("ngIf",!f.lcZ(10,2,r.afAuth.user)),f.xp6(2),f.Q6J("ngIf",f.lcZ(12,4,r.afAuth.user)))},dependencies:[Dn,vc,$l],styles:['@import"https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Open+Sans:wght@400;700&display=swap";.moving-bg[_ngcontent-%COMP%]{background:linear-gradient(-45deg,#d5f15e,#86c481,#42b49b,#319c66);background-size:400% 400%;animation:gradient 15s ease infinite;height:100vh}.img-bg[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;inset:0;z-index:2}@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.home[_ngcontent-%COMP%]{position:relative}.home-container[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);left:10rem;z-index:3;max-width:40rem}.home-title[_ngcontent-%COMP%]{font-size:7rem;font-weight:700;color:#319c66;font-family:Dancing Script,cursive}.home-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:#42b49b;letter-spacing:.4rem;margin-bottom:2rem}.home-content[_ngcontent-%COMP%]{color:#111827;margin-bottom:4rem}.home-btns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:60%}.home-btns[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}']}),n})();function zB(n,e){if(1&n&&(f.TgZ(0,"div",18)(1,"span"),f._uU(2),f.qZA()()),2&n){const t=f.oxw();f.xp6(2),f.Oqu(t.firebaseErrorMessage)}}let qB=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.afAuth=i,this.isLoading=!1,this.loginForm=new oy({email:new zh("",[Qc.required,Qc.email]),password:new zh("",Qc.required)}),this.firebaseErrorMessage=""}ngOnInit(){this.authService.userLoggedIn&&this.router.navigate(["/dashboard"])}loginUser(){this.isLoading=!0,!this.loginForm.invalid&&this.authService.loginUser(this.loginForm.value.email,this.loginForm.value.password).then(t=>{this.isLoading=!1,null==t?console.log("logging in..."):0==t.isValid&&(console.log("login error",t),this.firebaseErrorMessage=t.message)})}googleSignIn(){this.authService.googleSignIn()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ry),f.Y36(Jn),f.Y36(Ea))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:27,vars:2,consts:[[1,"login","page"],["routerLink","/home",1,"button","button-round"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12 2.0996094L1 12L4 12L4 21L9 21L9 14L15 14L15 21L20 21L20 12L23 12L19 8.4003906L19 4L17 4L17 6.5996094L12 2.0996094 z"],[1,"form"],[1,"form-title"],[1,"form-content",3,"formGroup","ngSubmit"],[1,"form-control"],["autocomplete","off","formControlName","email","type","email","id","email","required",""],["for","email"],["autocomplete","off","formControlName","password","type","password","id","password","required",""],["for","password"],["class","error-style",4,"ngIf"],["type","submit",1,"button","button-stroked"],[1,"button","button-stroked",3,"click"],[1,"form-footer"],["routerLink","/signup"],["routerLink","/forgot-password",1,"form-footer"],[1,"error-style"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"button",1),f.O4$(),f.TgZ(2,"svg",2),f._UZ(3,"path",3),f.qZA()(),f.kcU(),f.TgZ(4,"div",4)(5,"h1",5),f._uU(6,"Login"),f.qZA(),f.TgZ(7,"form",6),f.NdJ("ngSubmit",function(){return r.loginUser()}),f.TgZ(8,"div",7),f._UZ(9,"input",8),f.TgZ(10,"label",9),f._uU(11,"Email"),f.qZA()(),f.TgZ(12,"div",7),f._UZ(13,"input",10),f.TgZ(14,"label",11),f._uU(15,"Password"),f.qZA()(),f.YNc(16,zB,3,1,"div",12),f.TgZ(17,"button",13),f._uU(18,"Submit"),f.qZA()(),f.TgZ(19,"button",14),f.NdJ("click",function(){return r.googleSignIn()}),f._uU(20,"Signed with Google"),f.qZA(),f.TgZ(21,"div",15),f._uU(22," Don't have an account? "),f.TgZ(23,"a",16),f._uU(24,"Sing up!"),f.qZA()(),f.TgZ(25,"a",17),f._uU(26," Forgot password "),f.qZA()()()),2&t&&(f.xp6(7),f.Q6J("formGroup",r.loginForm),f.xp6(9),f.Q6J("ngIf",""!=r.firebaseErrorMessage))},dependencies:[Dn,ma,vc,ED,iy,hD,fD,uy,ay,Ww],styles:['@import"https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Open+Sans:wght@400;700&display=swap";.moving-bg[_ngcontent-%COMP%]{background:linear-gradient(-45deg,#d5f15e,#86c481,#42b49b,#319c66);background-size:400% 400%;animation:gradient 15s ease infinite;height:100vh}.img-bg[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;inset:0;z-index:2}@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.form[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:1rem 2rem;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;border-radius:.3rem;min-width:25rem;min-height:20rem;text-align:center;background:linear-gradient(-45deg,#d5f15e,#86c481,#42b49b,#319c66);background-size:200% 200%;animation:gradient 8s ease infinite}.form-title[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-weight:700;font-size:2.5rem;color:#fff;text-align:center;margin-bottom:1rem}.form-control[_ngcontent-%COMP%]{position:relative}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 0;font-size:16px;color:#fff;margin-bottom:30px;border:none;border-bottom:1px solid #ffffff;outline:none;background:transparent}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-20px;left:0;color:#d5f15e;font-size:12px}.form-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:10px 0;font-size:16px;color:#fff;pointer-events:none;transition:.5s}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem}.form-footer[_ngcontent-%COMP%]{color:#fff;font-size:.8rem;margin-top:3rem}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8rem;color:#d5f15e;text-decoration:underline}']}),n})();function KB(n,e){if(1&n&&(f.TgZ(0,"div",19)(1,"span"),f._uU(2),f.qZA()()),2&n){const t=f.oxw();f.xp6(2),f.Oqu(t.firebaseErrorMessage)}}let ZB=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.afAuth=i,this.isLoading=!1,this.firebaseErrorMessage=""}ngOnInit(){this.authService.userLoggedIn&&this.router.navigate(["/dashboard"]),this.signupForm=new oy({displayName:new zh("",Qc.required),email:new zh("",[Qc.required,Qc.email]),password:new zh("",Qc.required)})}signup(){this.signupForm.invalid||(this.isLoading=!0,this.authService.signupUser(this.signupForm.value).then(t=>{0==t.isValid&&(this.firebaseErrorMessage=t.message),this.isLoading=!1}).catch(()=>{this.isLoading=!1}))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ry),f.Y36(Jn),f.Y36(Ea))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-signup"]],decls:29,vars:2,consts:[[1,"signup","page"],["routerLink","/home",1,"button","button-round"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12 2.0996094L1 12L4 12L4 21L9 21L9 14L15 14L15 21L20 21L20 12L23 12L19 8.4003906L19 4L17 4L17 6.5996094L12 2.0996094 z"],[1,"form"],[1,"form-title"],[1,"form-content",3,"formGroup","ngSubmit"],[1,"form-control"],["autocomplete","off","formControlName","displayName","type","text","id","displayName","required",""],["for","displayName"],["autocomplete","off","formControlName","email","type","email","id","email","required",""],["for","email"],["autocomplete","off","formControlName","password","type","password","id","password","required",""],["for","password"],["class","error-style",4,"ngIf"],["type","submit",1,"button","button-stroked"],[1,"form-footer"],["routerLink","/login"],["routerLink","/forgot-password",1,"form-footer"],[1,"error-style"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"button",1),f.O4$(),f.TgZ(2,"svg",2),f._UZ(3,"path",3),f.qZA()(),f.kcU(),f.TgZ(4,"div",4)(5,"h1",5),f._uU(6,"Sign up"),f.qZA(),f.TgZ(7,"form",6),f.NdJ("ngSubmit",function(){return r.signup()}),f.TgZ(8,"div",7),f._UZ(9,"input",8),f.TgZ(10,"label",9),f._uU(11,"Username"),f.qZA()(),f.TgZ(12,"div",7),f._UZ(13,"input",10),f.TgZ(14,"label",11),f._uU(15,"Email"),f.qZA()(),f.TgZ(16,"div",7),f._UZ(17,"input",12),f.TgZ(18,"label",13),f._uU(19,"Password"),f.qZA()(),f.YNc(20,KB,3,1,"div",14),f.TgZ(21,"button",15),f._uU(22,"Submit"),f.qZA()(),f.TgZ(23,"div",16),f._uU(24," Have an account? "),f.TgZ(25,"a",17),f._uU(26,"Log in!"),f.qZA()(),f.TgZ(27,"a",18),f._uU(28," Forgot password "),f.qZA()()()),2&t&&(f.xp6(7),f.Q6J("formGroup",r.signupForm),f.xp6(13),f.Q6J("ngIf",""!=r.firebaseErrorMessage))},dependencies:[Dn,ma,vc,ED,iy,hD,fD,uy,ay,Ww],styles:['@import"https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Open+Sans:wght@400;700&display=swap";.moving-bg[_ngcontent-%COMP%]{background:linear-gradient(-45deg,#d5f15e,#86c481,#42b49b,#319c66);background-size:400% 400%;animation:gradient 15s ease infinite;height:100vh}.img-bg[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;inset:0;z-index:2}@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.form[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:1rem 2rem;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;border-radius:.3rem;min-width:25rem;min-height:20rem;text-align:center;background:linear-gradient(-45deg,#d5f15e,#86c481,#42b49b,#319c66);background-size:200% 200%;animation:gradient 8s ease infinite}.form-title[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-weight:700;font-size:2.5rem;color:#fff;text-align:center;margin-bottom:1rem}.form-control[_ngcontent-%COMP%]{position:relative}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 0;font-size:16px;color:#fff;margin-bottom:30px;border:none;border-bottom:1px solid #ffffff;outline:none;background:transparent}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-20px;left:0;color:#d5f15e;font-size:12px}.form-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:10px 0;font-size:16px;color:#fff;pointer-events:none;transition:.5s}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:2rem}.form-footer[_ngcontent-%COMP%]{color:#fff;font-size:.8rem;margin-top:3rem}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8rem;color:#d5f15e;text-decoration:underline}']}),n})();function YB(n,e){1&n&&(f.TgZ(0,"div")(1,"span"),f._uU(2,"User is not logged in -- the user needs to be logged in to resend the verification email"),f.qZA()())}function QB(n,e){if(1&n&&(f.TgZ(0,"div",5)(1,"span"),f._uU(2),f.qZA()()),2&n){const t=f.oxw();f.xp6(2),f.Oqu(t.firebaseErrorMessage)}}function JB(n,e){1&n&&(f.TgZ(0,"div")(1,"p"),f._uU(2,"An email has been sent!"),f.qZA()())}let XB=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.afAuth=i,this.email="",this.mailSent=!1,this.isLoading=!1,this.firebaseErrorMessage=""}ngOnInit(){this.afAuth.authState.subscribe(t=>{t&&(this.email=t.email)})}resendVerificationEmail(){this.isLoading=!0,this.authService.resendVerificationEmail().then(t=>{this.isLoading=!1,null==t?(console.log("verification email resent..."),this.mailSent=!0):0==t.isValid&&(console.log("verification error",t),this.firebaseErrorMessage=t.message)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ry),f.Y36(Jn),f.Y36(Ea))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:16,vars:7,consts:[[1,"verifyEmail-page"],[4,"ngIf"],["class","error-style",4,"ngIf"],[3,"disabled","click"],["routerLink","/login"],[1,"error-style"]],template:function(t,r){1&t&&(f._UZ(0,"div",0),f.YNc(1,YB,3,0,"div",1),f.ALo(2,"async"),f.TgZ(3,"div")(4,"p"),f._uU(5,"A verification email will be sent to "),f.TgZ(6,"span"),f._uU(7),f.qZA(),f._uU(8,"."),f.qZA(),f.YNc(9,QB,3,1,"div",2),f.TgZ(10,"button",3),f.NdJ("click",function(){return r.resendVerificationEmail()}),f._uU(11,"Resend verification email"),f.qZA(),f.YNc(12,JB,3,0,"div",1),f.qZA(),f.TgZ(13,"button",4)(14,"span"),f._uU(15,"Log in"),f.qZA()()),2&t&&(f.xp6(1),f.Q6J("ngIf",!f.lcZ(2,5,r.afAuth.user)),f.xp6(6),f.Oqu(r.email),f.xp6(2),f.Q6J("ngIf",""!=r.firebaseErrorMessage),f.xp6(1),f.Q6J("disabled",r.mailSent),f.xp6(2),f.Q6J("ngIf",r.mailSent))},dependencies:[Dn,ma,$l]}),n})(),t1=(()=>{class n{constructor(t,r){this.router=t,this.afAuth=r}canActivate(t,r){return new Promise((i,a)=>{this.afAuth.onAuthStateChanged(l=>{l?(l.emailVerified||(this.router.navigate(["/verify-email"]),alert("Verify your email!!!")),i(!0)):(console.log("Auth Guard: user is not logged in"),this.router.navigate(["/home"]),i(!1))})})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Jn),f.LFG(Ea))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ej=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"admin",component:TI,canActivate:[t1]},{path:"dashboard",component:j2,canActivate:[t1]},{path:"forgot-password",component:$B},{path:"home",component:e1},{path:"login",component:qB},{path:"signup",component:ZB},{path:"verify-email",component:XB},{path:"**",component:e1}];let tj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[CI.forRoot(ej),CI]}),n})(),nj=(()=>{class n{constructor(){this.title="auth-fb"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[_c]}),n})();class n1{}class r1{}class Jc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Jc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Jc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Jc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class rj{encodeKey(e){return i1(e)}encodeValue(e){return i1(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const sj=/%(\d[a-f0-9])/gi,oj={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function i1(n){return encodeURIComponent(n).replace(sj,(e,t)=>oj[t]??e)}function ID(n){return`${n}`}class qh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rj,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ij(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(l)||[];m.push(h),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(ID):[ID(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new qh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ID(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(ID(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class aj{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function s1(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function o1(n){return typeof Blob<"u"&&n instanceof Blob}function a1(n){return typeof FormData<"u"&&n instanceof FormData}class zw{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function uj(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Jc),this.context||(this.context=new aj),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new qh,this.urlWithParams=t}serializeBody(){return null===this.body?null:s1(this.body)||o1(this.body)||a1(this.body)||function lj(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||a1(this.body)?null:o1(this.body)?this.body.type||null:s1(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((S,R)=>S.set(R,e.setHeaders[R]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((S,R)=>S.set(R,e.setParams[R]),v)),new zw(t,r,a,{params:v,headers:m,context:D,reportProgress:h,responseType:i,withCredentials:l})}}var Xr=(()=>((Xr=Xr||{})[Xr.Sent=0]="Sent",Xr[Xr.UploadProgress=1]="UploadProgress",Xr[Xr.ResponseHeader=2]="ResponseHeader",Xr[Xr.DownloadProgress=3]="DownloadProgress",Xr[Xr.Response=4]="Response",Xr[Xr.User=5]="User",Xr))();class HM{constructor(e,t=200,r="OK"){this.headers=e.headers||new Jc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class $M extends HM{constructor(e={}){super(e),this.type=Xr.ResponseHeader}clone(e={}){return new $M({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class CD extends HM{constructor(e={}){super(e),this.type=Xr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new CD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class u1 extends HM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function GM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let cj=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof zw)a=t;else{let m,v;m=i.headers instanceof Jc?i.headers:new Jc(i.headers),i.params&&(v=i.params instanceof qh?i.params:new qh({fromObject:i.params})),a=new zw(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=at(a).pipe(Me(m=>this.handler.handle(m)));if(t instanceof zw||"events"===i.observe)return l;const h=l.pipe(b(m=>m instanceof CD));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,it.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,it.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,it.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,it.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new qh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,GM(i,r))}post(t,r,i={}){return this.request("POST",t,GM(i,r))}put(t,r,i={}){return this.request("PUT",t,GM(i,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n1))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class l1{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const c1=new f.OlP("HTTP_INTERCEPTORS");let dj=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const hj=/^\)\]\}',?\n/;let d1=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new dr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,j)=>i.setRequestHeader(V,j.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const V=i.statusText||"OK",j=new Jc(i.getAllResponseHeaders()),ce=function fj(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new $M({headers:j,status:i.status,statusText:V,url:ce}),l},m=()=>{let{headers:V,status:j,statusText:ce,url:Ee}=h(),Ze=null;204!==j&&(Ze=typeof i.response>"u"?i.responseText:i.response),0===j&&(j=Ze?200:0);let ot=j>=200&&j<300;if("json"===t.responseType&&"string"==typeof Ze){const lt=Ze;Ze=Ze.replace(hj,"");try{Ze=""!==Ze?JSON.parse(Ze):null}catch(ct){Ze=lt,ot&&(ot=!1,Ze={error:ct,text:Ze})}}ot?(r.next(new CD({body:Ze,headers:V,status:j,statusText:ce,url:Ee||void 0})),r.complete()):r.error(new u1({error:Ze,headers:V,status:j,statusText:ce,url:Ee||void 0}))},v=V=>{const{url:j}=h(),ce=new u1({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:j||void 0});r.error(ce)};let D=!1;const S=V=>{D||(r.next(h()),D=!0);let j={type:Xr.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(j.total=V.total),"text"===t.responseType&&!!i.responseText&&(j.partialText=i.responseText),r.next(j)},R=V=>{let j={type:Xr.UploadProgress,loaded:V.loaded};V.lengthComputable&&(j.total=V.total),r.next(j)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",R)),i.send(a),r.next({type:Xr.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",R)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(to))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const WM=new f.OlP("XSRF_COOKIE_NAME"),zM=new f.OlP("XSRF_HEADER_NAME");class h1{}let pj=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(me),f.LFG(f.Lbi),f.LFG(WM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),qM=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(h1),f.LFG(zM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),gj=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(c1,[]);this.chain=r.reduceRight((i,a)=>new l1(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(r1),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),mj=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:qM,useClass:dj}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:WM,useValue:t.cookieName}:[],t.headerName?{provide:zM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[qM,{provide:c1,useExisting:qM,multi:!0},{provide:h1,useClass:pj},{provide:WM,useValue:"XSRF-TOKEN"},{provide:zM,useValue:"X-XSRF-TOKEN"}]}),n})(),_j=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[cj,{provide:n1,useClass:gj},d1,{provide:r1,useExisting:d1}],imports:[mj.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var yj=F(5032);const f1="@firebase/database";let KM="";function g1(n){KM=n}class Ej{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Ij{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const m1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ej(e)}}catch{}return new Ij},fg=m1("localStorage"),ZM=m1("sessionStorage"),ly=new _a.Yd("@firebase/database"),_1=function(){let n=1;return function(){return n++}}(),y1=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},qw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=qw.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let pg=null,v1=!0;const w1=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ly.logLevel=_a.in.VERBOSE,pg=ly.log.bind(ly),e&&ZM.set("logging_enabled",!0)):"function"==typeof n?pg=n:(pg=null,ZM.remove("logging_enabled"))},Ci=function(...n){if(!0===v1&&(v1=!1,null===pg&&!0===ZM.get("logging_enabled")&&w1(!0)),pg){const e=qw.apply(null,n);pg(e)}},Kw=function(n){return function(...e){Ci(n,...e)}},YM=function(...n){const e="FIREBASE INTERNAL ERROR: "+qw(...n);ly.error(e)},Pl=function(...n){const e=`FIREBASE FATAL ERROR: ${qw(...n)}`;throw ly.error(e),new Error(e)},Ji=function(...n){const e="FIREBASE WARNING: "+qw(...n);ly.warn(e)},bD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Xc="[MIN_NAME]",kl="[MAX_NAME]",gg=function(n,e){if(n===e)return 0;if(n===Xc||e===kl)return-1;if(e===Xc||n===kl)return 1;{const t=DD(n),r=DD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Dj=function(n,e){return n===e?0:n<e?-1:1},Zw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},QM=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=QM(n[e[r]]);return t+="}",t},E1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const I1=function(n){(0,k.hu)(!bD(n),"Invalid JSON number");const r=1023;let i,a,l,h,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(m=0;m<64;m+=8){let R=parseInt(D.substr(m,8),2).toString(16);1===R.length&&(R="0"+R),S+=R}return S.toLowerCase()},xj=new RegExp("^-?(0*)\\d{1,10}$"),C1=-2147483648,JM=2147483647,DD=function(n){if(xj.test(n)){const e=Number(n);if(e>=C1&&e<=JM)return e}return null},cy=function(n){try{n()}catch(e){setTimeout(()=>{throw Ji("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Yw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Rj{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ji(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Nj{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ci("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ji(e)}}let Qw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const A1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R1="websocket",N1="long_polling";class eR{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function P1(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===R1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==N1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Pj(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return bi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class kj{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const tR={},nR={};function rR(n){const e=n.toString();return tR[e]||(tR[e]=new kj),tR[e]}class Fj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&cy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Kh{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kw(e),this.stats_=rR(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),P1(t,N1,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Fj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iR((...a)=>{const[l,h,m,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&A1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kh.forceAllow_=!0}static forceDisallow(){Kh.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!Kh.forceAllow_&&(Kh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=E1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class iR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=_1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=iR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Ci("frame writing exception"),h.stack&&Ci(h.stack),Ci(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ci("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ci("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let SD=null;typeof MozWebSocket<"u"?SD=MozWebSocket:typeof WebSocket<"u"&&(SD=WebSocket);let dy=(()=>{class n{constructor(t,r,i,a,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kw(this.connId),this.stats_=rR(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&A1.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),P1(t,R1,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fg.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${KM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new SD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==SD&&!n.forceDisallow_}static previouslyFailed(){return fg.isInMemoryStorage||!0===fg.get("previous_websocket_failure")}markConnectionHealthy(){fg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=E1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),B1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Kh,dy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=dy&&dy.isAvailable();let i=r&&!dy.previouslyFailed();if(t.webSocketOnly&&(r||Ji("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[dy];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class q1{constructor(e,t,r,i,a,l,h,m,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kw("c:"+this.id+":"),this.transportManager_=new B1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Zw("t",e),r=Zw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Zw("t",e),r=Zw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Zw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?YM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):YM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ji("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Yw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class K1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Z1{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class AD extends Z1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new AD}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class An{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new An("")}function tn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Zh(n){return n.pieces_.length-n.pieceNum_}function Kn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new An(n.pieces_,e)}function oR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Jw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function J1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new An(e,0)}function _r(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof An)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new An(t,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function Is(n,e){const t=tn(n),r=tn(e);if(null===t)return e;if(t===r)return Is(Kn(n),Kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function iH(n,e){const t=Jw(n,0),r=Jw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=gg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function aR(n,e){if(Zh(n)!==Zh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Pa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Zh(n)>Zh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class sH{constructor(e,t){this.errorPrefix_=t,this.parts_=Jw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);X1(this)}}function X1(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+mg(n))}function mg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class uR extends Z1{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new uR}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Xw=1e3;let MD,_g=(()=>{class n extends K1{constructor(t,r,i,a,l,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Kw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&AD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,D=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Ji(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):YM("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Xw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const D=function(){v?v.close():(m=!0,a())};t.realtime_={close:D,sendRequest:function(V){(0,k.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,j]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);m?Ci("getToken() completed but was canceled"):(Ci("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=j&&j.token,v=new q1(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ce=>{Ji(ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),m||(t.repoInfo_.nodeAdmin&&Ji(V),D())}}})()}interrupt(t){Ci("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ci("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Xw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>QM(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new An(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ci("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ci("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+KM.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=AD.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class on{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new on(e,t)}}class xD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new on(Xc,e),i=new on(Xc,t);return 0!==this.compare(r,i)}minPost(){return on.MIN}}class nF extends xD{static get __EMPTY_NODE(){return MD}static set __EMPTY_NODE(e){MD=e}compare(e,t){return gg(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return on.MIN}maxPost(){return new on(kl,MD)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new on(e,MD)}toString(){return".key"}}const Ol=new nF;class RD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let cR,Ru=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Gs.EMPTY_NODE,this.right=l??Gs.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Gs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Gs{constructor(e,t=Gs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Gs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ru.BLACK,null,null))}remove(e){return new Gs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ru.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new RD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new RD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new RD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new RD(this.root_,null,this.comparator_,!0,e)}}function fH(n,e){return gg(n.name,e.name)}function lR(n,e){return gg(n,e)}Gs.EMPTY_NODE=new class hH{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ru(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rF=function(n){return"number"==typeof n?"number:"+I1(n):"string:"+n},iF=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===cR||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===cR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sF,oF,aF,hy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iF(this.priorityNode_)}static set __childrenNodeConstructor(t){sF=t}static get __childrenNodeConstructor(){return sF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nn(t)?this:".priority"===tn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=tn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Zh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Kn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?I1(this.value_):this.value_,this.lazyHash_=y1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const tr=new class _H extends xD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?gg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return on.MIN}maxPost(){return new on(kl,new hy("[PRIORITY-POST]",aF))}makePost(e,t){const r=oF(e);return new on(t,new hy("[PRIORITY-POST]",r))}toString(){return".priority"}},yH=Math.log(2);class vH{constructor(e){this.count=parseInt(Math.log(e+1)/yH,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ND=function(n,e,t,r){n.sort(e);const i=function(m,v){const D=v-m;let S,R;if(0===D)return null;if(1===D)return S=n[m],R=t?t(S):S,new Ru(R,S.node,Ru.BLACK,null,null);{const V=parseInt(D/2,10)+m,j=i(m,V),ce=i(V+1,v);return S=n[V],R=t?t(S):S,new Ru(R,S.node,Ru.BLACK,j,ce)}},h=function(m){let v=null,D=null,S=n.length;const R=function(j,ce){const Ee=S-j,Ze=S;S-=j;const ot=i(Ee+1,Ze),lt=n[Ee],ct=t?t(lt):lt;V(new Ru(ct,lt.node,ce,null,ot))},V=function(j){v?(v.left=j,v=j):(D=j,v=j)};for(let j=0;j<m.count;++j){const ce=m.nextBitIsOne(),Ee=Math.pow(2,m.count-(j+1));ce?R(Ee,Ru.BLACK):(R(Ee,Ru.BLACK),R(Ee,Ru.RED))}return D}(new vH(n.length));return new Gs(r||e,h)};let dR;const fy={};class ed{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(fy&&tr,"ChildrenNode.ts has not been loaded"),dR=dR||new ed({".priority":fy},{".priority":tr}),dR}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Gs?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Ol,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(on.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?ND(r,e.getCompare()):fy;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const D=Object.assign({},this.indexes_);return D[m]=h,new ed(D,v)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===fy){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(on.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),ND(h,l.getCompare())}return fy}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new on(e.name,h))),m.insert(e,e.node)}});return new ed(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===fy)return i;{const a=t.get(e.name);return a?i.remove(new on(e.name,a)):i}});return new ed(r,this.indexSet_)}}let eE,Zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&iF(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return eE||(eE=new n(new Gs(lR),null,ed.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?eE:r}}getChild(t){const r=tn(t);return null===r?this:this.getImmediateChild(r).getChild(Kn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new on(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?eE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=tn(t);if(null===i)return r;{(0,k.hu)(".priority"!==tn(t)||1===Zh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Kn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(tr,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+rF(this.getPriority().val())+":"),this.forEachChild(tr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":y1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new on(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new on(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new on(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,on.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,on.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===tE?-1:0}withIndex(t){if(t===Ol||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ol||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(tr),a=r.getIterator(tr);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Ol?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const tE=new class wH extends Zt{constructor(){super(new Gs(lR),Zt.EMPTY_NODE,ed.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Zt.EMPTY_NODE}isEmpty(){return!1}};function Dr(n,e=null){if(null===n)return Zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new hy(n,Dr(e));if(n instanceof Array){let t=Zt.EMPTY_NODE;return bi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Dr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Dr(e))}{const t=[];let r=!1;if(bi(n,(l,h)=>{if("."!==l.substring(0,1)){const m=Dr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new on(l,m)))}}),0===t.length)return Zt.EMPTY_NODE;const a=ND(t,fH,l=>l.name,lR);if(r){const l=ND(t,tr.getCompare());return new Zt(a,Dr(e),new ed({".priority":l},{".priority":tr}))}return new Zt(a,Dr(e),ed.Default)}}Object.defineProperties(on,{MIN:{value:new on(Xc,Zt.EMPTY_NODE)},MAX:{value:new on(kl,tE)}}),nF.__EMPTY_NODE=Zt.EMPTY_NODE,hy.__childrenNodeConstructor=Zt,function pH(n){cR=n}(tE),function mH(n){aF=n}(tE),function gH(n){oF=n}(Dr);class hR extends xD{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!nn(e)&&".priority"!==tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?gg(e.name,t.name):a}makePost(e,t){const r=Dr(e),i=Zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new on(t,i)}maxPost(){const e=Zt.EMPTY_NODE.updateChild(this.indexPath_,tE);return new on(kl,e)}toString(){return Jw(this.indexPath_,0).join("/")}}const fR=new class IH extends xD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?gg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return on.MIN}maxPost(){return on.MAX}makePost(e,t){const r=Dr(e);return new on(t,r)}toString(){return".value"}},py="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",CH=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=py.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=py.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),cF=function(n){if(n===""+JM)return"-";const e=DD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return kl;const a=py.charAt(py.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},dF=function(n){if(n===""+C1)return Xc;const e=DD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+JM:(delete t[t.length-1],t.join("")):(t[t.length-1]=py.charAt(py.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function hF(n){return{type:"value",snapshotNode:n}}function gy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function nE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function rE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class gR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(nE(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(gy(t,r)):l.trackChildChange(rE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(tr,(i,a)=>{t.hasChild(i)||r.trackChildChange(nE(i,a))}),t.isLeafNode()||t.forEachChild(tr,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(rE(i,a,l))}else r.trackChildChange(gy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class iE{constructor(e){this.indexedFilter_=new gR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=iE.getStartPost_(e),this.endPost_=iE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new on(t,r))||(r=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Zt.EMPTY_NODE);const a=this;return t.forEachChild(tr,(l,h)=>{a.matches(new on(l,h))||(i=i.updateImmediateChild(l,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class DH{constructor(e){this.rangedFilter_=new iE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new on(t,r))||(r=Zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Zt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Zt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(R,V)=>S(V,R)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let v=0,D=!1;for(;m.hasNext();){const S=m.getNext();!D&&h(a,S)<=0&&(D=!0),D&&v<this.limit_&&h(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(R,V)=>S(V,R)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const m=new on(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const V=null==R?1:l(R,m);if(D&&!r.isEmpty()&&V>=0)return a?.trackChildChange(rE(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(nE(t,S));const ce=h.updateImmediateChild(t,Zt.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(a?.trackChildChange(gy(R.name,R.node)),ce.updateImmediateChild(R.name,R.node)):ce}}return r.isEmpty()?e:D&&l(v,m)>=0?(null!=a&&(a.trackChildChange(nE(v.name,v.node)),a.trackChildChange(gy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,Zt.EMPTY_NODE)):e}}class PD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tr}copy(){const e=new PD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function _R(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function kD(n,e){const t=n.copy();return t.index_=e,t}function fF(n){const e={};if(n.isDefault())return e;let t;return n.index_===tr?t="$priority":n.index_===fR?t="$value":n.index_===Ol?t="$key":((0,k.hu)(n.index_ instanceof hR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function pF(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==tr&&(e.i=n.index_.toString()),e}class OD extends K1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Kw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=OD.getListenId_(e,r),h={};this.listens_[l]=h;const m=fF(e._queryParams);this.restRequest_(a+".json",m,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let R;R=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(R,null)}})}unlisten(e,t){const r=OD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=fF(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,k.cI)(h.responseText)}catch{Ji("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Ji("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class RH{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function FD(){return{value:null,children:new Map}}function my(n,e,t){if(nn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=tn(e);n.children.has(r)||n.children.set(r,FD()),my(n.children.get(r),e=Kn(e),t)}}function yR(n,e){if(nn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(tr,(r,i)=>{my(n,new An(r),i)}),yR(n,e)}}if(n.children.size>0){const t=tn(e);return e=Kn(e),n.children.has(t)&&yR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function vR(n,e,t){null!==n.value?t(e,n.value):function NH(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{vR(i,new An(e.toString()+"/"+r),t)})}class PH{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&bi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class FH{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new PH(e);const r=1e4+2e4*Math.random();Yw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;bi(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Yw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ka=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ka||(ka={})),ka))();function IR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class LD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ka.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new An(e));return new LD(yn(),t,this.revert)}}return(0,k.hu)(tn(this.path)===e,"operationForChild called for unrelated child."),new LD(Kn(this.path),this.affectedTree,this.revert)}}class sE{constructor(e,t){this.source=e,this.path=t,this.type=ka.LISTEN_COMPLETE}operationForChild(e){return nn(this.path)?new sE(this.source,yn()):new sE(this.source,Kn(this.path))}}class yg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ka.OVERWRITE}operationForChild(e){return nn(this.path)?new yg(this.source,yn(),this.snap.getImmediateChild(e)):new yg(this.source,Kn(this.path),this.snap)}}class _y{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ka.MERGE}operationForChild(e){if(nn(this.path)){const t=this.children.subtree(new An(e));return t.isEmpty()?null:t.value?new yg(this.source,yn(),t.value):new _y(this.source,yn(),t)}return(0,k.hu)(tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _y(this.source,Kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Yh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nn(e))return this.isFullyInitialized()&&!this.filtered_;const t=tn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class LH{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function oE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function BH(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new on(e.childName,e.snapshotNode),i=new on(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function UH(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function VD(n,e){return{eventCache:n,serverCache:e}}function aE(n,e,t,r){return VD(new Yh(e,t,r),n.serverCache)}function mF(n,e,t,r){return VD(n.eventCache,new Yh(e,t,r))}function UD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function vg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let CR;class nr{constructor(e,t=(()=>(CR||(CR=new Gs(Dj)),CR))()){this.value=e,this.children=t}static fromObject(e){let t=new nr(null);return bi(e,(r,i)=>{t=t.set(new An(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(nn(e))return null;{const r=tn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Kn(e),t);return null!=a?{path:_r(new An(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nn(e))return this;{const t=tn(e),r=this.children.get(t);return null!==r?r.subtree(Kn(e)):new nr(null)}}set(e,t){if(nn(e))return new nr(t,this.children);{const r=tn(e),a=(this.children.get(r)||new nr(null)).set(Kn(e),t),l=this.children.insert(r,a);return new nr(this.value,l)}}remove(e){if(nn(e))return this.children.isEmpty()?new nr(null):new nr(null,this.children);{const t=tn(e),r=this.children.get(t);if(r){const i=r.remove(Kn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new nr(null):new nr(this.value,a)}return this}}get(e){if(nn(e))return this.value;{const t=tn(e),r=this.children.get(t);return r?r.get(Kn(e)):null}}setTree(e,t){if(nn(e))return t;{const r=tn(e),a=(this.children.get(r)||new nr(null)).setTree(Kn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new nr(this.value,l)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(_r(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(nn(e))return null;{const a=tn(e),l=this.children.get(a);return l?l.findOnPath_(Kn(e),_r(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(nn(e))return this;{this.value&&r(t,this.value);const i=tn(e),a=this.children.get(i);return a?a.foreachOnPath_(Kn(e),_r(t,i),r):new nr(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(_r(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Nu{constructor(e){this.writeTree_=e}static empty(){return new Nu(new nr(null))}}function uE(n,e,t){if(nn(e))return new Nu(new nr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Is(i,e);return a=a.updateChild(l,t),new Nu(n.writeTree_.set(i,a))}{const i=new nr(t),a=n.writeTree_.setTree(e,i);return new Nu(a)}}}function bR(n,e,t){let r=n;return bi(t,(i,a)=>{r=uE(r,_r(e,i),a)}),r}function _F(n,e){if(nn(e))return Nu.empty();{const t=n.writeTree_.setTree(e,new nr(null));return new Nu(t)}}function DR(n,e){return null!=wg(n,e)}function wg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Is(t.path,e)):null}function yF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(tr,(r,i)=>{e.push(new on(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new on(r,i.value))}),e}function Qh(n,e){if(nn(e))return n;{const t=wg(n,e);return new Nu(null!=t?new nr(t):n.writeTree_.subtree(e))}}function TR(n){return n.writeTree_.isEmpty()}function yy(n,e){return vF(yn(),n.writeTree_,e)}function vF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=vF(_r(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(_r(n,".priority"),r)),t}}function BD(n,e){return bF(e,n)}function zH(n,e){if(n.snap)return Pa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Pa(_r(n.path,t),e))return!0;return!1}function KH(n){return n.visible}function wF(n,e,t){let r=Nu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Pa(t,l)?(h=Is(t,l),r=uE(r,h,a.snap)):Pa(l,t)&&(h=Is(l,t),r=uE(r,yn(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Pa(t,l))h=Is(t,l),r=bR(r,h,a.children);else if(Pa(l,t))if(h=Is(l,t),nn(h))r=bR(r,yn(),a.children);else{const m=(0,k.DV)(a.children,tn(h));if(m){const v=m.getChild(Kn(h));r=uE(r,yn(),v)}}}}}return r}function EF(n,e,t,r,i){if(r||i){const a=Qh(n.visibleWrites,e);return!i&&TR(a)?t:i||null!=t||DR(a,yn())?yy(wF(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Pa(v.path,e)||Pa(e,v.path))},e),t||Zt.EMPTY_NODE):null}{const a=wg(n.visibleWrites,e);if(null!=a)return a;{const l=Qh(n.visibleWrites,e);return TR(l)?t:null!=t||DR(l,yn())?yy(l,t||Zt.EMPTY_NODE):null}}}function jD(n,e,t,r){return EF(n.writeTree,n.treePath,e,t,r)}function SR(n,e){return function ZH(n,e,t){let r=Zt.EMPTY_NODE;const i=wg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(tr,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Qh(n.visibleWrites,e);return t.forEachChild(tr,(l,h)=>{const m=yy(Qh(a,new An(l)),h);r=r.updateImmediateChild(l,m)}),yF(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return yF(Qh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function IF(n,e,t,r){return function YH(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=_r(e,t);if(DR(n.visibleWrites,a))return null;{const l=Qh(n.visibleWrites,a);return TR(l)?i.getChild(t):yy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function HD(n,e){return function JH(n,e){return wg(n.visibleWrites,e)}(n.writeTree,_r(n.treePath,e))}function AR(n,e,t){return function QH(n,e,t,r){const i=_r(e,t),a=wg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?yy(Qh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function CF(n,e){return bF(_r(n.treePath,e),n.writeTree)}function bF(n,e){return{treePath:n,writeTree:e}}class n${constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,rE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,nE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,gy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,rE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const DF=new class r${getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class xR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Yh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return AR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:vg(this.viewCache_),a=function t$(n,e,t,r,i,a){return function XH(n,e,t,r,i,a,l){let h;const m=Qh(n.visibleWrites,e),v=wg(m,yn());if(null!=v)h=v;else{if(null==t)return[];h=yy(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),R=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let V=R.getNext();for(;V&&D.length<i;)0!==S(V,r)&&D.push(V),V=R.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function TF(n,e,t,r,i,a){const l=e.eventCache;if(null!=HD(r,t))return e;{let h,m;if(nn(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=vg(e),S=SR(r,v instanceof Zt?v:Zt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=jD(r,vg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=tn(t);if(".priority"===v){(0,k.hu)(1===Zh(t),"Can't have a priority with additional path components");const D=l.getNode();m=e.serverCache.getNode();const S=IF(r,t,D,m);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Kn(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const R=IF(r,t,l.getNode(),m);S=null!=R?l.getNode().getImmediateChild(v).updateChild(D,R):l.getNode().getImmediateChild(v)}else S=AR(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,a):l.getNode()}}return aE(e,h,l.isFullyInitialized()||nn(t),n.filter.filtersNodes())}}function $D(n,e,t,r,i,a,l,h){const m=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(nn(t))v=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const V=m.getNode().updateChild(t,r);v=D.updateFullNode(m.getNode(),V,null)}else{const V=tn(t);if(!m.isCompleteForPath(t)&&Zh(t)>1)return e;const j=Kn(t),Ee=m.getNode().getImmediateChild(V).updateChild(j,r);v=".priority"===V?D.updatePriority(m.getNode(),Ee):D.updateChild(m.getNode(),V,Ee,j,DF,null)}const S=mF(e,v,m.isFullyInitialized()||nn(t),D.filtersNodes());return TF(n,S,t,i,new xR(i,S,a),h)}function MR(n,e,t,r,i,a,l){const h=e.eventCache;let m,v;const D=new xR(i,e,a);if(nn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=aE(e,v,!0,n.filter.filtersNodes());else{const S=tn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=aE(e,v,h.isFullyInitialized(),h.isFiltered());else{const R=Kn(t),V=h.getNode().getImmediateChild(S);let j;if(nn(R))j=r;else{const ce=D.getCompleteChild(S);j=null!=ce?".priority"===oR(R)&&ce.getChild(J1(R)).isEmpty()?ce:ce.updateChild(R,r):Zt.EMPTY_NODE}m=V.equals(j)?e:aE(e,n.filter.updateChild(h.getNode(),S,j,R,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function SF(n,e){return n.eventCache.isCompleteForChild(e)}function AF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function RR(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=nn(t)?r:new nr(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,R)=>{if(D.hasChild(S)){const j=AF(0,e.serverCache.getNode().getImmediateChild(S),R);m=$D(n,m,new An(S),j,i,a,l,h)}}),v.children.inorderTraversal((S,R)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===R.value;if(!D.hasChild(S)&&!V){const ce=AF(0,e.serverCache.getNode().getImmediateChild(S),R);m=$D(n,m,new An(S),ce,i,a,l,h)}}),m}class h${constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new gR(r.getIndex()),a=function TH(n){return n.loadsAllData()?new gR(n.getIndex()):n.hasLimit()?new DH(n):new iE(n)}(r);this.processor_=function i$(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(Zt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Zt.EMPTY_NODE,h.getNode(),null),D=new Yh(m,l.isFullyInitialized(),i.filtersNodes()),S=new Yh(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=VD(S,D),this.eventGenerator_=new LH(this.query_)}get query(){return this.query_}}function g$(n,e){const t=vg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!nn(e)&&!t.getImmediateChild(tn(e)).isEmpty())?t.getChild(e):null}function xF(n){return 0===n.eventRegistrations_.length}function MF(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function RF(n,e,t,r){e.type===ka.MERGE&&null!==e.source.queryId&&((0,k.hu)(vg(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(UD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function o$(n,e,t,r,i){const a=new n$;let l,h;if(t.type===ka.OVERWRITE){const v=t;v.source.fromUser?l=MR(n,e,v.path,v.snap,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!nn(v.path),l=$D(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===ka.MERGE){const v=t;v.source.fromUser?l=function u$(n,e,t,r,i,a,l){let h=e;return r.foreach((m,v)=>{const D=_r(t,m);SF(e,tn(D))&&(h=MR(n,h,D,v,i,a,l))}),r.foreach((m,v)=>{const D=_r(t,m);SF(e,tn(D))||(h=MR(n,h,D,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=RR(n,e,v.path,v.children,r,i,h,a))}else if(t.type===ka.ACK_USER_WRITE){const v=t;l=v.revert?function d$(n,e,t,r,i,a){let l;if(null!=HD(r,t))return e;{const h=new xR(r,e,i),m=e.eventCache.getNode();let v;if(nn(t)||".priority"===tn(t)){let D;if(e.serverCache.isFullyInitialized())D=jD(r,vg(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Zt,"serverChildren would be complete if leaf node"),D=SR(r,S)}v=n.filter.updateFullNode(m,D,a)}else{const D=tn(t);let S=AR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),v=null!=S?n.filter.updateChild(m,D,S,Kn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,Zt.EMPTY_NODE,Kn(t),h,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=jD(r,vg(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=HD(r,yn()),aE(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function l$(n,e,t,r,i,a,l){if(null!=HD(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(nn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return $D(n,e,t,m.getNode().getChild(t),i,a,h,l);if(nn(t)){let v=new nr(null);return m.getNode().forEachChild(Ol,(D,S)=>{v=v.set(new An(D),S)}),RR(n,e,t,v,i,a,h,l)}return e}{let v=new nr(null);return r.foreach((D,S)=>{const R=_r(t,D);m.isCompleteForPath(R)&&(v=v.set(D,m.getNode().getChild(R)))}),RR(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==ka.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function c$(n,e,t,r,i){const a=e.serverCache;return TF(n,mF(e,a.getNode(),a.isFullyInitialized()||nn(t),a.isFiltered()),t,r,DF,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function a$(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=UD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(hF(UD(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function s$(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,NF(n,a.changes,a.viewCache.eventCache.getNode(),null)}function NF(n,e,t,r){return function VH(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function bH(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),oE(n,i,"child_removed",e,r,t),oE(n,i,"child_added",e,r,t),oE(n,i,"child_moved",a,r,t),oE(n,i,"child_changed",e,r,t),oE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let GD,zD;class PF{constructor(){this.views=new Map}}function NR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),RF(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(RF(l,e,t,r));return a}}function kF(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=jD(t,i?r:null),m=!1;h?m=!0:r instanceof Zt?(h=SR(t,r),m=!1):(h=Zt.EMPTY_NODE,m=!1);const v=VD(new Yh(h,m,!1),new Yh(r,i,!1));return new h$(e,v)}return l}function OF(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Jh(n,e){let t=null;for(const r of n.views.values())t=t||g$(r,e);return t}function FF(n,e){return e._queryParams.loadsAllData()?WD(n):n.views.get(e._queryIdentifier)}function LF(n,e){return null!=FF(n,e)}function Xh(n){return null!=WD(n)}function WD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let D$=1;class VF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new nr(null),this.pendingWriteTree_=function e$(){return{visibleWrites:Nu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function PR(n,e,t,r,i){return function HH(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=uE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?vy(n,new yg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ef(n,e,t=!1){const r=function GH(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function WH(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&zH(h,r.path)?i=!1:Pa(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function qH(n){n.visibleWrites=wF(n.allWrites,KH,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=_F(n.visibleWrites,r.path):bi(r.children,m=>{n.visibleWrites=_F(n.visibleWrites,_r(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new nr(null);return null!=r.snap?a=a.set(yn(),!0):bi(r.children,l=>{a=a.set(new An(l),!0)}),vy(n,new LD(r.path,a,t))}return[]}function lE(n,e,t){return vy(n,new yg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function qD(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||LF(l,e))){const m=function I$(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=Xh(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(MF(v,t,r)),xF(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(MF(m,t,r)),xF(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!Xh(n)&&a.push(new(function v$(){return(0,k.hu)(GD,"Reference.ts has not been loaded"),GD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function w$(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(h=m.events,!i){const D=-1!==v.findIndex(R=>R._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(R,V)=>Xh(V));if(D&&!S){const R=n.syncPointTree_.subtree(a);if(!R.isEmpty()){const V=function N$(n){return n.fold((e,t,r)=>{if(t&&Xh(t))return[WD(t)];{let i=[];return t&&(i=OF(t)),bi(r,(a,l)=>{i=i.concat(l)}),i}})}(R);for(let j=0;j<V.length;++j){const ce=V[j],Ee=ce.query,Ze=HF(n,ce);n.listenProvider_.startListening(dE(Ee),cE(n,Ee),Ze.hashFn,Ze.onComplete)}}}!S&&v.length>0&&!r&&(D?n.listenProvider_.stopListening(dE(e),null):v.forEach(R=>{const V=n.queryToTagMap.get(ZD(R));n.listenProvider_.stopListening(dE(R),V)}))}!function P$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ZD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return h}function UF(n,e,t,r){const i=OR(n,r);if(null!=i){const a=FR(i),l=a.path,h=a.queryId,m=Is(l,e);return LR(n,l,new yg(IR(h),m,t))}return[]}function kR(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(R,V)=>{const j=Is(R,i);a=a||Jh(V,j),l=l||Xh(V)});let m,h=n.syncPointTree_.get(i);h?(l=l||Xh(h),a=a||Jh(h,yn())):(h=new PF,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?m=!0:(m=!1,a=Zt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,j)=>{const ce=Jh(j,yn());ce&&(a=a.updateImmediateChild(V,ce))}));const v=LF(h,e);if(!v&&!e._queryParams.loadsAllData()){const R=ZD(e);(0,k.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const V=function k$(){return D$++}();n.queryToTagMap.set(R,V),n.tagToQueryMap.set(V,R)}let S=function E$(n,e,t,r,i,a){const l=kF(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function m$(n,e){n.eventRegistrations_.push(e)}(l,t),function _$(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(tr,(a,l)=>{r.push(gy(a,l))}),t.isFullyInitialized()&&r.push(hF(t.getNode())),NF(n,r,t.getNode(),e)}(l,t)}(h,e,t,BD(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const R=FF(h,e);S=S.concat(function O$(n,e,t){const r=e._path,i=cE(n,e),a=HF(n,t),l=n.listenProvider_.startListening(dE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Xh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((v,D,S)=>{if(!nn(v)&&D&&Xh(D))return[WD(D).query];{let R=[];return D&&(R=R.concat(OF(D).map(V=>V.query))),bi(S,(V,j)=>{R=R.concat(j)}),R}});for(let v=0;v<m.length;++v){const D=m[v];n.listenProvider_.stopListening(dE(D),cE(n,D))}}return l}(n,e,R))}return S}function KD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=Jh(h,Is(l,e));if(v)return v});return EF(i,e,a,t,!0)}function vy(n,e){return BF(e,n.syncPointTree_,null,BD(n.pendingWriteTree_,yn()))}function BF(n,e,t,r){if(nn(n.path))return jF(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=Jh(i,yn()));let a=[];const l=tn(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const v=t?t.getImmediateChild(l):null,D=CF(r,l);a=a.concat(BF(h,m,v,D))}return i&&(a=a.concat(NR(i,n,r,t))),a}}function jF(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=Jh(i,yn()));let a=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,v=CF(r,l),D=n.operationForChild(l);D&&(a=a.concat(jF(D,h,m,v)))}),i&&(a=a.concat(NR(i,n,r,t))),a}function HF(n,e){const t=e.query,r=cE(n,t);return{hashFn:()=>(function f$(n){return n.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function x$(n,e,t){const r=OR(n,t);if(r){const i=FR(r),a=i.path,l=i.queryId,h=Is(a,e);return LR(n,a,new sE(IR(l),h))}return[]}(n,t._path,r):function A$(n,e){return vy(n,new sE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function Aj(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return qD(n,t,null,a)}}}}function cE(n,e){const t=ZD(e);return n.queryToTagMap.get(t)}function ZD(n){return n._path.toString()+"$"+n._queryIdentifier}function OR(n,e){return n.tagToQueryMap.get(e)}function FR(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new An(n.substr(0,e))}}function LR(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),NR(r,t,BD(n.pendingWriteTree_,e),null)}function dE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function b$(){return(0,k.hu)(zD,"Reference.ts has not been loaded"),zD}())(n._repo,n._path):n}class VR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new VR(t)}node(){return this.node_}}class UR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_r(this.path_,e);return new UR(this.syncTree_,t)}node(){return KD(this.syncTree_,this.path_)}}const $F=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?L$(n[".sv"],e,t):"object"==typeof n[".sv"]?V$(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},L$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},V$=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},GF=function(n,e,t,r){return jR(e,new UR(t,n),r)},BR=function(n,e,t){return jR(n,new VR(e),t)};function jR(n,e,t){const r=n.getPriority().val(),i=$F(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=$F(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new hy(h,Dr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new hy(i))),l.forEachChild(tr,(h,m)=>{const v=jR(m,e.getImmediateChild(h),t);v!==m&&(a=a.updateImmediateChild(h,v))}),a}}class HR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function YD(n,e){let t=e instanceof An?e:new An(e),r=n,i=tn(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new HR(i,r,a),t=Kn(t),i=tn(t)}return r}function Eg(n){return n.node.value}function $R(n,e){n.node.value=e,GR(n)}function WF(n){return n.node.childCount>0}function QD(n,e){bi(n.node.children,(t,r)=>{e(new HR(t,n,r))})}function zF(n,e,t,r){t&&!r&&e(n),QD(n,i=>{zF(i,e,!0,r)}),t&&r&&e(n)}function hE(n){return new An(null===n.parent?n.name:hE(n.parent)+"/"+n.name)}function GR(n){null!==n.parent&&function j$(n,e,t){const r=function U$(n){return void 0===Eg(n)&&!WF(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,GR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,GR(n))}(n.parent,n.name,n)}const H$=/[\[\].#$\/\u0000-\u001F\u007F]/,$$=/[\[\].#$\u0000-\u001F\u007F]/,WR=10485760,JD=function(n){return"string"==typeof n&&0!==n.length&&!H$.test(n)},qF=function(n){return"string"==typeof n&&0!==n.length&&!$$.test(n)},fE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!bD(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Fl=function(n,e,t,r){r&&void 0===e||pE((0,k.gK)(n,"value"),e,t)},pE=function(n,e,t){const r=t instanceof An?new sH(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+mg(r));if("function"==typeof e)throw new Error(n+"contains a function "+mg(r)+" with contents = "+e.toString());if(bD(e))throw new Error(n+"contains "+e.toString()+" "+mg(r));if("string"==typeof e&&e.length>WR/3&&(0,k.ug)(e)>WR)throw new Error(n+"contains a string greater than "+WR+" utf8 bytes "+mg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(bi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!JD(l)))throw new Error(n+" contains an invalid key ("+l+") "+mg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function oH(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),X1(n)})(r,l),pE(n,h,r),function aH(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+mg(r)+" in addition to actual children.")}},KF=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];bi(e,(l,h)=>{const m=new An(l);if(pE(i,h,_r(t,m)),".priority"===oR(m)&&!fE(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Jw(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!JD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(iH);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Pa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},zR=function(n,e,t){if(!t||void 0!==e){if(bD(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fE(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gE=function(n,e,t,r){if(!(r&&void 0===t||JD(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mE=function(n,e,t,r){if(!(r&&void 0===t||qF(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Oa=function(n,e){if(".info"===tn(e))throw new Error(n+" failed = Can't modify data under /.info/")},ZF=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!JD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qF(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class q${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function XD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!aR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function YF(n,e,t){XD(n,t),QF(n,r=>aR(r,e))}function So(n,e,t){XD(n,t),QF(n,r=>Pa(r,e)||Pa(e,r))}function QF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(K$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function K$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();pg&&Ci("event: "+t.toString()),cy(r)}}}const JF="repo_interrupt";class Y${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new q$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=FD(),this.transactionQueueTree_=new HR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XF(n){const t=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _E(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:XF(n)})}function eL(n,e,t,r,i){n.dataUpdateCount++;const a=new An(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,k.UI)(t,v=>Dr(v));l=function M$(n,e,t,r){const i=OR(n,r);if(i){const a=FR(i),l=a.path,h=a.queryId,m=Is(l,e),v=nr.fromObject(t);return LR(n,l,new _y(IR(h),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Dr(t);l=UF(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,k.UI)(t,v=>Dr(v));l=function S$(n,e,t){const r=nr.fromObject(t);return vy(n,new _y({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Dr(t);l=lE(n.serverSyncTree_,a,m)}let h=a;l.length>0&&(h=Ey(n,a)),So(n.eventQueue_,h,l)}function tL(n,e){qR(n,"connected",e),!1===e&&function tG(n){wy(n,"onDisconnectEvents");const e=_E(n),t=FD();vR(n.onDisconnect_,yn(),(i,a)=>{const l=GF(i,a,n.serverSyncTree_,e);my(t,i,l)});let r=[];vR(t,yn(),(i,a)=>{r=r.concat(lE(n.serverSyncTree_,i,a));const l=QR(n,i);Ey(n,l)}),n.onDisconnect_=FD(),So(n.eventQueue_,yn(),r)}(n)}function qR(n,e,t){const r=new An("/.info/"+e),i=Dr(t);n.infoData_.updateSnapshot(r,i);const a=lE(n.infoSyncTree_,r,i);So(n.eventQueue_,r,a)}function eT(n){return n.nextWriteId_++}function KR(n,e,t,r,i){wy(n,"set",{path:e.toString(),value:t,priority:r});const a=_E(n),l=Dr(t,r),h=KD(n.serverSyncTree_,e),m=BR(l,h,a),v=eT(n),D=PR(n.serverSyncTree_,e,m,v,!0);XD(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(R,V)=>{const j="ok"===R;j||Ji("set at "+e+" failed: "+R);const ce=ef(n.serverSyncTree_,v,!j);So(n.eventQueue_,e,ce),tf(0,i,R,V)});const S=QR(n,e);Ey(n,S),So(n.eventQueue_,S,[])}function nG(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&yR(n.onDisconnect_,e),tf(0,t,r,i)})}function nL(n,e,t,r){const i=Dr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&my(n.onDisconnect_,e,i),tf(0,r,a,l)})}function ZR(n,e,t){let r;r=".info"===tn(e._path)?qD(n.infoSyncTree_,e,t):qD(n.serverSyncTree_,e,t),YF(n.eventQueue_,e._path,r)}function rL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(JF)}function wy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ci(t,...e)}function tf(n,e,t,r){e&&cy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function YR(n,e,t){return KD(n.serverSyncTree_,e,t)||Zt.EMPTY_NODE}function tT(n,e=n.transactionQueueTree_){if(e||nT(n,e),Eg(e)){const t=sL(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function uG(n,e,t){const r=t.map(v=>v.currentWriteId),i=YR(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Is(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,v=>{wy(n,"transaction put response",{path:m.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let R=0;R<t.length;R++)t[R].status=2,D=D.concat(ef(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&S.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();nT(n,YD(n.transactionQueueTree_,e)),tT(n,n.transactionQueueTree_),So(n.eventQueue_,e,D);for(let R=0;R<S.length;R++)cy(S[R])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Ji("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}Ey(n,e)}},l)}(n,hE(e),t)}else WF(e)&&QD(e,t=>{tT(n,t)})}function Ey(n,e){const t=iL(n,e),r=hE(t);return function lG(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=Is(t,m.path);let S,D=!1;if((0,k.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(ef(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)D=!0,S="maxretry",i=i.concat(ef(n.serverSyncTree_,m.currentWriteId,!0));else{const R=YR(n,m.path,l);m.currentInputSnapshot=R;const V=e[h].update(R.val());if(void 0!==V){pE("transaction failed: Data returned ",V,m.path);let j=Dr(V);"object"==typeof V&&null!=V&&(0,k.r3)(V,".priority")||(j=j.updatePriority(R.getPriority()));const Ee=m.currentWriteId,Ze=_E(n),ot=BR(j,R,Ze);m.currentOutputSnapshotRaw=j,m.currentOutputSnapshotResolved=ot,m.currentWriteId=eT(n),l.splice(l.indexOf(Ee),1),i=i.concat(PR(n.serverSyncTree_,m.path,ot,m.currentWriteId,m.applyLocally)),i=i.concat(ef(n.serverSyncTree_,Ee,!0))}else D=!0,S="nodata",i=i.concat(ef(n.serverSyncTree_,m.currentWriteId,!0))}So(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}nT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)cy(r[h]);tT(n,n.transactionQueueTree_)}(n,sL(n,t),r),r}function iL(n,e){let t,r=n.transactionQueueTree_;for(t=tn(e);null!==t&&void 0===Eg(r);)r=YD(r,t),t=tn(e=Kn(e));return r}function sL(n,e){const t=[];return oL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function oL(n,e,t){const r=Eg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);QD(e,i=>{oL(n,i,t)})}function nT(n,e){const t=Eg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,$R(e,t.length>0?t:void 0)}QD(e,r=>{nT(n,r)})}function QR(n,e){const t=hE(iL(n,e)),r=YD(n.transactionQueueTree_,e);return function B$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{JR(n,i)}),JR(n,r),zF(r,i=>{JR(n,i)}),t}function JR(n,e){const t=Eg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(ef(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?$R(e,void 0):t.length=a+1,So(n.eventQueue_,hE(e),i);for(let l=0;l<r.length;l++)cy(r[l])}}const XR=function(n,e){const t=hG(n),r=t.namespace;return"firebase.com"===t.domain&&Pl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Pl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ji("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new eR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new An(t.pathString)}},hG=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function cG(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,S)));const R=function dG(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ji(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in R&&(a=R.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class aL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class uL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class eN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class lL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return nG(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Oa("OnDisconnect.remove",this._path);const e=new k.BH;return nL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Oa("OnDisconnect.set",this._path),Fl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return nL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Oa("OnDisconnect.setWithPriority",this._path),Fl("OnDisconnect.setWithPriority",e,this._path,!1),zR("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function rG(n,e,t,r,i){const a=Dr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&my(n.onDisconnect_,e,a),tf(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Oa("OnDisconnect.update",this._path),KF("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function iG(n,e,t,r){if((0,k.xb)(t))return Ci("onDisconnect().update() called with empty data.  Don't do anything."),void tf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&bi(t,(l,h)=>{const m=Dr(h);my(n.onDisconnect_,_r(e,l),m)}),tf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ws{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return nn(this._path)?null:oR(this._path)}get ref(){return new Fa(this._repo,this._path)}get _queryIdentifier(){const e=pF(this._queryParams),t=QM(e);return"{}"===t?"default":t}get _queryObject(){return pF(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof Ws))return!1;const t=this._repo===e._repo,r=aR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function rH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function rT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function nf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ol){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Xc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==kl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===tr){if(null!=e&&!fE(e)||null!=t&&!fE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof hR||n.getIndex()===fR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function iT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fa extends Ws{constructor(e,t){super(e,t,new PD,!1)}get parent(){const e=J1(this._path);return null===e?null:new Fa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ig{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new An(e),r=Cg(this.ref,e);return new Ig(this._node.getChild(t),r,tr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ig(i,Cg(this.ref,r),tr)))}hasChild(e){const t=new An(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function cL(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Cg(n._root,e):n._root}function dL(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=XR(e,n._repo.repoInfo_.nodeAdmin);ZF("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Pl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),cL(n,t.path.toString())}function Cg(n,e){return null===tn((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mE("child","path",t,!1)):mE("child","path",e,!1),new Fa(n._repo,_r(n._path,e));var t}function tN(n,e){n=(0,k.m9)(n),Oa("set",n._path),Fl("set",e,n._path,!1);const t=new k.BH;return KR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function _G(n,e){KF("update",e,n._path,!1);const t=new k.BH;return function eG(n,e,t,r){wy(n,"update",{path:e.toString(),value:t});let i=!0;const a=_E(n),l={};if(bi(t,(h,m)=>{i=!1,l[h]=GF(_r(e,h),Dr(m),n.serverSyncTree_,a)}),i)Ci("update() called with empty data.  Don't do anything."),tf(0,r,"ok",void 0);else{const h=eT(n),m=function T$(n,e,t,r){!function $H(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=bR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=nr.fromObject(t);return vy(n,new _y({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);XD(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||Ji("update at "+e+" failed: "+v);const R=ef(n.serverSyncTree_,h,!S),V=R.length>0?Ey(n,e):e;So(n.eventQueue_,V,R),tf(0,r,v,D)}),bi(t,v=>{const D=QR(n,_r(e,v));Ey(n,D)}),So(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function yG(n){n=(0,k.m9)(n);const e=new eN(()=>{}),t=new yE(e);return function X$(n,e,t){const r=function R$(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=Is(v,t);r=r||Jh(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Jh(i,yn()):(i=new PF,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Yh(r,!0,!1):null;return function p$(n){return UD(n.viewCache_)}(kF(i,e,BD(n.pendingWriteTree_,e._path),a?l.getNode():Zt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Dr(i).withIndex(e._queryParams.getIndex());let l;if(kR(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=lE(n.serverSyncTree_,e._path,a);else{const h=cE(n.serverSyncTree_,e);l=UF(n.serverSyncTree_,e._path,a,h)}return So(n.eventQueue_,e._path,l),qD(n.serverSyncTree_,e,t,null,!0),a},i=>(wy(n,"get for query "+(0,k.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Ig(r,new Fa(n._repo,n._path),n._queryParams.getIndex()))}class yE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new aL("value",this,new Ig(e.snapshotNode,new Fa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uL(this,e,t):null}matches(e){return e instanceof yE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class sT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uL(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Cg(new Fa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new aL(e.type,this,new Ig(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof sT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function vE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(D,S)=>{ZR(n._repo,n,h),m(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new eN(t,a||void 0),h="value"===e?new yE(l):new sT(e,l);return function sG(n,e,t){let r;r=".info"===tn(e._path)?kR(n.infoSyncTree_,e,t):kR(n.serverSyncTree_,e,t),YF(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>ZR(n._repo,n,h)}function nN(n,e,t,r){return vE(n,"value",e,t,r)}function hL(n,e,t,r){return vE(n,"child_added",e,t,r)}function fL(n,e,t,r){return vE(n,"child_changed",e,t,r)}function pL(n,e,t,r){return vE(n,"child_moved",e,t,r)}function gL(n,e,t,r){return vE(n,"child_removed",e,t,r)}function mL(n,e,t){let r=null;const i=t?new eN(t):null;"value"===e?r=new yE(i):e&&(r=new sT(e,i)),ZR(n._repo,n,r)}class Pu{}class _L extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("endAt",this._value,e._path,!0);const t=_R(e._queryParams,this._value,this._key);if(iT(t),nf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ws(e._repo,e._path,t,e._orderByCalled)}}class wG extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("endBefore",this._value,e._path,!1);const t=function MH(n,e,t){let r,i;return n.index_===Ol?("string"==typeof e&&(e=dF(e)),i=_R(n,e,t)):(r=null==t?Xc:dF(t),i=_R(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(iT(t),nf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ws(e._repo,e._path,t,e._orderByCalled)}}class yL extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("startAt",this._value,e._path,!0);const t=mR(e._queryParams,this._value,this._key);if(iT(t),nf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ws(e._repo,e._path,t,e._orderByCalled)}}class CG extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Fl("startAfter",this._value,e._path,!1);const t=function xH(n,e,t){let r;if(n.index_===Ol)"string"==typeof e&&(e=cF(e)),r=mR(n,e,t);else{let i;i=null==t?kl:cF(t),r=mR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(iT(t),nf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ws(e._repo,e._path,t,e._orderByCalled)}}class DG extends Pu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ws(e._repo,e._path,function SH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class SG extends Pu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ws(e._repo,e._path,function AH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class xG extends Pu{constructor(e){super(),this._path=e}_apply(e){rT(e,"orderByChild");const t=new An(this._path);if(nn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new hR(t),i=kD(e._queryParams,r);return nf(i),new Ws(e._repo,e._path,i,!0)}}class RG extends Pu{_apply(e){rT(e,"orderByKey");const t=kD(e._queryParams,Ol);return nf(t),new Ws(e._repo,e._path,t,!0)}}class PG extends Pu{_apply(e){rT(e,"orderByPriority");const t=kD(e._queryParams,tr);return nf(t),new Ws(e._repo,e._path,t,!0)}}class OG extends Pu{_apply(e){rT(e,"orderByValue");const t=kD(e._queryParams,fR);return nf(t),new Ws(e._repo,e._path,t,!0)}}class LG extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Fl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _L(this._value,this._key)._apply(new yL(this._value,this._key)._apply(e))}}function ku(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function y$(n){(0,k.hu)(!GD,"__referenceConstructor has already been defined"),GD=n})(Fa),function C$(n){(0,k.hu)(!zD,"__referenceConstructor has already been defined"),zD=n}(Fa);const rN={};function wL(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Pl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ci("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=XR(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${h.namespace}`,l=XR(a,i),h=l.repoInfo):m=!l.repoInfo.secure;const D=i&&m?new Qw(Qw.OWNER):new Nj(n.name,n.options,e);ZF("Invalid Firebase Database URL",l),nn(l.path)||Pl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function HG(n,e,t,r){let i=rN[e.name];i||(i={},rN[e.name]=i);let a=i[n.toURLString()];return a&&Pl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Y$(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new Rj(n.name,t));return new GG(S,n)}class GG{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Q$(n,e,t){if(n.stats_=rR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new OD(n.repoInfo_,(r,i,a,l)=>{eL(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>tL(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new _g(n.repoInfo_,e,(r,i,a,l)=>{eL(n,r,i,a,l)},r=>{tL(n,r)},r=>{!function J$(n,e){bi(e,(t,r)=>{qR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Oj(n,e){const t=n.toString();return nR[t]||(nR[t]=e()),nR[t]}(n.repoInfo_,()=>new FH(n.stats_,n.server_)),n.infoData_=new RH,n.infoSyncTree_=new VF({startListening:(r,i,a,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=lE(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),qR(n,"connected",!1),n.serverSyncTree_=new VF({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,m)=>{const v=l(h,m);So(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fa(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function jG(n,e){const t=rN[e];(!t||t[n.key]!==n)&&Pl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),rL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Pl("Cannot call "+e+" on a deleted database.")}}function EL(){B1.IS_TRANSPORT_INITIALIZED&&Ji("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function WG(){EL(),Kh.forceDisallow()}function zG(){EL(),dy.forceDisallow(),Kh.forceAllow()}function YG(n,e){w1(n,e)}const JG={".sv":"timestamp"};class t3{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}_g.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},_g.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function QG(n){g1(Mi.SDK_VERSION),(0,Mi._registerComponent)(new Vs.wA("database",(e,{instanceIdentifier:t})=>wL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Mi.registerVersion)(f1,"0.13.6",n),(0,Mi.registerVersion)(f1,"0.13.6","esm2017")}();const s3=new _a.Yd("@firebase/database-compat"),IL=function(n){s3.warn("FIREBASE WARNING: "+n)};class u3{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,IL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class l3{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class rf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),mE("DataSnapshot.child","path",e,!1),new rf(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new rf(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ao(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Pi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Pi.getCancelAndContextArgs_("Query.on",r,i),h=(v,D)=>{t.call(l.context,new rf(this.database,v),D)};h.userCallback=t,h.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return nN(this._delegate,h,m),t;case"child_added":return hL(this._delegate,h,m),t;case"child_removed":return gL(this._delegate,h,m),t;case"child_changed":return fL(this._delegate,h,m),t;case"child_moved":return pL(this._delegate,h,m),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,mL(this._delegate,e,i)}else mL(this._delegate,e)}get(){return yG(this._delegate).then(e=>new rf(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Pi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(v,D)=>{const S=new rf(this.database,v);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":nN(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":hL(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":gL(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":fL(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":pL(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Pi(this.database,ku(this._delegate,function TG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new DG(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Pi(this.database,ku(this._delegate,function AG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new SG(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Pi(this.database,ku(this._delegate,function MG(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mE("orderByChild","path",n,!1),new xG(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Pi(this.database,ku(this._delegate,function NG(){return new RG}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Pi(this.database,ku(this._delegate,function kG(){return new PG}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Pi(this.database,ku(this._delegate,function FG(){return new OG}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Pi(this.database,ku(this._delegate,function IG(n=null,e){return gE("startAt","key",e,!0),new yL(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Pi(this.database,ku(this._delegate,function bG(n,e){return gE("startAfter","key",e,!0),new CG(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Pi(this.database,ku(this._delegate,function vG(n,e){return gE("endAt","key",e,!0),new _L(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Pi(this.database,ku(this._delegate,function EG(n,e){return gE("endBefore","key",e,!0),new wG(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Pi(this.database,ku(this._delegate,function VG(n,e){return gE("equalTo","key",e,!0),new LG(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Pi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ao(this.database,new Fa(this._delegate._repo,this._delegate._path))}}class Ao extends Pi{constructor(e,t){super(e,new Ws(t._repo,t._path,new PD,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ao(this.database,Cg(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ao(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Ao(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=tN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,IL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Oa("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=_G(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function mG(n,e,t){if(Oa("setWithPriority",n._path),Fl("setWithPriority",e,n._path,!1),zR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return KR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function pG(n){return Oa("remove",n._path),tN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function n3(n,e,t){var r;if(n=(0,k.m9)(n),Oa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,h=nN(n,()=>{});return function aG(n,e,t,r,i,a){wy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:_1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=YR(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{pE("transaction failed: Data returned ",m,l.path),l.status=0;const v=YD(n.transactionQueueTree_,e),D=Eg(v)||[];let S;D.push(l),$R(v,D),"object"==typeof m&&null!==m&&(0,k.r3)(m,".priority")?(S=(0,k.DV)(m,".priority"),(0,k.hu)(fE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(KD(n.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();const R=_E(n),V=Dr(m,S),j=BR(V,h,R);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=j,l.currentWriteId=eT(n);const ce=PR(n.serverSyncTree_,e,j,l.currentWriteId,l.applyLocally);So(n.eventQueue_,e,ce),tT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,D)=>{let S=null;m?a.reject(m):(S=new Ig(D,new Fa(n._repo,n._path),tr),a.resolve(new t3(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new l3(a.committed,new rf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function gG(n,e){n=(0,k.m9)(n),Oa("setPriority",n._path),zR("setPriority",e,!1);const t=new k.BH;return KR(n._repo,_r(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function fG(n,e){n=(0,k.m9)(n),Oa("push",n._path),Fl("push",e,n._path,!0);const t=XF(n._repo),r=CH(t),i=Cg(n,r),a=Cg(n,r);let l;return l=null!=e?tN(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Ao(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Ao(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Oa("Reference.onDisconnect",this._delegate._path),new u3(new lL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class wE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:WG,forceLongPolling:zG}}useEmulator(e,t,r={}){!function qG(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Pl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Pl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Qw(Qw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new Qw(l)}!function BG(n,e,t,r){n.repoInfo_=new eR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Ao){const t=dL(this._delegate,e.toString());return new Ao(this,t)}{const t=cL(this._delegate,e);return new Ao(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=dL(this._delegate,e);return new Ao(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function KG(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),rL(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function ZG(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function oG(n){n.persistentConnection_&&n.persistentConnection_.resume(JF)}(n._repo)}(this._delegate)}}wE.ServerValue={TIMESTAMP:function XG(){return JG}(),increment:n=>function e3(n){return{".sv":{increment:n}}}(n)};var d3=Object.freeze({__proto__:null,initStandalone:function c3({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){g1(t);const l=new Vs.zt("auth-internal",new Vs.H0("database-standalone"));return l.setComponent(new Vs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new wE(wL(n,l,void 0,e,a),n),namespace:i}}});const h3=wE.ServerValue;function CL(n){return null==n}function bL(n){return"function"==typeof n.set}function DL(n,e){return bL(e)?e:n.ref(e)}function TL(n,e){if(function p3(n){return"string"==typeof n}(n))return e.stringCase();if(bL(n))return e.firebaseCase();if(function g3(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function EE(n,e,t="on",r=km.z){return new dr.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,it.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,_m.B)())}function SL(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function y3(n,e){const{payload:t,prevKey:r,key:i}=e,a=SL(n,i),l=function _3(n,e){if(CL(e))return 0;{const t=SL(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function AL(n){return(CL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function xL(n,e,t){return function m3(n,e,t){return EE(n,"value","once",t).pipe($n(r=>{const i=[at(r)];return e.forEach(a=>i.push(EE(n,a,"on",t))),(0,mm.T)(...i).pipe(xt(y3,[]))}),Uv())}(n,e=AL(e),t)}function ML(n,e,t){const r=(e=AL(e)).map(i=>EE(n,i,"on",t));return(0,mm.T)(...r)}function RL(n,e){return function(r,i){return TL(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function I3(n){return function(t){return t?TL(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function NL(n,e){return function(){return EE(n,"value","on",e)}}!function f3(n){n.INTERNAL.registerComponent(new Vs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new wE(i,r)},"PUBLIC").setServiceProps({Reference:Ao,Query:Pi,Database:wE,DataSnapshot:rf,enableLogging:YG,INTERNAL:d3,ServerValue:h3}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}(Qd.Z);const D3=new f.OlP("angularfire2.realtimeDatabaseURL"),T3=new f.OlP("angularfire2.database.use-emulator");let S3=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,R,V,j,ce,Ee){this.schedulers=h;const Ze=m,ot=(0,Fr.on)(t,l,r);v&&tp(ot,l,D,R,V,j,S,ce),this.database=(0,Fr.cc)(`${ot.name}.database.${i}`,"AngularFireDatabase",ot.name,()=>{const lt=l.runOutsideAngular(()=>ot.database(i||void 0));return Ze&&lt.useEmulator(...Ze),lt},[Ze])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>DL(this.database,t));let a=i;return r&&(a=r(i)),function C3(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:RL(r,"update"),set:RL(r,"set"),push:i=>r.push(i),remove:I3(r),snapshotChanges:i=>xL(n,i,t).pipe(bn.iC),stateChanges:i=>ML(n,i,t).pipe(bn.iC),auditTrail:i=>function v3(n,e,t){return function E3(n,e,t){return function w3(n,e){return EE(n,"value","on",e).pipe((0,it.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function vj(...n){const e=(0,ji.jO)(n);return(0,Qn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,oi.Xf)(n[m]).subscribe((0,kn.x)(r,v=>{a[m]=v,!h&&!l[m]&&(l[m]=!0,(h=l.every(lo.y))&&(l=null))},yj.Z));t.subscribe((0,kn.x)(r,m=>{if(h){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,it.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function wj(n){return(0,Qn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,kn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,it.U)(i=>i.actions))}(n,ML(n,e).pipe(xt((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(bn.iC),valueChanges:(i,a)=>xL(n,i,t).pipe((0,it.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),bn.iC)}}(a,this)}object(t){return function b3(n,e){return{query:n,snapshotChanges:()=>NL(n,e.schedulers.outsideAngular)().pipe(bn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>NL(n,e.schedulers.outsideAngular)().pipe(bn.iC,(0,it.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>DL(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fr.Dh),f.LFG(Fr.xv,8),f.LFG(D3,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(T3,8),f.LFG(Ea,8),f.LFG(Lv,8),f.LFG(Vv,8),f.LFG(Zd,8),f.LFG(ep,8),f.LFG(Yd,8),f.LFG(ZI,8),f.LFG(Kd,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),A3=(()=>{class n{constructor(){KI.Z.registerVersion("angularfire",bn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[S3]}),n})();const PL="firebasestorage.googleapis.com",kL="storageBucket";class Pr extends k.ZR{constructor(e,t){super(iN(e),`Firebase Storage: ${t} (${iN(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pr.prototype)}_codeEquals(e){return iN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function iN(n){return"storage/"+n}function sN(){return new Pr("unknown","An unknown error occurred, please check the error payload for server response.")}function OL(){return new Pr("canceled","User canceled the upload/download.")}function FL(){return new Pr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Iy(n){return new Pr("invalid-argument",n)}function LL(){return new Pr("app-deleted","The Firebase app was deleted.")}function VL(n){return new Pr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function IE(n,e){return new Pr("invalid-format","String does not match format '"+n+"': "+e)}function CE(n){throw new Pr("internal-error","Internal error: "+n)}class Xi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Xi.makeFromUrl(e,t)}catch{return new Xi(e,"")}if(""===r.path)return r;throw function U3(n){return new Pr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(ct){ct.path_=decodeURIComponent(ct.path)}const S=t.replace(/[.]/g,"\\."),lt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ct){"/"===ct.path.charAt(ct.path.length-1)&&(ct.path_=ct.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===PL?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let ct=0;ct<lt.length;ct++){const Rt=lt[ct],$t=Rt.regex.exec(e);if($t){let Fu=$t[Rt.indices.path];Fu||(Fu=""),r=new Xi($t[Rt.indices.bucket],Fu),Rt.postModify(r);break}}if(null==r)throw function V3(n){return new Pr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class $3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function oT(n){return"string"==typeof n||n instanceof String}function UL(n){return oN()&&n instanceof Blob}function oN(){return typeof Blob<"u"}function aN(n,e,t,r){if(r<e)throw Iy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Iy(`Invalid value for '${n}'. Expected ${t} or less.`)}function td(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function BL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var sf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(sf||(sf={})),sf))();class Z3{constructor(e,t,r,i,a,l,h,m,v,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,V)=>{this.resolve_=R,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function z3(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==h){const m=sN();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?LL():OL():function L3(){return new Pr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new aT(!1,null,!0)):this.backoffId_=function G3(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function m(){return 2===h}let v=!1;function D(...Ee){v||(v=!0,e.apply(null,Ee))}function S(Ee){i=setTimeout(()=>{i=null,n(V,m())},Ee)}function R(){a&&clearTimeout(a)}function V(Ee,...Ze){if(v)return void R();if(Ee)return R(),void D.call(null,Ee,...Ze);if(m()||l)return R(),void D.call(null,Ee,...Ze);let lt;r<64&&(r*=2),1===h?(h=2,lt=0):lt=1e3*(r+Math.random()),S(lt)}let j=!1;function ce(Ee){j||(j=!0,R(),!v&&(null!==i?(Ee||(h=2),clearTimeout(i),S(0)):Ee||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new aT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===sf.NO_ERROR,m=a.getStatus();if(!h||this.isRetryStatusCode_(m)){const D=a.getErrorCode()===sf.ABORT;return void r(!1,new aT(!1,null,D))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new aT(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function W3(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class aT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function nW(...n){const e=function tW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(oN())return new Blob(n);throw new Pr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const xo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class uN{constructor(e,t){this.data=e,this.contentType=t||null}}function lN(n,e){switch(n){case xo.RAW:return new uN(jL(e));case xo.BASE64:case xo.BASE64URL:return new uN(HL(n,e));case xo.DATA_URL:return new uN(function oW(n){const e=new $L(n);return e.base64?HL(xo.BASE64,e.rest):function sW(n){let e;try{e=decodeURIComponent(n)}catch{throw IE(xo.DATA_URL,"Malformed data URL.")}return jL(e)}(e.rest)}(e),function aW(n){return new $L(n).contentType}(e))}throw sN()}function jL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function HL(n,e){switch(n){case xo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw IE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case xo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw IE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function iW(n){return atob(n)}(e)}catch{throw IE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class $L{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw IE(xo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function uW(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ll{constructor(e,t){let r=0,i="";UL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(UL(this.data_)){const i=function rW(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ll(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ll(r,!0)}}static getBlob(...e){if(oN()){const t=e.map(r=>r instanceof Ll?r.data_:r);return new Ll(nW.apply(null,t))}{const t=e.map(l=>oT(l)?lN(xo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Ll(i,!0)}}uploadData(){return this.data_}}function cN(n){let e;try{e=JSON.parse(n)}catch{return null}return function K3(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function GL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function dW(n,e){return e}class Cs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||dW}}let uT=null;function bE(){if(uT)return uT;const n=[];n.push(new Cs("bucket")),n.push(new Cs("generation")),n.push(new Cs("metageneration")),n.push(new Cs("name","fullPath",!0));const t=new Cs("name");t.xform=function e(a,l){return function hW(n){return!oT(n)||n.length<2?n:GL(n)}(l)},n.push(t);const i=new Cs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Cs("timeCreated")),n.push(new Cs("updated")),n.push(new Cs("md5Hash",null,!0)),n.push(new Cs("cacheControl",null,!0)),n.push(new Cs("contentDisposition",null,!0)),n.push(new Cs("contentEncoding",null,!0)),n.push(new Cs("contentLanguage",null,!0)),n.push(new Cs("contentType",null,!0)),n.push(new Cs("metadata","customMetadata",!0)),uT=n,uT}function WL(n,e,t){const r=cN(e);return null===r?null:function pW(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function fW(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Xi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function dN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const zL="prefixes";class Vl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ul(n){if(!n)throw sN()}function lT(n,e){return function t(r,i){const a=WL(n,i,e);return Ul(null!==a),a}}function Cy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function O3(){return new Pr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function k3(){return new Pr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function P3(n){return new Pr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function F3(n){return new Pr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function DE(n){const e=Cy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function N3(n){return new Pr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function KL(n,e,t){const i=td(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Vl(i,"GET",lT(n,t),l);return h.errorHandler=DE(e),h}function wW(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=td(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new Vl(h,"GET",function yW(n,e){return function t(r,i){const a=function _W(n,e,t){const r=cN(t);return null===r?null:function mW(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[zL])for(const i of t[zL]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Xi(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Xi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Ul(null!==a),a}}(n,e.bucket),v);return D.urlParams=a,D.errorHandler=Cy(e),D}function YL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function bW(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class cT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function hN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ul(!1)}return Ul(!!t&&-1!==(e||["active"]).indexOf(t)),t}const AW={STATE_CHANGED:"state_changed"},bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fN(n){switch(n){case"running":case"pausing":case"canceling":return bs.RUNNING;case"paused":return bs.PAUSED;case"success":return bs.SUCCESS;case"canceled":return bs.CANCELED;default:return bs.ERROR}}class xW{constructor(e,t,r){if(function q3(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function by(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class RW extends class MW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw CE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw CE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw CE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw CE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw CE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ou(){return new RW}class eV{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=bE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function DW(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=YL(e,r,i),h={name:l.fullPath},m=td(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=dN(l,t),j=new Vl(m,"POST",function V(ce){let Ee;hN(ce);try{Ee=ce.getResponseHeader("X-Goog-Upload-URL")}catch{Ul(!1)}return Ul(oT(Ee)),Ee},n.maxUploadRetryTime);return j.urlParams=h,j.headers=D,j.body=S,j.errorHandler=Cy(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ou,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function TW(n,e,t,r){const m=new Vl(t,"POST",function a(v){const D=hN(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ul(!1)}S||Ul(!1);const R=Number(S);return Ul(!isNaN(R)),new cT(R,r.size(),"final"===D)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Cy(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ou,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new cT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function SW(n,e,t,r,i,a,l,h){const m=new cT(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function j3(){return new Pr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let D=v;i>0&&(D=Math.min(D,i));const S=m.current,j={"X-Goog-Upload-Command":D===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},ce=r.slice(S,S+D);if(null===ce)throw FL();const lt=new Vl(t,"POST",function Ee(ct,Rt){const $t=hN(ct,["active","final"]),Tr=m.current+D,Fu=r.size();let mN;return mN="final"===$t?lT(e,a)(ct,Rt):null,new cT(Tr,Fu,"final"===$t,mN)},e.maxUploadRetryTime);return lt.headers=j,lt.body=ce.uploadData(),lt.progressCallback=h||null,lt.errorHandler=Cy(n),lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Ou,i,a);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=KL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ou,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function QL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let lt="";for(let ct=0;ct<2;ct++)lt+=Math.random().toString().slice(2);return lt}();l["Content-Type"]="multipart/related; boundary="+m;const v=YL(e,r,i),D=dN(v,t),V=Ll.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===V)throw FL();const j={name:v.fullPath},ce=td(a,n.host,n._protocol),Ze=n.maxUploadRetryTime,ot=new Vl(ce,"POST",lT(n,t),Ze);return ot.urlParams=j,ot.headers=l,ot.body=V.uploadData(),ot.errorHandler=Cy(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ou,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=OL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=fN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new xW(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(fN(this._state)){case bs.SUCCESS:by(this._resolve.bind(null,this.snapshot))();break;case bs.CANCELED:case bs.ERROR:by(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(fN(this._state)){case bs.RUNNING:case bs.PAUSED:e.next&&by(e.next.bind(e,this.snapshot))();break;case bs.SUCCESS:e.complete&&by(e.complete.bind(e))();break;default:e.error&&by(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class bg{constructor(e,t){this._service=e,this._location=t instanceof Xi?t:Xi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new bg(e,t)}get root(){const e=new Xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GL(this._location.path)}get storage(){return this._service}get parent(){const e=function lW(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Xi(this._location.bucket,e);return new bg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw VL(e)}}function nV(n,e,t){return pN.apply(this,arguments)}function pN(){return pN=(0,be.Z)(function*(n,e,t){const i=yield rV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield nV(n,e,i.nextPageToken))}),pN.apply(this,arguments)}function rV(n,e){null!=e&&"number"==typeof e.maxResults&&aN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=wW(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ou)}function $W(n){n._throwIfRoot("getDownloadURL");const e=function EW(n,e,t){const i=td(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Vl(i,"GET",function vW(n,e){return function t(r,i){const a=WL(n,i,e);return Ul(null!==a),function gW(n,e,t,r){const i=cN(e);if(null===i||!oT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return td("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+BL({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=DE(e),h}(n.storage,n._location,bE());return n.storage.makeRequestWithTokens(e,Ou).then(t=>{if(null===t)throw function H3(){return new Pr("no-download-url","The given file does not have any download URLs.")}();return t})}function iV(n,e){const t=function cW(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Xi(n._location.bucket,t);return new bg(n.storage,r)}function sV(n,e){if(n instanceof gN){const t=n;if(null==t._bucket)throw function B3(){return new Pr("no-default-bucket","No default bucket found. Did you set the '"+kL+"' property when initializing the app?")}();const r=new bg(t,t._bucket);return null!=e?sV(r,e):r}return void 0!==e?iV(n,e):n}function qW(n,e){if(e&&function WW(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof gN)return function zW(n,e){return new bg(n,e)}(n,e);throw Iy("To use ref(service, url), the first argument must be a Storage instance.")}return sV(n,e)}function oV(n,e){const t=e?.[kL];return null==t?null:Xi.makeFromBucketSpec(t,n)}class gN{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=PL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Xi.makeFromBucketSpec(i,this._host):oV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Xi.makeFromBucketSpec(this._url,e):oV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new $3(LL());{const a=function eW(n,e,t,r,i,a){const l=BL(n.urlParams),h=n.url+l,m=Object.assign({},n.headers);return function J3(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function Y3(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function Q3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,a),function X3(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new Z3(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const aV="@firebase/storage";function cV(n,e){return qW(n=(0,k.m9)(n),e)}function iz(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new gN(t,r,i,e,Mi.SDK_VERSION)}!function sz(){(0,Mi._registerComponent)(new Vs.wA("storage",iz,"PUBLIC").setMultipleInstances(!0)),(0,Mi.registerVersion)(aV,"0.9.9",""),(0,Mi.registerVersion)(aV,"0.9.9","esm2017")}();class dT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class dV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new dT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new dT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new dT(l,this,this._ref)):{next:t.next?l=>t.next(new dT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class hV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new nd(e,this._service))}get items(){return this._delegate.items.map(e=>new nd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class nd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function nz(n,e){return iV(n,e)}(this._delegate,e);return new nd(t,this.storage)}get root(){return new nd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new nd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new dV(function ZW(n,e,t){return function VW(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new eV(n,new Ll(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=xo.RAW,r){this._throwIfRoot("putString");const i=lN(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new dV(new eV(this._delegate,new Ll(i.data,!0),a),this)}listAll(){return function XW(n){return function BW(n){const e={prefixes:[],items:[]};return nV(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new hV(e,this.storage))}list(e){return function JW(n,e){return rV(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new hV(t,this.storage))}getMetadata(){return function YW(n){return function jW(n){n._throwIfRoot("getMetadata");const e=KL(n.storage,n._location,bE());return n.storage.makeRequestWithTokens(e,Ou)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function QW(n,e){return function HW(n,e){n._throwIfRoot("updateMetadata");const t=function IW(n,e,t,r){const a=td(e.fullServerUrl(),n.host,n._protocol),h=dN(t,r),v=n.maxOperationRetryTime,D=new Vl(a,"PATCH",lT(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=DE(e),D}(n.storage,n._location,e,bE());return n.storage.makeRequestWithTokens(t,Ou)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function ez(n){return $W(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function tz(n){return function GW(n){n._throwIfRoot("deleteObject");const e=function CW(n,e){const r=td(e.fullServerUrl(),n.host,n._protocol),h=new Vl(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=DE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ou)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw VL(e)}}class fV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(pV(e))throw Iy("ref() expected a child path but got a URL, use refFromURL instead.");return new nd(cV(this._delegate,e),this)}refFromURL(e){if(!pV(e))throw Iy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xi.makeFromUrl(e,this._delegate.host)}catch{throw Iy("refFromUrl() expected a valid full URL but got an invalid one.")}return new nd(cV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function rz(n,e,t,r={}){!function KW(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function pV(n){return/^[A-Za-z]+:\/\//.test(n)}function lz(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new fV(t,r)}function gV(n){const e=function dz(n){return new dr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function x3(n,e=km.z){return(0,Qn.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);h()}t.subscribe((0,kn.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,it.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function hT(n){return{getDownloadURL:()=>at(void 0).pipe(bn.fc,$n(()=>n.getDownloadURL()),bn.iC),getMetadata:()=>at(void 0).pipe(bn.fc,$n(()=>n.getMetadata()),bn.iC),delete:()=>(0,en.D)(n.delete()),child:e=>hT(n.child(e)),updateMetadata:e=>(0,en.D)(n.updateMetadata(e)),put:(e,t)=>gV(n.put(e,t)),putString:(e,t,r)=>gV(n.putString(e,t,r)),list:e=>(0,en.D)(n.list(e)),listAll:()=>(0,en.D)(n.listAll())}}!function cz(n){const e={TaskState:bs,TaskEvent:AW,StringFormat:xo,Storage:fV,Reference:nd};n.INTERNAL.registerComponent(new Vs.wA("storage-compat",lz,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Qd.Z);const hz=new f.OlP("angularfire2.storageBucket"),fz=new f.OlP("angularfire2.storage.maxUploadRetryTime"),pz=new f.OlP("angularfire2.storage.maxOperationRetryTime"),gz=new f.OlP("angularfire2.storage.use-emulator");let mz=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S){const R=(0,Fr.on)(t,l,r);this.storage=(0,Fr.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const V=l.runOutsideAngular(()=>R.storage(i||void 0)),j=D;return j&&V.useEmulator(...j),m&&V.setMaxUploadRetryTime(m),v&&V.setMaxOperationRetryTime(v),V},[m,v])}ref(t){return hT(this.storage.ref(t))}refFromURL(t){return hT(this.storage.refFromURL(t))}upload(t,r,i){return hT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fr.Dh),f.LFG(Fr.xv,8),f.LFG(hz,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(bn.HU),f.LFG(fz,8),f.LFG(pz,8),f.LFG(gz,8),f.LFG(Kd,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),yz=(()=>{class n{constructor(){KI.Z.registerVersion("angularfire",bn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[mz],imports:[_z]}),n})();const mV_firebase={projectId:"authfb22",appId:"1:1063978043441:web:647fc71a7e9873c1fdad10",storageBucket:"authfb22.appspot.com",apiKey:"AIzaSyBBjtwkMGyZu3vrdx_rRLowBVWbsCvehoA",authDomain:"authfb22.firebaseapp.com",messagingSenderId:"1063978043441"};let vz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[nj]}),n.\u0275inj=f.cJS({imports:[Yo,tj,VB,UB,_j,Fr.hO.initializeApp(mV_firebase),yz,A3]}),n})();(0,f.G48)(),nu().bootstrapModule(vz).catch(n=>console.error(n))},5867:(pt,Re,F)=>{F.d(Re,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=F(9681);(0,f.registerVersion)("firebase","9.10.0","app")},127:(pt,Re,F)=>{F.d(Re,{Z:()=>f.Z});var f=F(3942);f.Z.registerVersion("firebase","9.10.0","app-compat")},5881:(pt,Re,F)=>{F.r(Re);var f=F(5861),B=F(3942),P=F(7143),oe=F(2090),me=(F(9681),F(1877),F(4859));function fe(){return window}function z(){return(z=(0,f.Z)(function*(ne,$,W){var Ie;const{BuildInfo:qe}=fe();(0,P.aq)($.sessionId,"AuthEvent did not contain a session ID");const vt=yield _e($.sessionId),bt={};return(0,P.ar)()?bt.ibi=qe.packageName:(0,P.as)()?bt.apn=qe.packageName:(0,P.at)(ne,"operation-not-supported-in-this-environment"),qe.displayName&&(bt.appDisplayName=qe.displayName),bt.sessionId=vt,(0,P.au)(ne,W,$.type,void 0,null!==(Ie=$.eventId)&&void 0!==Ie?Ie:void 0,bt)})).apply(this,arguments)}function Ge(){return(Ge=(0,f.Z)(function*(ne){const{BuildInfo:$}=fe(),W={};(0,P.ar)()?W.iosBundleId=$.packageName:(0,P.as)()?W.androidPackageName=$.packageName:(0,P.at)(ne,"operation-not-supported-in-this-environment"),yield(0,P.av)(ne,W)})).apply(this,arguments)}function st(){return(st=(0,f.Z)(function*(ne,$,W){const{cordova:Ie}=fe();let qe=()=>{};try{yield new Promise((vt,bt)=>{let Fe=null;function rt(){var Lt;vt();const fn=null===(Lt=Ie.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof fn&&fn(),"function"==typeof W?.close&&W.close()}function Yt(){Fe||(Fe=window.setTimeout(()=>{bt((0,P.aw)(ne,"redirect-cancelled-by-user"))},2e3))}function Mn(){"visible"===document?.visibilityState&&Yt()}$.addPassiveListener(rt),document.addEventListener("resume",Yt,!1),(0,P.as)()&&document.addEventListener("visibilitychange",Mn,!1),qe=()=>{$.removePassiveListener(rt),document.removeEventListener("resume",Yt,!1),document.removeEventListener("visibilitychange",Mn,!1),Fe&&window.clearTimeout(Fe)}})}finally{qe()}})).apply(this,arguments)}function _e(ne){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,f.Z)(function*(ne){const $=et(ne),W=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(W)).map(qe=>qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function et(ne){if((0,P.aq)(/[0-9a-zA-Z]+/.test(ne),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ne);const $=new ArrayBuffer(ne.length),W=new Uint8Array($);for(let Ie=0;Ie<ne.length;Ie++)W[Ie]=ne.charCodeAt(Ie);return W}class Ne extends P.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(W=>W($)),super.onEvent($)}initialized(){var $=this;return(0,f.Z)(function*(){yield $.initPromise})()}}function se(ne){return de.apply(this,arguments)}function de(){return(de=(0,f.Z)(function*(ne){const $=yield te()._get(pe(ne));return $&&(yield te()._remove(pe(ne))),$})).apply(this,arguments)}function J(){const ne=[],$="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const Ie=Math.floor(Math.random()*$.length);ne.push($.charAt(Ie))}return ne.join("")}function te(){return(0,P.ay)(P.b)}function pe(ne){return(0,P.az)("authEvent",ne.config.apiKey,ne.name)}function je(ne){if(!ne?.includes("?"))return{};const[$,...W]=ne.split("?");return(0,oe.zd)(W.join("?"))}function Ke(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Wt(){var ne;return(null===(ne=self?.location)||void 0===ne?void 0:ne.protocol)||null}function Sr(ne=(0,oe.z$)()){return!("file:"!==Wt()&&"ionic:"!==Wt()&&"capacitor:"!==Wt()||!ne.toLowerCase().match(/iphone|ipad|ipod|android/))}function ki(){try{const ne=self.localStorage,$=P.aI();if(ne)return ne.setItem($,"1"),ne.removeItem($),!function es(ne=(0,oe.z$)()){return function Ar(){return(0,oe.w1)()&&11===document?.documentMode}()||function xn(ne=(0,oe.z$)()){return/Edge\/\d+/.test(ne)}(ne)}()||(0,oe.hl)()}catch{return ei()&&(0,oe.hl)()}return!1}function ei(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function Ut(){return"http:"===Wt()||"https:"===Wt()}()||(0,oe.ru)()||Sr())&&!function zs(){return(0,oe.b$)()||(0,oe.UG)()}()&&ki()&&!ei()}function Di(){return Sr()&&typeof document<"u"}function nt(){return(nt=(0,f.Z)(function*(){return!!Di()&&new Promise(ne=>{const $=setTimeout(()=>{ne(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),ne(!0)})})})).apply(this,arguments)}const Un={LOCAL:"local",NONE:"none",SESSION:"session"},hn=P.ax,vr="persistence";function vn(ne){return wn.apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(ne){yield ne._initializationPromise;const $=gt(),W=P.az(vr,ne.config.apiKey,ne.name);$&&$.setItem(W,ne._getPersistence())})).apply(this,arguments)}function gt(){var ne;try{return(null===(ne=function yr(){return typeof window<"u"?window:null}())||void 0===ne?void 0:ne.sessionStorage)||null}catch{return null}}const mt=P.ax;class kt{constructor(){this.browserResolver=P.ay(P.k),this.cordovaResolver=P.ay(class Jt{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize($){var W=this;return(0,f.Z)(function*(){const Ie=$._key();let qe=W.eventManagers.get(Ie);return qe||(qe=new Ne($),W.eventManagers.set(Ie,qe),W.attachCallbackListeners($,qe)),qe})()}_openPopup($){(0,P.at)($,"operation-not-supported-in-this-environment")}_openRedirect($,W,Ie,qe){var vt=this;return(0,f.Z)(function*(){!function Ce(ne){var $,W,Ie,qe,vt,bt,Fe,rt,Yt,Mn;const Lt=fe();(0,P.ax)("function"==typeof(null===($=Lt?.universalLinks)||void 0===$?void 0:$.subscribe),ne,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(W=Lt?.BuildInfo)||void 0===W?void 0:W.packageName)<"u",ne,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(vt=null===(qe=null===(Ie=Lt?.cordova)||void 0===Ie?void 0:Ie.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===vt?void 0:vt.openUrl),ne,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(rt=null===(Fe=null===(bt=Lt?.cordova)||void 0===bt?void 0:bt.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===rt?void 0:rt.isAvailable),ne,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Mn=null===(Yt=Lt?.cordova)||void 0===Yt?void 0:Yt.InAppBrowser)||void 0===Mn?void 0:Mn.open),ne,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const bt=yield vt._initialize($);yield bt.initialized(),bt.resetRedirect(),(0,P.aD)(),yield vt._originValidation($);const Fe=function Ae(ne,$,W=null){return{type:$,eventId:W,urlResponse:null,sessionId:J(),postBody:null,tenantId:ne.tenantId,error:(0,P.aw)(ne,"no-auth-event")}}($,Ie,qe);yield function ze(ne,$){return te()._set(pe(ne),$)}($,Fe);const rt=yield function q(ne,$,W){return z.apply(this,arguments)}($,Fe,W),Yt=yield function Oe(ne){const{cordova:$}=fe();return new Promise(W=>{$.plugins.browsertab.isAvailable(Ie=>{let qe=null;Ie?$.plugins.browsertab.openUrl(ne):qe=$.InAppBrowser.open(ne,(0,P.ap)()?"_blank":"_system","location=yes"),W(qe)})})}(rt);return function Te(ne,$,W){return st.apply(this,arguments)}($,bt,Yt)})()}_isIframeWebStorageSupported($,W){throw new Error("Method not implemented.")}_originValidation($){const W=$._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function X(ne){return Ge.apply(this,arguments)}($)),this.originValidationPromises[W]}attachCallbackListeners($,W){const{universalLinks:Ie,handleOpenURL:qe,BuildInfo:vt}=fe(),bt=setTimeout((0,f.Z)(function*(){yield se($),W.onEvent(Ke())}),500),Fe=function(){var Mn=(0,f.Z)(function*(Lt){clearTimeout(bt);const fn=yield se($);let ts=null;fn&&Lt?.url&&(ts=function we(ne,$){var W,Ie;const qe=function Ue(ne){const $=je(ne),W=$.link?decodeURIComponent($.link):void 0,Ie=je(W).link,qe=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return je(qe).link||qe||Ie||W||ne}($);if(qe.includes("/__/auth/callback")){const vt=je(qe),bt=vt.firebaseError?function ae(ne){try{return JSON.parse(ne)}catch{return null}}(decodeURIComponent(vt.firebaseError)):null,Fe=null===(Ie=null===(W=bt?.code)||void 0===W?void 0:W.split("auth/"))||void 0===Ie?void 0:Ie[1],rt=Fe?(0,P.aw)(Fe):null;return rt?{type:ne.type,eventId:ne.eventId,tenantId:ne.tenantId,error:rt,urlResponse:null,sessionId:null,postBody:null}:{type:ne.type,eventId:ne.eventId,tenantId:ne.tenantId,sessionId:ne.sessionId,urlResponse:qe,postBody:null}}return null}(fn,Lt.url)),W.onEvent(ts||Ke())});return function(fn){return Mn.apply(this,arguments)}}();typeof Ie<"u"&&"function"==typeof Ie.subscribe&&Ie.subscribe(null,Fe);const rt=qe,Yt=`${vt.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var Mn=(0,f.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(Yt)&&Fe({url:Lt}),"function"==typeof rt)try{rt(Lt)}catch(fn){console.error(fn)}});return function(Lt){return Mn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize($){var W=this;return(0,f.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize($)})()}_openPopup($,W,Ie,qe){var vt=this;return(0,f.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openPopup($,W,Ie,qe)})()}_openRedirect($,W,Ie,qe){var vt=this;return(0,f.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openRedirect($,W,Ie,qe)})()}_isIframeWebStorageSupported($,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,W)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return Di()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,f.Z)(function*(){if($.underlyingResolver)return;const W=yield function Oi(){return nt.apply(this,arguments)}();$.underlyingResolver=W?$.cordovaResolver:$.browserResolver})()}}function Gr(ne){return ne.unwrap()}function xr(ne){return kr(ne)}function kr(ne){const{_tokenResponse:$}=ne instanceof oe.ZR?ne.customData:ne;if(!$)return null;if(!(ne instanceof oe.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return P.P.credentialFromResult(ne);const W=$.providerId;if(!W||W===P.o.PASSWORD)return null;let Ie;switch(W){case P.o.GOOGLE:Ie=P.Q;break;case P.o.FACEBOOK:Ie=P.N;break;case P.o.GITHUB:Ie=P.T;break;case P.o.TWITTER:Ie=P.W;break;default:const{oauthIdToken:qe,oauthAccessToken:vt,oauthTokenSecret:bt,pendingToken:Fe,nonce:rt}=$;return vt||bt||qe||Fe?Fe?W.startsWith("saml.")?P.aL._create(W,Fe):P.J._fromParams({providerId:W,signInMethod:W,pendingToken:Fe,idToken:qe,accessToken:vt}):new P.U(W).credential({idToken:qe,accessToken:vt,rawNonce:rt}):null}return ne instanceof oe.ZR?Ie.credentialFromError(ne):Ie.credentialFromResult(ne)}function Ft(ne,$){return $.catch(W=>{throw W instanceof oe.ZR&&function Dt(ne,$){var W,Ie;const qe=null===(W=$.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ie=$)||void 0===Ie?void 0:Ie.code))$.resolver=new Q(ne,P.an(ne,$));else if(qe){const vt=kr($),bt=$;vt&&(bt.credential=vt,bt.tenantId=qe.tenantId||void 0,bt.email=qe.email||void 0,bt.phoneNumber=qe.phoneNumber||void 0)}}(ne,W),W}).then(W=>{const qe=W.user;return{operationType:W.operationType,credential:xr(W),additionalUserInfo:P.al(W),user:G.getOrCreate(qe)}})}function ti(ne,$){return zt.apply(this,arguments)}function zt(){return(zt=(0,f.Z)(function*(ne,$){const W=yield $;return{verificationId:W.verificationId,confirm:Ie=>Ft(ne,W.confirm(Ie))}})).apply(this,arguments)}class Q{constructor($,W){this.resolver=W,this.auth=function wr(ne){return ne.wrapped()}($)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return Ft(Gr(this.auth),this.resolver.resolveSignIn($))}}class G{constructor($){this._delegate=$,this.multiFactor=P.ao($)}static getOrCreate($){return G.USER_MAP.has($)||G.USER_MAP.set($,new G($)),G.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var W=this;return(0,f.Z)(function*(){return Ft(W.auth,P.Z(W._delegate,$))})()}linkWithPhoneNumber($,W){var Ie=this;return(0,f.Z)(function*(){return ti(Ie.auth,P.l(Ie._delegate,$,W))})()}linkWithPopup($){var W=this;return(0,f.Z)(function*(){return Ft(W.auth,P.d(W._delegate,$,kt))})()}linkWithRedirect($){var W=this;return(0,f.Z)(function*(){return yield vn(P.aE(W.auth)),P.g(W._delegate,$,kt)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var W=this;return(0,f.Z)(function*(){return Ft(W.auth,P._(W._delegate,$))})()}reauthenticateWithPhoneNumber($,W){return ti(this.auth,P.r(this._delegate,$,W))}reauthenticateWithPopup($){return Ft(this.auth,P.e(this._delegate,$,kt))}reauthenticateWithRedirect($){var W=this;return(0,f.Z)(function*(){return yield vn(P.aE(W.auth)),P.h(W._delegate,$,kt)})()}sendEmailVerification($){return P.ab(this._delegate,$)}unlink($){var W=this;return(0,f.Z)(function*(){return yield P.ak(W._delegate,$),W})()}updateEmail($){return P.ag(this._delegate,$)}updatePassword($){return P.ah(this._delegate,$)}updatePhoneNumber($){return P.u(this._delegate,$)}updateProfile($){return P.af(this._delegate,$)}verifyBeforeUpdateEmail($,W){return P.ac(this._delegate,$,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}G.USER_MAP=new WeakMap;const H=P.ax;let K=(()=>{class ne{constructor(W,Ie){if(this.app=W,Ie.isInitialized())return this._delegate=Ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:qe}=W.options;H(qe,"invalid-api-key",{appName:W.name}),H(qe,"invalid-api-key",{appName:W.name});const vt=typeof window<"u"?kt:void 0;this._delegate=Ie.initialize({options:{persistence:xe(qe,W.name),popupRedirectResolver:vt}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?G.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,Ie){P.G(this._delegate,W,Ie)}applyActionCode(W){return P.a2(this._delegate,W)}checkActionCode(W){return P.a3(this._delegate,W)}confirmPasswordReset(W,Ie){return P.a1(this._delegate,W,Ie)}createUserWithEmailAndPassword(W,Ie){var qe=this;return(0,f.Z)(function*(){return Ft(qe._delegate,P.a5(qe._delegate,W,Ie))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return P.aa(this._delegate,W)}isSignInWithEmailLink(W){return P.a8(this._delegate,W)}getRedirectResult(){var W=this;return(0,f.Z)(function*(){H(Vn(),W._delegate,"operation-not-supported-in-this-environment");const Ie=yield P.j(W._delegate,kt);return Ie?Ft(W._delegate,Promise.resolve(Ie)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function mn(ne,$){(0,P.aE)(ne)._logFramework($)}(this._delegate,W)}onAuthStateChanged(W,Ie,qe){const{next:vt,error:bt,complete:Fe}=Z(W,Ie,qe);return this._delegate.onAuthStateChanged(vt,bt,Fe)}onIdTokenChanged(W,Ie,qe){const{next:vt,error:bt,complete:Fe}=Z(W,Ie,qe);return this._delegate.onIdTokenChanged(vt,bt,Fe)}sendSignInLinkToEmail(W,Ie){return P.a7(this._delegate,W,Ie)}sendPasswordResetEmail(W,Ie){return P.a0(this._delegate,W,Ie||void 0)}setPersistence(W){var Ie=this;return(0,f.Z)(function*(){let qe;switch(function Fi(ne,$){hn(Object.values(Un).includes($),ne,"invalid-persistence-type"),(0,oe.b$)()?hn($!==Un.SESSION,ne,"unsupported-persistence-type"):(0,oe.UG)()?hn($===Un.NONE,ne,"unsupported-persistence-type"):ei()?hn($===Un.NONE||$===Un.LOCAL&&(0,oe.hl)(),ne,"unsupported-persistence-type"):hn($===Un.NONE||ki(),ne,"unsupported-persistence-type")}(Ie._delegate,W),W){case Un.SESSION:qe=P.a;break;case Un.LOCAL:qe=(yield P.ay(P.i)._isAvailable())?P.i:P.b;break;case Un.NONE:qe=P.L;break;default:return P.at("argument-error",{appName:Ie._delegate.name})}return Ie._delegate.setPersistence(qe)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return Ft(this._delegate,P.X(this._delegate))}signInWithCredential(W){return Ft(this._delegate,P.Y(this._delegate,W))}signInWithCustomToken(W){return Ft(this._delegate,P.$(this._delegate,W))}signInWithEmailAndPassword(W,Ie){return Ft(this._delegate,P.a6(this._delegate,W,Ie))}signInWithEmailLink(W,Ie){return Ft(this._delegate,P.a9(this._delegate,W,Ie))}signInWithPhoneNumber(W,Ie){return ti(this._delegate,P.s(this._delegate,W,Ie))}signInWithPopup(W){var Ie=this;return(0,f.Z)(function*(){return H(Vn(),Ie._delegate,"operation-not-supported-in-this-environment"),Ft(Ie._delegate,P.c(Ie._delegate,W,kt))})()}signInWithRedirect(W){var Ie=this;return(0,f.Z)(function*(){return H(Vn(),Ie._delegate,"operation-not-supported-in-this-environment"),yield vn(Ie._delegate),P.f(Ie._delegate,W,kt)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return P.a4(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ne.Persistence=Un,ne})();function Z(ne,$,W){let Ie=ne;"function"!=typeof ne&&({next:Ie,error:$,complete:W}=ne);const qe=Ie;return{next:bt=>qe(bt&&G.getOrCreate(bt)),error:$,complete:W}}function xe(ne,$){const W=function _n(ne,$){const W=gt();if(!W)return[];const Ie=P.az(vr,ne,$);switch(W.getItem(Ie)){case Un.NONE:return[P.L];case Un.LOCAL:return[P.i,P.a];case Un.SESSION:return[P.a];default:return[]}}(ne,$);if(typeof self<"u"&&!W.includes(P.i)&&W.push(P.i),typeof window<"u")for(const Ie of[P.b,P.a])W.includes(Ie)||W.push(Ie);return W.includes(P.L)||W.push(P.L),W}class We{constructor(){this.providerId="phone",this._delegate=new P.P(Gr(B.Z.auth()))}static credential($,W){return P.P.credential($,W)}verifyPhoneNumber($,W){return this._delegate.verifyPhoneNumber($,W)}unwrap(){return this._delegate}}We.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,We.PROVIDER_ID=P.P.PROVIDER_ID;const It=P.ax;class ln{constructor($,W,Ie=B.Z.app()){var qe;It(null===(qe=Ie.options)||void 0===qe?void 0:qe.apiKey,"invalid-api-key",{appName:Ie.name}),this._delegate=new P.R($,W,Ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rr(ne){ne.INTERNAL.registerComponent(new me.wA("auth-compat",$=>{const W=$.getProvider("app-compat").getImmediate(),Ie=$.getProvider("auth");return new K(W,Ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:We,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:ln,TwitterAuthProvider:P.W,Auth:K,AuthCredential:P.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ne.registerVersion("@firebase/auth-compat","0.2.20")}(B.Z)},9751:(pt,Re,F)=>{F.d(Re,{y:()=>fe});var f=F(930),B=F(727),P=F(8822),oe=F(9635),le=F(2416),ye=F(576),me=F(2806);let fe=(()=>{class X{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const Te=new X;return Te.source=this,Te.operator=Oe,Te}subscribe(Oe,Te,st){const Ce=function z(X){return X&&X instanceof f.Lv||function q(X){return X&&(0,ye.m)(X.next)&&(0,ye.m)(X.error)&&(0,ye.m)(X.complete)}(X)&&(0,B.Nn)(X)}(Oe)?Oe:new f.Hp(Oe,Te,st);return(0,me.x)(()=>{const{operator:_e,source:Xe}=this;Ce.add(_e?_e.call(Ce,Xe):Xe?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(Te){Oe.error(Te)}}forEach(Oe,Te){return new(Te=ve(Te))((st,Ce)=>{const _e=new f.Hp({next:Xe=>{try{Oe(Xe)}catch(et){Ce(et),_e.unsubscribe()}},error:Ce,complete:st});this.subscribe(_e)})}_subscribe(Oe){var Te;return null===(Te=this.source)||void 0===Te?void 0:Te.subscribe(Oe)}[P.L](){return this}pipe(...Oe){return(0,oe.U)(Oe)(this)}toPromise(Oe){return new(Oe=ve(Oe))((Te,st)=>{let Ce;this.subscribe(_e=>Ce=_e,_e=>st(_e),()=>Te(Ce))})}}return X.create=Ge=>new X(Ge),X})();function ve(X){var Ge;return null!==(Ge=X??le.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(pt,Re,F)=>{F.d(Re,{x:()=>me});var f=F(9751),B=F(727);const oe=(0,F(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=F(8737),ye=F(2806);let me=(()=>{class ve extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const X=new fe(this,this);return X.operator=z,X}_throwIfClosed(){if(this.closed)throw new oe}next(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(z)}})}error(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:X}=this;for(;X.length;)X.shift().error(z)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:X,isStopped:Ge,observers:Oe}=this;return X||Ge?B.Lc:(this.currentObservers=null,Oe.push(z),new B.w0(()=>{this.currentObservers=null,(0,le.P)(Oe,z)}))}_checkFinalizedStatuses(z){const{hasError:X,thrownError:Ge,isStopped:Oe}=this;X?z.error(Ge):Oe&&z.complete()}asObservable(){const z=new f.y;return z.source=this,z}}return ve.create=(q,z)=>new fe(q,z),ve})();class fe extends me{constructor(q,z){super(),this.destination=q,this.source=z}next(q){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===X||X.call(z,q)}error(q){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===X||X.call(z,q)}complete(){var q,z;null===(z=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===z||z.call(q)}_subscribe(q){var z,X;return null!==(X=null===(z=this.source)||void 0===z?void 0:z.subscribe(q))&&void 0!==X?X:B.Lc}}},930:(pt,Re,F)=>{F.d(Re,{Hp:()=>st,Lv:()=>X});var f=F(576),B=F(727),P=F(2416),oe=F(7849),le=F(5032);const ye=ve("C",void 0,void 0);function ve(Le,Ne,Ae){return{kind:Le,value:Ne,error:Ae}}var q=F(3410),z=F(2806);class X extends B.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,B.Nn)(Ne)&&Ne.add(this)):this.destination=et}static create(Ne,Ae,ze){return new st(Ne,Ae,ze)}next(Ne){this.isStopped?Xe(function fe(Le){return ve("N",Le,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?Xe(function me(Le){return ve("E",void 0,Le)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?Xe(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Oe(Le,Ne){return Ge.call(Le,Ne)}class Te{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Ne)}catch(ze){Ce(ze)}}error(Ne){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Ne)}catch(ze){Ce(ze)}else Ce(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(Ae){Ce(Ae)}}}class st extends X{constructor(Ne,Ae,ze){let se;if(super(),(0,f.m)(Ne)||!Ne)se={next:Ne??void 0,error:Ae??void 0,complete:ze??void 0};else{let de;this&&P.v.useDeprecatedNextContext?(de=Object.create(Ne),de.unsubscribe=()=>this.unsubscribe(),se={next:Ne.next&&Oe(Ne.next,de),error:Ne.error&&Oe(Ne.error,de),complete:Ne.complete&&Oe(Ne.complete,de)}):se=Ne}this.destination=new Te(se)}}function Ce(Le){P.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Le):(0,oe.h)(Le)}function Xe(Le,Ne){const{onStoppedNotification:Ae}=P.v;Ae&&q.z.setTimeout(()=>Ae(Le,Ne))}const et={closed:!0,next:le.Z,error:function _e(Le){throw Le},complete:le.Z}},727:(pt,Re,F)=>{F.d(Re,{Lc:()=>ye,w0:()=>le,Nn:()=>me});var f=F(576);const P=(0,F(3888).d)(ve=>function(z){ve(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((X,Ge)=>`${Ge+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var oe=F(8737);class le{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Oe of z)Oe.remove(this);else z.remove(this);const{initialTeardown:X}=this;if((0,f.m)(X))try{X()}catch(Oe){q=Oe instanceof P?Oe.errors:[Oe]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Oe of Ge)try{fe(Oe)}catch(Te){q=q??[],Te instanceof P?q=[...q,...Te.errors]:q.push(Te)}}if(q)throw new P(q)}}add(q){var z;if(q&&q!==this)if(this.closed)fe(q);else{if(q instanceof le){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(q)}}_hasParent(q){const{_parentage:z}=this;return z===q||Array.isArray(z)&&z.includes(q)}_addParent(q){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(q),z):z?[z,q]:q}_removeParent(q){const{_parentage:z}=this;z===q?this._parentage=null:Array.isArray(z)&&(0,oe.P)(z,q)}remove(q){const{_finalizers:z}=this;z&&(0,oe.P)(z,q),q instanceof le&&q._removeParent(this)}}le.EMPTY=(()=>{const ve=new le;return ve.closed=!0,ve})();const ye=le.EMPTY;function me(ve){return ve instanceof le||ve&&"closed"in ve&&(0,f.m)(ve.remove)&&(0,f.m)(ve.add)&&(0,f.m)(ve.unsubscribe)}function fe(ve){(0,f.m)(ve)?ve():ve.unsubscribe()}},2416:(pt,Re,F)=>{F.d(Re,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Re,F)=>{F.d(Re,{E:()=>B});const B=new(F(9751).y)(le=>le.complete())},8996:(pt,Re,F)=>{F.d(Re,{D:()=>Ne});var f=F(8421),B=F(5363),P=F(9468),ye=F(9751),fe=F(2202),ve=F(576),q=F(9672);function X(Ae,ze){if(!Ae)throw new Error("Iterable cannot be null");return new ye.y(se=>{(0,q.f)(se,ze,()=>{const de=Ae[Symbol.asyncIterator]();(0,q.f)(se,ze,()=>{de.next().then(we=>{we.done?se.complete():se.next(we.value)})},0,!0)})})}var Ge=F(3670),Oe=F(8239),Te=F(1144),st=F(6495),Ce=F(2206),_e=F(4532),Xe=F(3260);function Ne(Ae,ze){return ze?function Le(Ae,ze){if(null!=Ae){if((0,Ge.c)(Ae))return function oe(Ae,ze){return(0,f.Xf)(Ae).pipe((0,P.R)(ze),(0,B.Q)(ze))}(Ae,ze);if((0,Te.z)(Ae))return function me(Ae,ze){return new ye.y(se=>{let de=0;return ze.schedule(function(){de===Ae.length?se.complete():(se.next(Ae[de++]),se.closed||this.schedule())})})}(Ae,ze);if((0,Oe.t)(Ae))return function le(Ae,ze){return(0,f.Xf)(Ae).pipe((0,P.R)(ze),(0,B.Q)(ze))}(Ae,ze);if((0,Ce.D)(Ae))return X(Ae,ze);if((0,st.T)(Ae))return function z(Ae,ze){return new ye.y(se=>{let de;return(0,q.f)(se,ze,()=>{de=Ae[fe.h](),(0,q.f)(se,ze,()=>{let we,J;try{({value:we,done:J}=de.next())}catch(te){return void se.error(te)}J?se.complete():se.next(we)},0,!0)}),()=>(0,ve.m)(de?.return)&&de.return()})}(Ae,ze);if((0,Xe.L)(Ae))return function et(Ae,ze){return X((0,Xe.Q)(Ae),ze)}(Ae,ze)}throw(0,_e.z)(Ae)}(Ae,ze):(0,f.Xf)(Ae)}},8421:(pt,Re,F)=>{F.d(Re,{Xf:()=>Ge});var f=F(655),B=F(1144),P=F(8239),oe=F(9751),le=F(3670),ye=F(2206),me=F(4532),fe=F(6495),ve=F(3260),q=F(576),z=F(7849),X=F(8822);function Ge(Le){if(Le instanceof oe.y)return Le;if(null!=Le){if((0,le.c)(Le))return function Oe(Le){return new oe.y(Ne=>{const Ae=Le[X.L]();if((0,q.m)(Ae.subscribe))return Ae.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,B.z)(Le))return function Te(Le){return new oe.y(Ne=>{for(let Ae=0;Ae<Le.length&&!Ne.closed;Ae++)Ne.next(Le[Ae]);Ne.complete()})}(Le);if((0,P.t)(Le))return function st(Le){return new oe.y(Ne=>{Le.then(Ae=>{Ne.closed||(Ne.next(Ae),Ne.complete())},Ae=>Ne.error(Ae)).then(null,z.h)})}(Le);if((0,ye.D)(Le))return _e(Le);if((0,fe.T)(Le))return function Ce(Le){return new oe.y(Ne=>{for(const Ae of Le)if(Ne.next(Ae),Ne.closed)return;Ne.complete()})}(Le);if((0,ve.L)(Le))return function Xe(Le){return _e((0,ve.Q)(Le))}(Le)}throw(0,me.z)(Le)}function _e(Le){return new oe.y(Ne=>{(function et(Le,Ne){var Ae,ze,se,de;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,f.KL)(Le);!(ze=yield Ae.next()).done;)if(Ne.next(ze.value),Ne.closed)return}catch(we){se={error:we}}finally{try{ze&&!ze.done&&(de=Ae.return)&&(yield de.call(Ae))}finally{if(se)throw se.error}}Ne.complete()})})(Le,Ne).catch(Ae=>Ne.error(Ae))})}},6451:(pt,Re,F)=>{F.d(Re,{T:()=>ye});var f=F(8189),B=F(8421),P=F(515),oe=F(7669),le=F(8996);function ye(...me){const fe=(0,oe.yG)(me),ve=(0,oe._6)(me,1/0),q=me;return q.length?1===q.length?(0,B.Xf)(q[0]):(0,f.J)(ve)((0,le.D)(q,fe)):P.E}},5403:(pt,Re,F)=>{F.d(Re,{x:()=>B});var f=F(930);function B(oe,le,ye,me,fe){return new P(oe,le,ye,me,fe)}class P extends f.Lv{constructor(le,ye,me,fe,ve,q){super(le),this.onFinalize=ve,this.shouldUnsubscribe=q,this._next=ye?function(z){try{ye(z)}catch(X){le.error(X)}}:super._next,this._error=fe?function(z){try{fe(z)}catch(X){le.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(z){le.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(pt,Re,F)=>{F.d(Re,{U:()=>P});var f=F(4482),B=F(5403);function P(oe,le){return(0,f.e)((ye,me)=>{let fe=0;ye.subscribe((0,B.x)(me,ve=>{me.next(oe.call(le,ve,fe++))}))})}},8189:(pt,Re,F)=>{F.d(Re,{J:()=>P});var f=F(5577),B=F(4671);function P(oe=1/0){return(0,f.z)(B.y,oe)}},5577:(pt,Re,F)=>{F.d(Re,{z:()=>fe});var f=F(4004),B=F(8421),P=F(4482),oe=F(9672),le=F(5403),me=F(576);function fe(ve,q,z=1/0){return(0,me.m)(q)?fe((X,Ge)=>(0,f.U)((Oe,Te)=>q(X,Oe,Ge,Te))((0,B.Xf)(ve(X,Ge))),z):("number"==typeof q&&(z=q),(0,P.e)((X,Ge)=>function ye(ve,q,z,X,Ge,Oe,Te,st){const Ce=[];let _e=0,Xe=0,et=!1;const Le=()=>{et&&!Ce.length&&!_e&&q.complete()},Ne=ze=>_e<X?Ae(ze):Ce.push(ze),Ae=ze=>{Oe&&q.next(ze),_e++;let se=!1;(0,B.Xf)(z(ze,Xe++)).subscribe((0,le.x)(q,de=>{Ge?.(de),Oe?Ne(de):q.next(de)},()=>{se=!0},void 0,()=>{if(se)try{for(_e--;Ce.length&&_e<X;){const de=Ce.shift();Te?(0,oe.f)(q,Te,()=>Ae(de)):Ae(de)}Le()}catch(de){q.error(de)}}))};return ve.subscribe((0,le.x)(q,Ne,()=>{et=!0,Le()})),()=>{st?.()}}(X,Ge,ve,z)))}},5363:(pt,Re,F)=>{F.d(Re,{Q:()=>oe});var f=F(9672),B=F(4482),P=F(5403);function oe(le,ye=0){return(0,B.e)((me,fe)=>{me.subscribe((0,P.x)(fe,ve=>(0,f.f)(fe,le,()=>fe.next(ve),ye),()=>(0,f.f)(fe,le,()=>fe.complete(),ye),ve=>(0,f.f)(fe,le,()=>fe.error(ve),ye)))})}},3099:(pt,Re,F)=>{F.d(Re,{B:()=>le});var f=F(8421),B=F(7579),P=F(930),oe=F(4482);function le(me={}){const{connector:fe=(()=>new B.x),resetOnError:ve=!0,resetOnComplete:q=!0,resetOnRefCountZero:z=!0}=me;return X=>{let Ge,Oe,Te,st=0,Ce=!1,_e=!1;const Xe=()=>{Oe?.unsubscribe(),Oe=void 0},et=()=>{Xe(),Ge=Te=void 0,Ce=_e=!1},Le=()=>{const Ne=Ge;et(),Ne?.unsubscribe()};return(0,oe.e)((Ne,Ae)=>{st++,!_e&&!Ce&&Xe();const ze=Te=Te??fe();Ae.add(()=>{st--,0===st&&!_e&&!Ce&&(Oe=ye(Le,z))}),ze.subscribe(Ae),!Ge&&st>0&&(Ge=new P.Hp({next:se=>ze.next(se),error:se=>{_e=!0,Xe(),Oe=ye(et,ve,se),ze.error(se)},complete:()=>{Ce=!0,Xe(),Oe=ye(et,q),ze.complete()}}),(0,f.Xf)(Ne).subscribe(Ge))})(X)}}function ye(me,fe,...ve){if(!0===fe)return void me();if(!1===fe)return;const q=new P.Hp({next:()=>{q.unsubscribe(),me()}});return fe(...ve).subscribe(q)}},9468:(pt,Re,F)=>{F.d(Re,{R:()=>B});var f=F(4482);function B(P,oe=0){return(0,f.e)((le,ye)=>{ye.add(P.schedule(()=>le.subscribe(ye),oe))})}},8505:(pt,Re,F)=>{F.d(Re,{b:()=>le});var f=F(576),B=F(4482),P=F(5403),oe=F(4671);function le(ye,me,fe){const ve=(0,f.m)(ye)||me||fe?{next:ye,error:me,complete:fe}:ye;return ve?(0,B.e)((q,z)=>{var X;null===(X=ve.subscribe)||void 0===X||X.call(ve);let Ge=!0;q.subscribe((0,P.x)(z,Oe=>{var Te;null===(Te=ve.next)||void 0===Te||Te.call(ve,Oe),z.next(Oe)},()=>{var Oe;Ge=!1,null===(Oe=ve.complete)||void 0===Oe||Oe.call(ve),z.complete()},Oe=>{var Te;Ge=!1,null===(Te=ve.error)||void 0===Te||Te.call(ve,Oe),z.error(Oe)},()=>{var Oe,Te;Ge&&(null===(Oe=ve.unsubscribe)||void 0===Oe||Oe.call(ve)),null===(Te=ve.finalize)||void 0===Te||Te.call(ve)}))}):oe.y}},4408:(pt,Re,F)=>{F.d(Re,{o:()=>le});var f=F(727);class B extends f.w0{constructor(me,fe){super()}schedule(me,fe=0){return this}}const P={setInterval(ye,me,...fe){const{delegate:ve}=P;return ve?.setInterval?ve.setInterval(ye,me,...fe):setInterval(ye,me,...fe)},clearInterval(ye){const{delegate:me}=P;return(me?.clearInterval||clearInterval)(ye)},delegate:void 0};var oe=F(8737);class le extends B{constructor(me,fe){super(me,fe),this.scheduler=me,this.work=fe,this.pending=!1}schedule(me,fe=0){var ve;if(this.closed)return this;this.state=me;const q=this.id,z=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(z,q,fe)),this.pending=!0,this.delay=fe,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(z,this.id,fe),this}requestAsyncId(me,fe,ve=0){return P.setInterval(me.flush.bind(me,this),ve)}recycleAsyncId(me,fe,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return fe;null!=fe&&P.clearInterval(fe)}execute(me,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(me,fe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,fe){let q,ve=!1;try{this.work(me)}catch(z){ve=!0,q=z||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:me,scheduler:fe}=this,{actions:ve}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ve,this),null!=me&&(this.id=this.recycleAsyncId(fe,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Re,F)=>{F.d(Re,{v:()=>P});var f=F(6063);class B{constructor(le,ye=B.now){this.schedulerActionCtor=le,this.now=ye}schedule(le,ye=0,me){return new this.schedulerActionCtor(this,le).schedule(me,ye)}}B.now=f.l.now;class P extends B{constructor(le,ye=B.now){super(le,ye),this.actions=[],this._active=!1}flush(le){const{actions:ye}=this;if(this._active)return void ye.push(le);let me;this._active=!0;do{if(me=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this._active=!1,me){for(;le=ye.shift();)le.unsubscribe();throw me}}}},4986:(pt,Re,F)=>{F.d(Re,{z:()=>P});var f=F(4408);const P=new(F(7565).v)(f.o)},6063:(pt,Re,F)=>{F.d(Re,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(pt,Re,F)=>{F.d(Re,{z:()=>f});const f={setTimeout(B,P,...oe){const{delegate:le}=f;return le?.setTimeout?le.setTimeout(B,P,...oe):setTimeout(B,P,...oe)},clearTimeout(B){const{delegate:P}=f;return(P?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(pt,Re,F)=>{F.d(Re,{h:()=>B});const B=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Re,F)=>{F.d(Re,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Re,F)=>{F.d(Re,{_6:()=>ye,jO:()=>oe,yG:()=>le});var f=F(576);function P(me){return me[me.length-1]}function oe(me){return(0,f.m)(P(me))?me.pop():void 0}function le(me){return function B(me){return me&&(0,f.m)(me.schedule)}(P(me))?me.pop():void 0}function ye(me,fe){return"number"==typeof P(me)?me.pop():fe}},8737:(pt,Re,F)=>{function f(B,P){if(B){const oe=B.indexOf(P);0<=oe&&B.splice(oe,1)}}F.d(Re,{P:()=>f})},3888:(pt,Re,F)=>{function f(B){const oe=B(le=>{Error.call(le),le.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}F.d(Re,{d:()=>f})},2806:(pt,Re,F)=>{F.d(Re,{O:()=>oe,x:()=>P});var f=F(2416);let B=null;function P(le){if(f.v.useDeprecatedSynchronousErrorHandling){const ye=!B;if(ye&&(B={errorThrown:!1,error:null}),le(),ye){const{errorThrown:me,error:fe}=B;if(B=null,me)throw fe}}else le()}function oe(le){f.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=le)}},9672:(pt,Re,F)=>{function f(B,P,oe,le=0,ye=!1){const me=P.schedule(function(){oe(),ye?B.add(this.schedule(null,le)):this.unsubscribe()},le);if(B.add(me),!ye)return me}F.d(Re,{f:()=>f})},4671:(pt,Re,F)=>{function f(B){return B}F.d(Re,{y:()=>f})},1144:(pt,Re,F)=>{F.d(Re,{z:()=>f});const f=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(pt,Re,F)=>{F.d(Re,{D:()=>B});var f=F(576);function B(P){return Symbol.asyncIterator&&(0,f.m)(P?.[Symbol.asyncIterator])}},576:(pt,Re,F)=>{function f(B){return"function"==typeof B}F.d(Re,{m:()=>f})},3670:(pt,Re,F)=>{F.d(Re,{c:()=>P});var f=F(8822),B=F(576);function P(oe){return(0,B.m)(oe[f.L])}},6495:(pt,Re,F)=>{F.d(Re,{T:()=>P});var f=F(2202),B=F(576);function P(oe){return(0,B.m)(oe?.[f.h])}},8239:(pt,Re,F)=>{F.d(Re,{t:()=>B});var f=F(576);function B(P){return(0,f.m)(P?.then)}},3260:(pt,Re,F)=>{F.d(Re,{L:()=>oe,Q:()=>P});var f=F(655),B=F(576);function P(le){return(0,f.FC)(this,arguments,function*(){const me=le.getReader();try{for(;;){const{value:fe,done:ve}=yield(0,f.qq)(me.read());if(ve)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(fe)}}finally{me.releaseLock()}})}function oe(le){return(0,B.m)(le?.getReader)}},4482:(pt,Re,F)=>{F.d(Re,{A:()=>B,e:()=>P});var f=F(576);function B(oe){return(0,f.m)(oe?.lift)}function P(oe){return le=>{if(B(le))return le.lift(function(ye){try{return oe(ye,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Re,F)=>{function f(){}F.d(Re,{Z:()=>f})},9635:(pt,Re,F)=>{F.d(Re,{U:()=>P,z:()=>B});var f=F(4671);function B(...oe){return P(oe)}function P(oe){return 0===oe.length?f.y:1===oe.length?oe[0]:function(ye){return oe.reduce((me,fe)=>fe(me),ye)}}},7849:(pt,Re,F)=>{F.d(Re,{h:()=>P});var f=F(2416),B=F(3410);function P(oe){B.z.setTimeout(()=>{const{onUnhandledError:le}=f.v;if(!le)throw oe;le(oe)})}},4532:(pt,Re,F)=>{function f(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Re,{z:()=>f})},655:(pt,Re,F)=>{function oe(J,te){var pe={};for(var ae in J)Object.prototype.hasOwnProperty.call(J,ae)&&te.indexOf(ae)<0&&(pe[ae]=J[ae]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(ae=Object.getOwnPropertySymbols(J);Ue<ae.length;Ue++)te.indexOf(ae[Ue])<0&&Object.prototype.propertyIsEnumerable.call(J,ae[Ue])&&(pe[ae[Ue]]=J[ae[Ue]])}return pe}function fe(J,te,pe,ae){return new(pe||(pe=Promise))(function(je,yt){function Jt(mn){try{Ke(ae.next(mn))}catch(Ln){yt(Ln)}}function Gt(mn){try{Ke(ae.throw(mn))}catch(Ln){yt(Ln)}}function Ke(mn){mn.done?je(mn.value):function Ue(je){return je instanceof pe?je:new pe(function(yt){yt(je)})}(mn.value).then(Jt,Gt)}Ke((ae=ae.apply(J,te||[])).next())})}function Ce(J){return this instanceof Ce?(this.v=J,this):new Ce(J)}function _e(J,te,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,ae=pe.apply(J,te||[]),je=[];return Ue={},yt("next"),yt("throw"),yt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function yt(rn){ae[rn]&&(Ue[rn]=function(Xt){return new Promise(function(Wt,Ut){je.push([rn,Xt,Wt,Ut])>1||Jt(rn,Xt)})})}function Jt(rn,Xt){try{!function Gt(rn){rn.value instanceof Ce?Promise.resolve(rn.value.v).then(Ke,mn):Ln(je[0][2],rn)}(ae[rn](Xt))}catch(Wt){Ln(je[0][3],Wt)}}function Ke(rn){Jt("next",rn)}function mn(rn){Jt("throw",rn)}function Ln(rn,Xt){rn(Xt),je.shift(),je.length&&Jt(je[0][0],je[0][1])}}function et(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,te=J[Symbol.asyncIterator];return te?te.call(J):(J=function X(J){var te="function"==typeof Symbol&&Symbol.iterator,pe=te&&J[te],ae=0;if(pe)return pe.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ae>=J.length&&(J=void 0),{value:J&&J[ae++],done:!J}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),pe={},ae("next"),ae("throw"),ae("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function ae(je){pe[je]=J[je]&&function(yt){return new Promise(function(Jt,Gt){!function Ue(je,yt,Jt,Gt){Promise.resolve(Gt).then(function(Ke){je({value:Ke,done:Jt})},yt)}(Jt,Gt,(yt=J[je](yt)).done,yt.value)})}}}F.d(Re,{FC:()=>_e,KL:()=>et,_T:()=>oe,mG:()=>fe,qq:()=>Ce})},4650:(pt,Re,F)=>{F.d(Re,{$8M:()=>Qu,$Z:()=>wm,AFp:()=>bb,ALo:()=>wh,AaK:()=>fe,CHM:()=>cf,CRH:()=>Lc,CZH:()=>Yp,CqO:()=>zm,D6c:()=>KA,EJc:()=>Sb,EpF:()=>Lr,F4k:()=>dp,FYo:()=>ET,FiY:()=>Be,G48:()=>Hc,GfV:()=>qE,Gpc:()=>z,JOm:()=>pa,KtG:()=>Bo,LFG:()=>Tn,LSH:()=>Hg,Lbi:()=>IA,Lck:()=>uA,MMx:()=>L0,NdJ:()=>Xv,O4$:()=>Ql,OlP:()=>In,Oqu:()=>y0,PXZ:()=>FA,Q6J:()=>$m,QGY:()=>Vr,QP$:()=>qe,Qsj:()=>wN,R0b:()=>$s,RDi:()=>Lg,Rgc:()=>Ih,SBq:()=>yc,Sil:()=>TA,Suo:()=>E_,TTD:()=>Ds,TgZ:()=>up,X6Q:()=>F_,XFs:()=>nt,Xpm:()=>K,Xts:()=>Py,Y36:()=>fu,YKP:()=>Iu,YNc:()=>Hm,Yjl:()=>ne,Yz7:()=>Xt,Z0I:()=>zs,ZZ4:()=>Ra,_Bn:()=>qC,_UZ:()=>Gm,_Vd:()=>_c,_c5:()=>Hb,_uU:()=>_0,aQg:()=>Mu,c2e:()=>Qp,cJS:()=>Ut,cg1:()=>fr,dDg:()=>Mb,dqk:()=>kt,eFA:()=>kb,ekj:()=>pp,eoX:()=>Jp,f3M:()=>b,g9A:()=>iw,h0i:()=>Aa,hGG:()=>qA,hij:()=>ba,iGM:()=>w_,ifc:()=>mt,ip1:()=>rw,jDz:()=>V0,kL8:()=>TC,kcU:()=>_d,lG2:()=>rr,lcZ:()=>Up,lqb:()=>fa,lri:()=>lw,n5z:()=>Ms,oAB:()=>It,oxw:()=>qm,q4F:()=>KE,qLn:()=>Gf,qOj:()=>Ia,qZA:()=>ih,rWj:()=>To,sBO:()=>Vb,sIi:()=>Wi,s_b:()=>Oc,soG:()=>xh,tb:()=>Hr,tp0:()=>St,uIk:()=>sp,vHH:()=>Te,vpe:()=>bo,wAp:()=>Tt,xp6:()=>bI,z2F:()=>Rh,zSh:()=>zg,zs3:()=>ya});var f=F(7579),B=F(727),P=F(9751),oe=F(6451),le=F(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function me(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=ye({__forward_ref__:ye});function z(s){return s.__forward_ref__=z,s.toString=function(){return fe(this())},s}function X(s){return Ge(s)?s():s}function Ge(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===z}class Te extends Error{constructor(o,u){super(function st(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function Ne(s,o){throw new Te(-201,!1)}function Gt(s,o){null==s&&function Ke(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ut(s){return{providers:s.providers||[],imports:s.imports||[]}}function Sr(s){return Ar(s,ei)||Ar(s,Di)}function zs(s){return null!==Sr(s)}function Ar(s,o){return s.hasOwnProperty(o)?s[o]:null}function ki(s){return s&&(s.hasOwnProperty(Vn)||s.hasOwnProperty(Oi))?s[Vn]:null}const ei=ye({\u0275prov:ye}),Vn=ye({\u0275inj:ye}),Di=ye({ngInjectableDef:ye}),Oi=ye({ngInjectorDef:ye});var nt=(()=>((nt=nt||{})[nt.Default=0]="Default",nt[nt.Host=1]="Host",nt[nt.Self=2]="Self",nt[nt.SkipSelf=4]="SkipSelf",nt[nt.Optional=8]="Optional",nt))();let yr;function hn(s){const o=yr;return yr=s,o}function vr(s,o,u){const c=Sr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&nt.Optional?null:void 0!==o?o:void Ne(fe(s))}function vn(s){return{toString:s}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),mt=(()=>{return(s=mt||(mt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",mt;var s})();const kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),xr={},Dt=[],kr=ye({\u0275cmp:ye}),Ft=ye({\u0275dir:ye}),ti=ye({\u0275pipe:ye}),zt=ye({\u0275mod:ye}),Q=ye({\u0275fac:ye}),G=ye({__NG_ELEMENT_ID__:ye});let H=0;function K(s){return vn(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||mt.Emulated,id:"c"+H++,styles:s.styles||Dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,y=s.features;return d.inputs=an(s.inputs,c),d.outputs=an(s.outputs),y&&y.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(xe).filter(We):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(Ie).filter(We):null,d})}function xe(s){return $(s)||W(s)}function We(s){return null!==s}function It(s){return vn(()=>({type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function an(s,o){if(null==s)return xr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const rr=K;function ne(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function $(s){return s[kr]||null}function W(s){return s[Ft]||null}function Ie(s){return s[ti]||null}function qe(s){const o=$(s)||W(s)||Ie(s);return null!==o&&o.standalone}function vt(s,o){const u=s[zt]||null;if(!u&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return u}function ir(s){return Array.isArray(s)&&"object"==typeof s[1]}function di(s){return Array.isArray(s)&&!0===s[1]}function No(s){return 0!=(8&s.flags)}function Bl(s){return 2==(2&s.flags)}function Ua(s){return 1==(1&s.flags)}function ri(s){return null!==s.template}function jl(s){return 0!=(256&s[2])}function Mr(s,o){return s.hasOwnProperty(Q)?s[Q]:null}class Fo{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ds(){return ud}function ud(s){return s.type.prototype.ngOnChanges&&(s.setInput=Gl),Bu}function Bu(){const s=Lo(this),o=s?.current;if(o){const u=s.previous;if(u===xr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Gl(s,o,u,c){const d=Lo(s)||function Mg(s,o){return s[ld]=o}(s,{previous:xr,current:null}),p=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],C=y[E];p[E]=new Fo(C&&C.currentValue,o,y===xr),s[c]=o}Ds.ngInherit=!0;const ld="__ngSimpleChanges__";function Lo(s){return s[ld]||null}function Pn(s){for(;Array.isArray(s);)s=s[0];return s}function Si(s,o){return Pn(o[s])}function Rr(s,o){return Pn(o[s.index])}function to(s,o){return s.data[o]}function sn(s,o){const u=o[s];return ir(u)?u:u[0]}function Ts(s){return 64==(64&s[2])}function pi(s,o){return null==o?null:s[o]}function Ha(s){s[18]=0}function Bn(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Nt={lFrame:Ja(null),bindingsEnabled:!0};function no(){return Nt.bindingsEnabled}function Pe(){return Nt.lFrame.lView}function qt(){return Nt.lFrame.tView}function cf(s){return Nt.lFrame.contextLView=s,s[8]}function Bo(s){return Nt.lFrame.contextLView=null,s}function sr(){let s=jo();for(;null!==s&&64===s.type;)s=s.parent;return s}function jo(){return Nt.lFrame.currentTNode}function Wr(s,o){const u=Nt.lFrame;u.currentTNode=s,u.isParent=o}function $u(){return Nt.lFrame.isParent}function Za(){return Nt.lFrame.bindingIndex++}function fd(s,o){const u=Nt.lFrame;u.bindingIndex=u.bindingRootIndex=s,$o(o)}function $o(s){Nt.lFrame.currentDirectiveIndex=s}function Ya(){return Nt.lFrame.currentQueryIndex}function Yl(s){Nt.lFrame.currentQueryIndex=s}function Qa(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function pd(s,o,u){if(u&nt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&nt.Host||(d=Qa(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=Nt.lFrame=ff();return c.currentTNode=o,c.lView=s,!0}function Go(s){const o=ff(),u=s[1];Nt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function ff(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?Ja(s):o}function Ja(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function pf(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const gd=pf;function Ss(){const s=pf();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Rn(){return Nt.lFrame.selectedIndex}function as(s){Nt.lFrame.selectedIndex=s}function Nn(){const s=Nt.lFrame;return to(s.tView,s.selectedIndex)}function Ql(){Nt.lFrame.currentNamespace="svg"}function _d(){!function Xl(){Nt.lFrame.currentNamespace=null}()}function tc(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:N}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function Wo(s,o,u){qo(s,o,3,u)}function zo(s,o,u,c){(3&s[2])===u&&qo(s,o,u,c)}function vd(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function qo(s,o,u,c){const p=c??-1,y=o.length-1;let E=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=c&&E>=c)break}else o[C]<0&&(s[18]+=65536),(E<p||-1==p)&&(wd(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function wd(s,o,u,c){const d=u[c]<0,p=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class gi{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function us(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const p=u[c++],y=u[c++],E=u[c++];s.setAttribute(o,y,E,p)}else{const p=d,y=u[++c];rc(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function Xa(s){return 3===s||4===s||6===s}function rc(s){return 64===s.charCodeAt(0)}function eu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Id(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Id(s,o,u,c,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function mf(s){return-1!==s}function ar(s){return 32767&s}function xs(s,o){let u=function _f(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let ic=!0;function tu(s){const o=ic;return ic=s,o}let Cd=0;const si={};function ls(s,o){const u=Ku(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,sc(c.data,s),sc(o,null),sc(c.blueprint,null));const d=nu(s,o),p=s.injectorIndex;if(mf(d)){const y=ar(d),E=xs(d,o),C=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|C[y+A]}return o[p+8]=d,p}function sc(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ku(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function nu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=ta(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function io(s,o,u){!function bd(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(G)&&(c=u[G]),null==c&&(c=u[G]=Cd++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Zo(s,o,u){if(u&nt.Optional||void 0!==s)return s;Ne()}function Yo(s,o,u,c){if(u&nt.Optional&&void 0===c&&(c=null),0==(u&(nt.Self|nt.Host))){const d=s[9],p=hn(void 0);try{return d?d.get(o,c,u&nt.Optional):vr(o,c,u&nt.Optional)}finally{hn(p)}}return Zo(c,0,u)}function Qo(s,o,u,c=nt.Default,d){if(null!==s){if(1024&o[2]){const y=function wf(s,o,u,c,d){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const E=Dd(p,y,u,c|nt.Self,si);if(E!==si)return E;let C=p.parent;if(!C){const A=y[21];if(A){const N=A.get(u,si,c);if(N!==si)return N}C=ta(y),y=y[15]}p=C}return d}(s,o,u,c,si);if(y!==si)return y}const p=Dd(s,o,u,c,si);if(p!==si)return p}return Yo(o,u,c,d)}function Dd(s,o,u,c,d){const p=function vf(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(G)?s[G]:void 0;return"number"==typeof o?o>=0?255&o:oc:o}(u);if("function"==typeof p){if(!pd(o,s,c))return c&nt.Host?Zo(d,0,c):Yo(o,u,c,d);try{const y=p(c);if(null!=y||c&nt.Optional)return y;Ne()}finally{gd()}}else if("number"==typeof p){let y=null,E=Ku(s,o),C=-1,A=c&nt.Host?o[16][6]:null;for((-1===E||c&nt.SkipSelf)&&(C=-1===E?nu(s,o):o[E+8],-1!==C&&Yu(c,!1)?(y=o[1],E=ar(C),o=xs(C,o)):E=-1);-1!==E;){const N=o[1];if(Jo(p,E,N.data)){const L=Zu(E,o,u,y,c,A);if(L!==si)return L}C=o[E+8],-1!==C&&Yu(c,o[1].data[E+8]===A)&&Jo(p,E,o)?(y=N,E=ar(C),o=xs(C,o)):E=-1}}return d}function Zu(s,o,u,c,d,p){const y=o[1],E=y.data[s+8],N=iu(E,y,u,null==c?Bl(E)&&ic:c!=y&&0!=(3&E.type),d&nt.Host&&p===E);return null!==N?Ui(o,y,N,E):si}function iu(s,o,u,c,d){const p=s.providerIndexes,y=o.data,E=1048575&p,C=s.directiveStart,N=p>>20,Y=d?E+N:s.directiveEnd;for(let ie=c?E:E+N;ie<Y;ie++){const Se=y[ie];if(ie<C&&u===Se||ie>=C&&Se.type===u)return ie}if(d){const ie=y[C];if(ie&&ri(ie)&&ie.type===u)return C}return null}function Ui(s,o,u,c){let d=s[u];const p=o.data;if(function nc(s){return s instanceof gi}(d)){const y=d;y.resolving&&function Xe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Te(-200,`Circular dependency in DI detected for ${s}${u}`)}(function _e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}(p[u]));const E=tu(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?hn(y.injectImpl):null;pd(s,c,nt.Default);try{d=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function yd(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const y=ud(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==C&&hn(C),tu(E),y.resolving=!1,gd()}}return d}function Jo(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Yu(s,o){return!(s&nt.Self||s&nt.Host&&o)}class Xo{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Qo(this._tNode,this._lView,o,c,u)}}function oc(){return new Xo(sr(),Pe())}function Ms(s){return vn(()=>{const o=s.prototype.constructor,u=o[Q]||ea(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[Q]||ea(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function ea(s){return Ge(s)?()=>{const o=ea(X(s));return o&&o()}:Mr(s)}function ta(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Qu(s){return function ru(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(Xa(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(sr(),s)}const na="__parameters__";function ia(s,o,u){return vn(()=>{const c=function ac(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(C,A,N){const L=C.hasOwnProperty(na)?C[na]:Object.defineProperty(C,na,{value:[]})[na];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(y),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class In{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Xt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cn(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Cn(c,o)):o!==s&&o.push(c)}return o}function cs(s,o){s.forEach(u=>Array.isArray(u)?cs(u,o):o(u))}function oo(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function dr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function it(s,o,u){let c=$i(s,o);return c>=0?s[1|c]=u:(c=~c,function Cf(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function su(s,o){const u=$i(s,o);if(u>=0)return s[1|u]}function $i(s,o){return function ou(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const co={},lc="__NG_DI_FLAG__",Rs="ngTempTokenPath",ds=/\n/gm,Qn="__source";let ho;function hs(s){const o=ho;return ho=s,o}function $n(s,o=nt.Default){if(void 0===ho)throw new Te(-203,!1);return null===ho?vr(s,void 0,o):ho.get(s,o&nt.Optional?null:void 0,o)}function Tn(s,o=nt.Default){return(function Un(){return yr}()||$n)(X(s),o)}function b(s,o=nt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Tn(s,o)}function T(s){const o=[];for(let u=0;u<s.length;u++){const c=X(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Te(900,!1);let d,p=nt.Default;for(let y=0;y<c.length;y++){const E=c[y],C=U(E);"number"==typeof C?-1===C?d=E.token:p|=C:d=E}o.push(Tn(d,p))}else o.push(Tn(c))}return o}function M(s,o){return s[lc]=o,s.prototype[lc]=o,s}function U(s){return s[lc]}const Be=M(ia("Optional"),8),St=M(ia("SkipSelf"),4);let Af;function Lg(s){Af=s}class Ug{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ks(s){return s instanceof Ug?s.changingThisBreaksApplicationSecurity:s}const O=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var hr=(()=>((hr=hr||{})[hr.NONE=0]="NONE",hr[hr.HTML=1]="HTML",hr[hr.STYLE=2]="STYLE",hr[hr.SCRIPT=3]="SCRIPT",hr[hr.URL=4]="URL",hr[hr.RESOURCE_URL=5]="RESOURCE_URL",hr))();function Hg(s){const o=function Vf(){const s=Pe();return s&&s[12]}();return o?o.sanitize(hr.URL,s)||"":function _o(s,o){const u=function Nf(s){return s instanceof Ug&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?ks(s):function re(s){return(s=String(s)).match(O)?s:"unsafe:"+s}(Ce(s))}const Py=new In("ENVIRONMENT_INITIALIZER"),OE=new In("INJECTOR",-1),FE=new In("INJECTOR_DEF_TYPES");class LE{get(o,u=co){if(u===co){const c=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw c.name="NullInjectorError",c}return u}}function _T(...s){return{\u0275providers:VE(0,s)}}function VE(s,...o){const u=[],c=new Set;let d;return cs(o,p=>{const y=p;Gg(y,u,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&UE(d,u),u}function UE(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];cs(d,p=>{o.push(p)})}}function Gg(s,o,u,c){if(!(s=X(s)))return!1;let d=null,p=ki(s);const y=!p&&$(s);if(p||y){if(y&&!y.standalone)return!1;d=s}else{const C=s.ngModule;if(p=ki(C),!p)return!1;d=C}const E=c.has(d);if(y){if(E)return!1;if(c.add(d),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)Gg(A,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let A;c.add(d);try{cs(p.imports,N=>{Gg(N,o,u,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&UE(A,o)}if(!E){const A=Mr(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:Dt},{provide:FE,useValue:d,multi:!0},{provide:Py,useValue:()=>Tn(d),multi:!0})}const C=p.providers;null==C||E||cs(C,N=>{o.push(N)})}}return d!==s&&void 0!==s.providers}const BE=ye({provide:String,useValue:ye});function Uf(s){return null!==s&&"object"==typeof s&&BE in s}function Os(s){return"function"==typeof s}const zg=new In("Set Injector scope."),qg={},mc={};let Kg;function Zg(){return void 0===Kg&&(Kg=new LE),Kg}class fa{}class ky extends fa{constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qg(o,y=>this.processProvider(y)),this.records.set(OE,kd(void 0,this)),d.has("environment")&&this.records.set(fa,kd(void 0,this));const p=this.records.get(zg);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(FE.multi,Dt,nt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=hs(this),c=hn(void 0);try{return o()}finally{hs(u),hn(c)}}get(o,u=co,c=nt.Default){this.assertNotDestroyed();const d=hs(this),p=hn(void 0);try{if(!(c&nt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function vT(s){return"function"==typeof s||"object"==typeof s&&s instanceof In}(o)&&Sr(o);E=C&&this.injectableDefInScope(C)?kd(Bf(o),qg):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&nt.Self?Zg():this.parent).get(o,u=c&nt.Optional&&u===co?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Rs]=y[Rs]||[]).unshift(fe(o)),d)throw y;return function ee(s,o,u,c){const d=s[Rs];throw o[Qn]&&d.unshift(o[Qn]),s.message=function ue(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=fe(o);if(Array.isArray(o))d=o.map(fe).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(ds,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Rs]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{hn(p),hs(d)}}resolveInjectorInitializers(){const o=hs(this),u=hn(void 0);try{const c=this.get(Py.multi,Dt,nt.Self);for(const d of c)d()}finally{hs(o),hn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(fe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(o){let u=Os(o=X(o))?o:X(o&&o.provide);const c=function Oy(s){return Uf(s)?kd(void 0,s.useValue):kd(Yg(s),qg)}(o);if(Os(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=kd(void 0,qg,!0),d.factory=()=>T(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===qg&&(u.value=mc,u.value=u.factory()),"object"==typeof u.value&&u.value&&function yT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=X(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Bf(s){const o=Sr(s),u=null!==o?o.factory:Mr(s);if(null!==u)return u;if(s instanceof In)throw new Te(204,!1);if(s instanceof Function)return function HE(s){const o=s.length;if(o>0)throw function ao(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Te(204,!1);const u=function xn(s){const o=s&&(s[ei]||s[Di]);if(o){const u=function es(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Te(204,!1)}function Yg(s,o,u){let c;if(Os(s)){const d=X(s);return Mr(d)||Bf(d)}if(Uf(s))c=()=>X(s.useValue);else if(function ha(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...T(s.deps||[]));else if(function Wg(s){return!(!s||!s.useExisting)}(s))c=()=>Tn(X(s.useExisting));else{const d=X(s&&(s.useClass||s.provide));if(!function jf(s){return!!s.deps}(s))return Mr(d)||Bf(d);c=()=>new d(...T(s.deps))}return c}function kd(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Fy(s){return!!s.\u0275providers}function Qg(s,o){for(const u of s)Array.isArray(u)?Qg(u,o):Fy(u)?Qg(u.\u0275providers,o):o(u)}class Ly{}class Xg{resolveComponentFactory(o){throw function GE(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let _c=(()=>{class s{}return s.NULL=new Xg,s})();function wT(){return Od(sr(),Pe())}function Od(s,o){return new yc(Rr(s,o))}let yc=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=wT,s})();function zE(s){return s instanceof yc?s.nativeElement:s}class ET{}let wN=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function EN(){const s=Pe(),u=sn(sr().index,s);return(ir(u)?u:s)[11]}(),s})(),Vy=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class qE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const KE=new qE("14.2.3"),Uy={};function Wy(s){return s.ngOriginalError}class Gf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Wy(o);for(;u&&Wy(u);)u=Wy(u);return u||null}}const zy=new Map;let AT=0;const sm="__ngContext__";function zr(s,o){ir(o)?(s[sm]=o[20],function MT(s){zy.set(s[20],s)}(o)):s[sm]=o}function hu(s){return s instanceof Function?s():s}var pa=(()=>((pa=pa||{})[pa.Important=1]="Important",pa[pa.DashCase=2]="DashCase",pa))();function Qy(s,o){return undefined(s,o)}function Bd(s){const o=s[3];return di(o)?o[3]:o}function um(s){return oI(s[13])}function lm(s){return oI(s[4])}function oI(s){for(;null!==s&&!di(s);)s=s[4];return s}function jd(s,o,u,c,d){if(null!=c){let p,y=!1;di(c)?p=c:ir(c)&&(y=!0,c=c[0]);const E=Pn(c);0===s&&null!==u?null==d?fI(o,u,E):ga(o,u,E,d||null,!0):1===s&&null!==u?ga(o,u,E,d||null,!0):2===s?function GT(s,o,u){const c=hm(s,o);c&&function $T(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function RN(s,o,u,c,d){const p=u[7];p!==Pn(u)&&jd(o,s,c,p,d);for(let E=10;E<u.length;E++){const C=u[E];wc(C[1],C,s,o,c,p)}}(o,s,p,u,d)}}function cm(s,o,u){return s.createElement(o,u)}function cI(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Bn(d,-1)),u.splice(c,1)}function tv(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&cI(d,c),o>0&&(s[u-1][4]=c[4]);const p=dr(s,10+o);!function ev(s,o){wc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function qf(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&wc(s,o,u,3,null,null),function xN(s){let o=s[13];if(!o)return dm(s[1],s);for(;o;){let u=null;if(ir(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)ir(o)&&dm(o[1],o),o=o[3];null===o&&(o=s),ir(o)&&dm(o[1],o),u=o&&o[4]}o=u}}(o)}}function dm(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function rv(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof gi)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],C=p[y+1];try{C.call(E)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function nv(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+1],E="function"==typeof y?y(o):Pn(o[y]),C=c[d=u[p+2]],A=u[p+3];"boolean"==typeof A?E.removeEventListener(u[p],C,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),p+=2}else{const y=c[d=u[p+1]];u[p].call(y)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&di(o[3])){u!==o[3]&&cI(u,o);const c=o[19];null!==c&&c.detachView(s)}!function RT(s){zy.delete(s[20])}(o)}}function dI(s,o,u){return function hI(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===mt.None||d===mt.Emulated)return null}return Rr(c,u)}(s,o.parent,u)}function ga(s,o,u,c,d){s.insertBefore(o,u,c,d)}function fI(s,o,u){s.appendChild(o,u)}function pI(s,o,u,c,d){null!==c?ga(s,o,u,c,d):fI(s,o,u)}function hm(s,o){return s.parentNode(o)}let iv=function mI(s,o,u){return 40&s.type?Rr(s,u):null};function fm(s,o,u,c){const d=dI(s,c,o),p=o[11],E=function Jn(s,o,u){return iv(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)pI(p,d,u[C],E,!1);else pI(p,d,u,E,!1)}function pm(s,o){if(null!==o){const u=o.type;if(3&u)return Rr(o,s);if(4&u)return _I(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return pm(s,c);{const d=s[o.index];return di(d)?_I(-1,d):Pn(d)}}if(32&u)return Qy(o,s)()||Pn(s[o.index]);{const c=sv(s,o);return null!==c?Array.isArray(c)?c[0]:pm(Bd(s[16]),c):pm(s,o.next)}}return null}function sv(s,o){return null!==o?s[16][6].projection[o.projection]:null}function _I(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return pm(c,d)}return o[7]}function ov(s,o,u,c,d,p,y){for(;null!=u;){const E=c[u.index],C=u.type;if(y&&0===o&&(E&&zr(Pn(E),c),u.flags|=4),64!=(64&u.flags))if(8&C)ov(s,o,u.child,c,d,p,!1),jd(o,s,d,E,p);else if(32&C){const A=Qy(u,c);let N;for(;N=A();)jd(o,s,d,N,p);jd(o,s,d,E,p)}else 16&C?Kf(s,o,c,u,d,p):jd(o,s,d,E,p);u=y?u.projectionNext:u.next}}function wc(s,o,u,c,d,p){ov(u,c,s.firstChild,o,d,p,!1)}function Kf(s,o,u,c,d,p){const y=u[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)jd(o,s,d,C[A],p);else ov(s,o,C,y[3],d,p,!0)}function Ec(s,o,u){s.setAttribute(o,"style",u)}function Zf(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function WT(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const av="ng-template";function uv(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==WT(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function wI(s){return 4===s.type&&s.value!==av}function qT(s,o,u){return o===(4!==s.type||u?s.value:av)}function KT(s,o,u){let c=4;const d=s.attrs||[],p=function NN(s){for(let o=0;o<s.length;o++)if(Xa(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!qT(s,C,u)||""===C&&1===o.length){if(Ls(c))return!1;y=!0}}else{const A=8&c?C:o[++E];if(8&c&&null!==s.attrs){if(!uv(s.attrs,A,u)){if(Ls(c))return!1;y=!0}continue}const L=ZT(8&c?"class":C,d,wI(s),u);if(-1===L){if(Ls(c))return!1;y=!0;continue}if(""!==A){let Y;Y=L>p?"":d[L+1].toLowerCase();const ie=8&c?Y:null;if(ie&&-1!==WT(ie,A,0)||2&c&&A!==Y){if(Ls(c))return!1;y=!0}}}}else{if(!y&&!Ls(c)&&!Ls(C))return!1;if(y&&Ls(C))continue;y=!1,c=C|1&c}}return Ls(c)||y}function Ls(s){return 0==(1&s)}function ZT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function EI(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function YT(s,o,u=!1){for(let c=0;c<o.length;c++)if(KT(s,o[c],u))return!0;return!1}function II(s,o){return s?":not("+o.trim()+")":o}function CI(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Ls(y)&&(o+=II(p,d),d=""),c=y,p=p||!Ls(c);u++}return""!==d&&(o+=II(p,d)),o}const Ht={};function bI(s){DI(qt(),Pe(),Rn()+s,!1)}function DI(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Wo(o,p,u)}else{const p=s.preOrderHooks;null!==p&&zo(o,p,0,u)}as(u)}function Vs(s,o=null,u=null,c){const d=mm(s,o,u,c);return d.resolveInjectorInitializers(),d}function mm(s,o=null,u=null,c,d=new Set){const p=[u||Dt,_T(s)];return c=c||("object"==typeof s?void 0:fe(s)),new ky(p,o||Zg(),c||null,d)}let ya=(()=>{class s{static create(u,c){if(Array.isArray(u))return Vs({name:""},c,u,"");{const d=u.name??"";return Vs({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=co,s.NULL=new LE,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>Tn(OE)}),s.__NG_ELEMENT_ID__=-1,s})();function fu(s,o=nt.Default){const u=Pe();return null===u?Tn(s,o):Qo(sr(),u,X(s),o)}function wm(){throw new Error("invalid")}function Em(s,o){return s<<17|o<<2}function wo(s){return s>>17&32767}function mv(s){return 2|s}function pu(s){return(131068&s)>>2}function _v(s,o){return-131069&s|o<<2}function Hd(s){return 1|s}function BI(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const y=s.data[p];Yl(d),y.contentQueries(2,o[p],p)}}}function Am(s,o,u,c,d,p,y,E,C,A,N){const L=o.blueprint.slice();return L[0]=d,L[2]=76|c,(null!==N||s&&1024&s[2])&&(L[2]|=1024),Ha(L),L[3]=L[15]=s,L[8]=u,L[10]=y||s&&s[10],L[11]=E||s&&s[11],L[12]=C||s&&s[12]||null,L[9]=A||s&&s[9]||null,L[6]=p,L[20]=function xT(){return AT++}(),L[21]=N,L[16]=2==o.type?s[16]:L,L}function zd(s,o,u,c,d){let p=s.data[o];if(null===p)p=function Sv(s,o,u,c,d){const p=jo(),y=$u(),C=s.data[o]=function $I(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(s,o,u,c,d),function hd(){return Nt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const y=function Hu(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Wr(p,!0),p}function qd(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Av(s,o,u){Go(o);try{const c=s.viewQuery;null!==c&&tp(1,c,u);const d=s.template;null!==d&&jI(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&BI(s,o),s.staticViewQueries&&tp(2,s.viewQuery,u);const p=s.components;null!==p&&function vS(s,o){for(let u=0;u<o.length;u++)Lv(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ss()}}function xm(s,o,u,c){const d=o[2];if(128!=(128&d)){Go(o);try{Ha(o),function Ka(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&jI(s,o,u,2,c);const y=3==(3&d);if(y){const A=s.preOrderCheckHooks;null!==A&&Wo(o,A,null)}else{const A=s.preOrderHooks;null!==A&&zo(o,A,0,null),vd(o,0)}if(function eP(s){for(let o=um(s);null!==o;o=lm(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(512&d[2])&&Bn(p,1),d[2]|=512}}}(o),function XN(s){for(let o=um(s);null!==o;o=lm(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Ts(c)&&xm(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&BI(s,o),y){const A=s.contentCheckHooks;null!==A&&Wo(o,A)}else{const A=s.contentHooks;null!==A&&zo(o,A,1),vd(o,1)}!function Sm(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)as(~d);else{const p=d,y=u[++c],E=u[++c];fd(y,p),E(2,o[p])}}}finally{as(-1)}}(s,o);const E=s.components;null!==E&&function yS(s,o){for(let u=0;u<o.length;u++)KI(s,o[u])}(o,E);const C=s.viewQuery;if(null!==C&&tp(2,C,c),y){const A=s.viewCheckHooks;null!==A&&Wo(o,A)}else{const A=s.viewHooks;null!==A&&zo(o,A,2),vd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Bn(o[3],-1))}finally{Ss()}}}function jI(s,o,u,c,d){const p=Rn(),y=2&c;try{as(-1),y&&o.length>22&&DI(s,o,22,!1),u(c,d)}finally{as(p)}}function Mm(s,o,u){!no()||(function WI(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||ls(u,o),zr(c,o);const y=u.initialInputs;for(let E=d;E<p;E++){const C=s.data[E],A=ri(C);A&&DS(o,u,C);const N=Ui(o,s,E,u);zr(N,o),null!==y&&TS(0,E-d,N,C,0,y),A&&(sn(u.index,o)[8]=N)}}(s,o,u,Rr(u,o)),128==(128&u.flags)&&function Ov(s,o,u){const c=u.directiveStart,d=u.directiveEnd,p=u.index,y=function hf(){return Nt.lFrame.currentDirectiveIndex}();try{as(p);for(let E=c;E<d;E++){const C=s.data[E],A=o[E];$o(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Kd(C,A)}}finally{as(-1),$o(y)}}(s,o,u))}function Rm(s,o,u=Rr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function Nm(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=xv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function xv(s,o,u,c,d,p,y,E,C,A){const N=22+c,L=N+d,Y=function wS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ht);return u}(N,L),ie="function"==typeof A?A():A;return Y[1]={type:s,blueprint:Y,template:u,queries:null,viewQuery:E,declTNode:o,data:Y.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ie,incompleteFirstPass:!1}}function Mv(s,o,u,c){const d=AS(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&km(s).push(c,d.length-1))}function Rv(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function Nv(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,y=[];let E=null,C=null;for(let A=o.directiveStart;A<c;A++){const N=d[A],L=N.inputs,Y=null===p||wI(o)?null:JN(L,p);y.push(Y),E=Rv(L,A,E),C=Rv(N.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=C}function ES(s,o){const u=sn(o,s);16&u[2]||(u[2]|=32)}function Pv(s,o,u,c){let d=!1;if(no()){const p=function YN(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];YT(u,y.selectors,!1)&&(d||(d=[]),io(ls(u,o),s,y.type),ri(y)?(Pm(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==p){d=!0,bS(u,s.data.length,p.length);for(let N=0;N<p.length;N++){const L=p[N];L.providersResolver&&L.providersResolver(L)}let E=!1,C=!1,A=qd(s,o,p.length,null);for(let N=0;N<p.length;N++){const L=p[N];u.mergedAttrs=eu(u.mergedAttrs,L.hostAttrs),zI(s,u,o,A,L),CS(A,L,y),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const Y=L.type.prototype;!E&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!C&&(Y.ngOnChanges||Y.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),A++}Nv(s,u)}y&&function QN(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new Te(-301,!1);c.push(o[d],p)}}}(u,c,y)}return u.mergedAttrs=eu(u.mergedAttrs,u.attrs),d}function kv(s,o,u,c,d,p){const y=p.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function IS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=C&&E.push(C),E.push(c,d,y)}}function Kd(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Pm(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function CS(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ri(o)&&(u[""]=s)}}function bS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function zI(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=Mr(d.type)),y=new gi(p,ri(d),fu);s.blueprint[c]=y,u[c]=y,kv(s,o,0,c,qd(s,u,d.hostVars,Ht),d)}function DS(s,o,u){const c=Rr(o,s),d=Nm(u),p=s[10],y=Zd(s,Am(s,d,null,u.onPush?32:16,c,o,p,p.createRenderer(c,u),null,null,null));s[o.index]=y}function mu(s,o,u,c,d,p){const y=Rr(s,o);!function qI(s,o,u,c,d,p,y){if(null==p)s.removeAttribute(o,d,u);else{const E=null==y?Ce(p):y(p,c||"",d);s.setAttribute(o,d,E,u)}}(o[11],y,p,s.value,u,c,d)}function TS(s,o,u,c,d,p){const y=p[o];if(null!==y){const E=c.setInput;for(let C=0;C<y.length;){const A=y[C++],N=y[C++],L=y[C++];null!==E?c.setInput(u,L,A,N):u[N]=L}}}function JN(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function SS(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function KI(s,o){const u=sn(o,s);if(Ts(u)){const c=u[1];48&u[2]?xm(c,u,c.template,u[8]):u[5]>0&&Fv(u)}}function Fv(s){for(let c=um(s);null!==c;c=lm(c))for(let d=10;d<c.length;d++){const p=c[d];if(Ts(p))if(512&p[2]){const y=p[1];xm(y,p,y.template,p[8])}else p[5]>0&&Fv(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=sn(u[c],s);Ts(d)&&d[5]>0&&Fv(d)}}function Lv(s,o){const u=sn(o,s),c=u[1];(function Vv(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Av(c,u,u[8])}function Zd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function ep(s){for(;s;){s[2]|=32;const o=Bd(s);if(jl(s)&&!o)return s;s=o}return null}function Yd(s,o,u,c=!0){const d=o[10];d.begin&&d.begin();try{xm(s,o,s.template,u)}catch(y){throw c&&Uv(o,y),y}finally{d.end&&d.end()}}function tp(s,o,u){Yl(0),o(s,u)}function AS(s){return s[7]||(s[7]=[])}function km(s){return s.cleanup||(s.cleanup=[])}function Uv(s,o){const u=s[9],c=u?u.get(Gf,null):null;c&&c.handleError(o)}function Bv(s,o,u,c,d){for(let p=0;p<u.length;){const y=u[p++],E=u[p++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,d,c,E):C[E]=d}}function Qd(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?d=ve(d,E):2==p&&(c=ve(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function Fm(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(Pn(p)),di(p))for(let E=10;E<p.length;E++){const C=p[E],A=C[1].firstChild;null!==A&&Fm(C[1],C,A,c)}const y=u.type;if(8&y)Fm(s,o,u.child,c);else if(32&y){const E=Qy(u,o);let C;for(;C=E();)c.push(C)}else if(16&y){const E=sv(o,u);if(Array.isArray(E))c.push(...E);else{const C=Bd(o[16]);Fm(C[1],C,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class gs{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Fm(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(di(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(tv(o,c),dr(u,c))}this._attachedToViewContainer=!1}qf(this._lView[1],this._lView)}onDestroy(o){Mv(this._lView[1],this._lView,null,o)}markForCheck(){ep(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Yd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lI(s,o){wc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=o}}class Et extends gs{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Yd(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class np extends _c{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=$(o);return new _u(u,this.ngModule)}}function Vt(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class Vm{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const d=this.injector.get(o,Uy,c);return d!==Uy||u===Uy?d:this.parentInjector.get(o,u,c)}}class _u extends Ly{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function JT(s){return s.map(CI).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Vt(this.componentDef.inputs)}get outputs(){return Vt(this.componentDef.outputs)}create(o,u,c,d){let p=(d=d||this.ngModule)instanceof fa?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new Vm(o,p):o,E=y.get(ET,null);if(null===E)throw new Te(407,!1);const C=y.get(Vy,null),A=E.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",L=c?function HI(s,o,u){return s.selectRootElement(o,u===mt.ShadowDom)}(A,c,this.componentDef.encapsulation):cm(E.createRenderer(null,this.componentDef),N,function Lm(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),Y=this.componentDef.onPush?288:272,ie=xv(0,null,null,1,0,null,null,null,null,null),Se=Am(null,ie,null,Y,null,null,E,A,C,y,null);let $e,Ye;Go(Se);try{const ut=function RS(s,o,u,c,d,p){const y=u[1];u[22]=s;const C=zd(y,22,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(Qd(C,A,!0),null!==s&&(us(d,s,A),null!==C.classes&&Zf(d,s,C.classes),null!==C.styles&&Ec(d,s,C.styles)));const N=c.createRenderer(s,o),L=Am(u,Nm(o),null,o.onPush?32:16,u[22],C,c,N,p||null,null,null);return y.firstCreatePass&&(io(ls(C,u),y,o.type),Pm(y,C),bS(C,u.length,1)),Zd(u,L),u[22]=L}(L,this.componentDef,Se,E,A);if(L)if(c)us(A,L,["ng-version",KE.full]);else{const{attrs:Ct,classes:ke}=function XT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!Ls(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ct&&us(A,L,Ct),ke&&ke.length>0&&Zf(A,L,ke.join(" "))}if(Ye=to(ie,22),void 0!==u){const Ct=Ye.projection=[];for(let ke=0;ke<this.ngContentSelectors.length;ke++){const At=u[ke];Ct.push(null!=At?Array.from(At):null)}}$e=function yi(s,o,u,c){const d=u[1],p=function ZN(s,o,u){const c=sr();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),zI(s,c,o,qd(s,o,1,null),u),Nv(s,c));const d=Ui(o,s,c.directiveStart,c);zr(d,o);const p=Rr(c,o);return p&&zr(p,o),d}(d,u,o);if(s[8]=u[8]=p,null!==c)for(const E of c)E(p,o);if(o.contentQueries){const E=sr();o.contentQueries(1,p,E.directiveStart)}const y=sr();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(as(y.index),kv(u[1],y,0,y.directiveStart,y.directiveEnd,o),Kd(o,p)),p}(ut,this.componentDef,Se,[Um]),Av(ie,Se,null)}finally{Ss()}return new MS(this.componentType,$e,Od(Ye,Se),Se,Ye)}}class MS extends class $E{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new Et(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;Bv(p[1],p,d,o,u),ES(p,this._tNode.index)}}get injector(){return new Xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Um(){const s=sr();tc(Pe()[1],s)}function Ia(s){let o=function Kr(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(ri(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Te(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=jv(s.inputs),y.declaredInputs=jv(s.declaredInputs),y.outputs=jv(s.outputs);const E=d.hostBindings;E&&JI(s,E);const C=d.viewQuery,A=d.contentQueries;if(C&&QI(s,C),A&&Hv(s,A),me(s.inputs,d.inputs),me(s.declaredInputs,d.declaredInputs),me(s.outputs,d.outputs),ri(d)&&d.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===Ia&&(u=!1)}}o=Object.getPrototypeOf(o)}!function NS(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=eu(d.hostAttrs,u=eu(u,d.hostAttrs))}}(c)}function jv(s){return s===xr?{}:s===Dt?[]:s}function QI(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Hv(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function JI(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let rp=null;function yu(){if(!rp){const s=kt.Symbol;if(s&&s.iterator)rp=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(rp=c)}}}return rp}function Wi(s){return!!Wv(s)&&(Array.isArray(s)||!(s instanceof Map)&&yu()in s)}function Wv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function li(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function sp(s,o,u,c){const d=Pe();return li(d,Za(),o)&&(qt(),mu(Nn(),d,s,o,u,c)),sp}function Hm(s,o,u,c,d,p,y,E){const C=Pe(),A=qt(),N=s+22,L=A.firstCreatePass?function Yv(s,o,u,c,d,p,y,E,C){const A=o.consts,N=zd(o,s,4,y||null,pi(A,E));Pv(o,u,N,pi(A,C)),tc(o,N);const L=N.tViews=xv(2,N,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),L.queries=o.queries.embeddedTView(N)),N}(N,A,C,o,u,c,d,p,y):A.data[N];Wr(L,!1);const Y=C[11].createComment("");fm(A,C,Y,L),zr(Y,C),Zd(C,C[N]=SS(Y,C,Y,L)),Ua(L)&&Mm(A,C,L),null!=y&&Rm(C,L,E)}function $m(s,o,u){const c=Pe();return li(c,Za(),o)&&function ps(s,o,u,c,d,p,y,E){const C=Rr(o,u);let N,A=o.inputs;!E&&null!=A&&(N=A[c])?(Bv(s,u,N,c,d),Bl(o)&&ES(u,o.index)):3&o.type&&(c=function qN(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,p.setProperty(C,c,d))}(qt(),Nn(),c,s,o,c[11],u,!1),$m}function Jv(s,o,u,c,d){const y=d?"class":"style";Bv(s,u,o.inputs[y],y,c)}function up(s,o,u,c){const d=Pe(),p=qt(),y=22+s,E=d[11],C=d[y]=cm(E,o,function ec(){return Nt.lFrame.currentNamespace}()),A=p.firstCreatePass?function nC(s,o,u,c,d,p,y){const E=o.consts,A=zd(o,s,2,d,pi(E,p));return Pv(o,u,A,pi(E,y)),null!==A.attrs&&Qd(A,A.attrs,!1),null!==A.mergedAttrs&&Qd(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,p,d,0,o,u,c):p.data[y];Wr(A,!0);const N=A.mergedAttrs;null!==N&&us(E,C,N);const L=A.classes;null!==L&&Zf(E,C,L);const Y=A.styles;return null!==Y&&Ec(E,C,Y),64!=(64&A.flags)&&fm(p,d,C,A),0===function Ga(){return Nt.lFrame.elementDepthCount}()&&zr(C,d),function dd(){Nt.lFrame.elementDepthCount++}(),Ua(A)&&(Mm(p,d,A),function Xf(s,o,u){if(No(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}(p,A,d)),null!==c&&Rm(d,A),up}function ih(){let s=sr();$u()?function Ho(){Nt.lFrame.isParent=!1}():(s=s.parent,Wr(s,!1));const o=s;!function Wa(){Nt.lFrame.elementDepthCount--}();const u=qt();return u.firstCreatePass&&(tc(u,s),No(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Wu(s){return 0!=(16&s.flags)}(o)&&Jv(u,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function zu(s){return 0!=(32&s.flags)}(o)&&Jv(u,o,Pe(),o.stylesWithoutHost,!1),ih}function Gm(s,o,u,c){return up(s,o,u,c),ih(),Gm}function Lr(){return Pe()}function Vr(s){return!!s&&"function"==typeof s.then}function dp(s){return!!s&&"function"==typeof s.subscribe}const zm=dp;function Xv(s,o,u,c){const d=Pe(),p=qt(),y=sr();return function sC(s,o,u,c,d,p,y,E){const C=Ua(c),N=s.firstCreatePass&&km(s),L=o[8],Y=AS(o);let ie=!0;if(3&c.type||E){const Ye=Rr(c,o),ut=E?E(Ye):Ye,Ct=Y.length,ke=E?gn=>E(Pn(gn[c.index])):c.index;let At=null;if(!E&&C&&(At=function iC(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===u&&d[p+1]===c){const E=o[7],C=d[p+2];return E.length>C?E[C]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,c.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=p,At.__ngLastListenerFn__=p,ie=!1;else{p=e0(c,o,L,p,!1);const gn=u.listen(ut,d,p);Y.push(p,gn),N&&N.push(d,ke,Ct,Ct+1)}}else p=e0(c,o,L,p,!1);const Se=c.outputs;let $e;if(ie&&null!==Se&&($e=Se[d])){const Ye=$e.length;if(Ye)for(let ut=0;ut<Ye;ut+=2){const er=o[$e[ut]][$e[ut+1]].subscribe(p),Sl=Y.length;Y.push(p,er),N&&N.push(d,c.index,Sl,-(Sl+1))}}}(p,d,d[11],y,s,o,0,c),Xv}function oC(s,o,u,c){try{return!1!==u(c)}catch(d){return Uv(s,d),!1}}function e0(s,o,u,c,d){return function p(y){if(y===Function)return c;ep(2&s.flags?sn(s.index,o):o);let C=oC(o,0,c,y),A=p.__ngNextListenerFn__;for(;A;)C=oC(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function qm(s=1){return function As(s){return(Nt.lFrame.contextLView=function md(s,o){for(;s>0;)o=o[15],s--;return o}(s,Nt.lFrame.contextLView))[8]}(s)}function Dc(s,o,u,c,d){const p=s[u+1],y=null===o;let E=c?wo(p):pu(p),C=!1;for(;0!==E&&(!1===C||y);){const N=s[E+1];US(s[E],o)&&(C=!0,s[E+1]=c?Hd(N):mv(N)),E=c?wo(N):pu(N)}C&&(s[u+1]=c?mv(p):Hd(p))}function US(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&$i(s,o)>=0}function pp(s,o){return function Bs(s,o,u,c){const d=Pe(),p=qt(),y=function os(s){const o=Nt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function gp(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[Rn()],y=function Xm(s,o){return o>=s.expandoStartIndex}(s,u);(function m0(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!y&&(o=!1),o=function p0(s,o,u,c){const d=function Zl(s){const o=Nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=vu(u=g0(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=g0(d,s,o,u,c),null===p){let C=function dC(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==pu(c))return s[wo(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=g0(null,s,o,C[1],c),C=vu(C,o.attrs,c),function hC(s,o,u,c){s[wo(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function fC(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=vu(c,s[p].hostAttrs,u);return vu(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function LS(s,o,u,c,d,p){let y=p?o.classBindings:o.styleBindings,E=wo(y),C=pu(y);s[c]=u;let N,A=!1;if(Array.isArray(u)){const L=u;N=L[1],(null===N||$i(L,N)>0)&&(A=!0)}else N=u;if(d)if(0!==C){const Y=wo(s[E+1]);s[c+1]=Em(Y,E),0!==Y&&(s[Y+1]=_v(s[Y+1],c)),s[E+1]=function lS(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Em(E,0),0!==E&&(s[E+1]=_v(s[E+1],c)),E=c;else s[c+1]=Em(C,0),0===E?E=c:s[C+1]=_v(s[C+1],c),C=c;A&&(s[c+1]=mv(s[c+1])),Dc(s,N,c,!0),Dc(s,N,c,!1),function VS(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&$i(p,o)>=0&&(u[c+1]=Hd(u[c+1]))}(o,N,s,c,p),y=Em(E,C),p?o.classBindings=y:o.styleBindings=y}(d,p,o,u,y,c)}}(p,s,y,c),o!==Ht&&li(d,y,o)&&function dl(s,o,u,c,d,p,y,E){if(!(3&o.type))return;const C=s.data,A=C[E+1];t_(function _i(s){return 1==(1&s)}(A)?e_(C,o,u,d,pu(A),y):void 0)||(t_(p)||function gv(s){return 2==(2&s)}(A)&&(p=e_(C,null,u,d,E,y)),function vI(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:pa.DashCase;null==d?s.removeStyle(u,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=pa.Important),s.setStyle(u,c,d,p))}}(c,y,Si(Rn(),u),d,p))}(p,p.data[Rn()],d,d[11],s,d[y+1]=function jS(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(ks(s)))),s}(o,u),c,y)}(s,o,null,!0),pp}function g0(s,o,u,c,d){let p=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(p=o[E],c=vu(c,p.hostAttrs,d),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function vu(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),it(s,y,!!u||o[++p]))}return void 0===s?null:s}function e_(s,o,u,c,d,p){const y=null===o;let E;for(;d>0;){const C=s[d],A=Array.isArray(C),N=A?C[1]:C,L=null===N;let Y=u[d+1];Y===Ht&&(Y=L?Dt:void 0);let ie=L?su(Y,c):N===c?Y:void 0;if(A&&!t_(ie)&&(ie=su(C,c)),t_(ie)&&(E=ie,y))return E;const Se=s[d+1];d=y?wo(Se):pu(Se)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(E=su(C,c))}return E}function t_(s){return void 0!==s}function _0(s,o=""){const u=Pe(),c=qt(),d=s+22,p=c.firstCreatePass?zd(c,d,1,o,null):c.data[d],y=u[d]=function Xy(s,o){return s.createText(o)}(u[11],o);fm(c,u,y,p),Wr(p,!1)}function y0(s){return ba("",s,""),y0}function ba(s,o,u){const c=Pe(),d=function ul(s,o,u,c){return li(s,Za(),u)?o+Ce(u)+c:Ht}(c,s,o,u);return d!==Ht&&function ol(s,o,u){const c=Si(o,s);!function aI(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,Rn(),d),ba}const wu=void 0;var bp=["en",[["a","p"],["AM","PM"],wu],[["AM","PM"],wu,wu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wu,"{1} 'at' {0}",wu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DC(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Ta={};function fr(s){const o=function AC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=SC(o);if(u)return u;const c=o.split("-")[0];if(u=SC(c),u)return u;if("en"===c)return bp;throw new Te(701,!1)}function TC(s){return fr(s)[Tt.PluralCase]}function SC(s){return s in Ta||(Ta[s]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[s]),Ta[s]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const Sc="en-US";let I0=Sc;function Np(s,o,u,c,d){if(s=X(s),Array.isArray(s))for(let p=0;p<s.length;p++)Np(s[p],o,u,c,d);else{const p=qt(),y=Pe();let E=Os(s)?s:X(s.provide),C=Yg(s);const A=sr(),N=1048575&A.providerIndexes,L=A.directiveStart,Y=A.providerIndexes>>20;if(Os(s)||!s.multi){const ie=new gi(C,d,fu),Se=Sa(E,o,d?N:N+Y,L);-1===Se?(io(ls(A,y),p,E),g_(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(ie),y.push(ie)):(u[Se]=ie,y[Se]=ie)}else{const ie=Sa(E,o,N+Y,L),Se=Sa(E,o,N,N+Y),$e=ie>=0&&u[ie],Ye=Se>=0&&u[Se];if(d&&!Ye||!d&&!$e){io(ls(A,y),p,E);const ut=function Co(s,o,u,c,d){const p=new gi(s,u,fu);return p.multi=[],p.index=o,p.componentProviders=0,k0(p,d,c&&!u),p}(d?he:O0,u.length,d,c,C);!d&&Ye&&(u[Se].providerFactory=ut),g_(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(ut),y.push(ut)}else g_(p,s,ie>-1?ie:Se,k0(u[d?Se:ie],C,!d&&c));!d&&c&&Ye&&u[Se].componentProviders++}}}function g_(s,o,u,c){const d=Os(o),p=function jE(s){return!!s.useClass}(o);if(d||p){const C=(p?X(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const N=A.indexOf(u);-1===N?A.push(u,[c,C]):A[N+1].push(c,C)}else A.push(u,C)}}}function k0(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Sa(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function O0(s,o,u,c){return mh(this.multi,[])}function he(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Ui(u,u[1],this.providerFactory.index,c);p=E.slice(0,y),mh(d,p);for(let C=y;C<E.length;C++)p.push(E[C])}else p=[],mh(d,p);return p}function mh(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function qC(s,o=[]){return u=>{u.providersResolver=(c,d)=>function _s(s,o,u){const c=qt();if(c.firstCreatePass){const d=ri(s);Np(u,c.data,c.blueprint,d,!0),Np(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Aa{}class Iu{}function uA(s,o){return new F0(s,o??null)}class F0 extends Aa{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new np(this);const c=vt(o);this._bootstrapComponents=hu(c.bootstrap),this._r3Injector=mm(o,u,[{provide:Aa,useValue:this},{provide:_c,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Pp extends Iu{constructor(o){super(),this.moduleType=o}create(o){return new F0(this.moduleType,o)}}class lA extends Aa{constructor(o,u,c){super(),this.componentFactoryResolver=new np(this),this.instance=null;const d=new ky([...o,{provide:Aa,useValue:this},{provide:_c,useValue:this.componentFactoryResolver}],u||Zg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function L0(s,o,u=null){return new lA(s,o,u).injector}let qi=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=VE(0,u.type),d=c.length>0?L0([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Xt({token:s,providedIn:"environment",factory:()=>new s(Tn(fa))}),s})();function V0(s){s.getStandaloneInjector=o=>o.get(qi).getOrCreateStandaloneInjector(s)}function B0(s,o,u,c,d,p){const y=o+u;return li(s,y,d)?function Eo(s,o,u){return s[o]=u}(s,y+1,p?c.call(p,d):c(d)):function js(s,o){const u=s[o];return u===Ht?void 0:u}(s,y+1)}function wh(s,o){const u=qt();let c;const d=s+22;u.firstCreatePass?(c=function eb(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[d]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(d,c.onDestroy)):c=u.data[d];const p=c.factory||(c.factory=Mr(c.type)),y=hn(fu);try{const E=tu(!1),C=p();return tu(E),function Qv(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Pe(),d,C),C}finally{hn(y)}}function Up(s,o,u){const c=s+22,d=Pe(),p=function Li(s,o){return s[o]}(d,c);return function Eh(s,o){return s[1].data[o].pure}(d,c)?B0(d,function or(){const s=Nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,p.transform,u,p):p.transform(u)}function jr(s){return o=>{setTimeout(s,void 0,o)}}const bo=class nb extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,p=u||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),p=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(p=jr(p),d&&(d=jr(d)),y&&(y=jr(y)));const E=super.subscribe({next:d,error:p,complete:y});return o instanceof B.w0&&o.add(E),E}};function Fn(){return this._results[yu()]()}class j0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=yu(),c=j0.prototype;c[u]||(c[u]=Fn)}get changes(){return this._changes||(this._changes=new bo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Cn(o);(this._changesDetected=!function Hi(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ih=(()=>{class s{}return s.__NG_ELEMENT_ID__=jp,s})();const Pc=Ih,pA=class extends Pc{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=Am(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(c)),Av(c,d,o),new gs(d)}};function jp(){return kc(sr(),Pe())}function kc(s,o){return 4&s.type?new pA(o,s,Od(s,o)):null}let Oc=(()=>{class s{}return s.__NG_ELEMENT_ID__=rb,s})();function rb(){return ob(sr(),Pe())}const ib=Oc,Qr=class extends ib{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Od(this._hostTNode,this._hostLView)}get injector(){return new Xo(this._hostTNode,this._hostLView)}get parentInjector(){const o=nu(this._hostTNode,this._hostLView);if(mf(o)){const u=xs(o,this._hostLView),c=ar(o);return new Xo(u[1].data[c+8],u)}return new Xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=sb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const y=o.createEmbeddedView(u||{},p);return this.insert(y,d),y}createComponent(o,u,c,d,p){const y=o&&!function ji(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const L=u||{};E=L.index,c=L.injector,d=L.projectableNodes,p=L.environmentInjector||L.ngModuleRef}const C=y?o:new _u($(o)),A=c||this.parentInjector;if(!p&&null==C.ngModule){const Y=(y?A:this.parentInjector).get(fa,null);Y&&(p=Y)}const N=C.create(A,d,void 0,p);return this.insert(N.hostView,E),N}insert(o,u){const c=o._lView,d=c[1];if(function ql(s){return di(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const L=c[3],Y=new Qr(L,L[6],L[3]);Y.detach(Y.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function jT(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],oo(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function HT(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(d,c,y,p);const E=_I(p,y),C=c[11],A=hm(C,y[7]);return null!==A&&function uI(s,o,u,c,d,p){c[0]=d,c[6]=o,wc(s,c,u,1,d,p)}(d,y[6],C,c,A,E),o.attachToViewContainerRef(),oo(H0(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=sb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=tv(this._lContainer,u);c&&(dr(H0(this._lContainer),u),qf(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=tv(this._lContainer,u);return c&&null!=dr(H0(this._lContainer),u)?new gs(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function sb(s){return s[8]}function H0(s){return s[8]||(s[8]=[])}function ob(s,o){let u;const c=o[s.index];if(di(c))u=c;else{let d;if(8&s.type)d=Pn(c);else{const p=o[11];d=p.createComment("");const y=Rr(s,o);ga(p,hm(p,y),d,function gI(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=u=SS(c,o,d,s),Zd(o,u)}return new Qr(u,s,o)}class $0{constructor(o){this.queryList=o,this.matches=null}clone(){return new $0(this.queryList)}setDirty(){this.queryList.setDirty()}}class G0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new G0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==I_(o,u).matches&&this.queries[u].setDirty()}}class bu{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class El{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new El(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class W0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new W0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,ub(u,p)),this.matchTNodeWithReadOption(o,u,iu(u,o,p,!1,!1))}else c===Ih?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,iu(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===yc||d===Oc||d===Ih&&4&u.type)this.addMatch(u.index,-2);else{const p=iu(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function ub(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Du(s,o,u,c){return-1===u?function lb(s,o){return 11&s.type?Od(s,o):4&s.type?kc(s,o):null}(o,s):-2===u?function cb(s,o,u){return u===yc?Od(o,s):u===Ih?kc(o,s):u===Oc?ob(o,s):void 0}(s,o,c):Ui(s,s[1],u,o)}function Fc(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,y=u.matches,E=[];for(let C=0;C<y.length;C+=2){const A=y[C];E.push(A<0?null:Du(o,p[A],y[C+1],u.metadata.read))}d.matches=E}return d.matches}function v_(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const y=Fc(s,o,d,u);for(let E=0;E<p.length;E+=2){const C=p[E];if(C>0)c.push(y[E/2]);else{const A=p[E+1],N=o[-C];for(let L=10;L<N.length;L++){const Y=N[L];Y[17]===Y[3]&&v_(Y[1],Y,A,c)}if(null!==N[9]){const L=N[9];for(let Y=0;Y<L.length;Y++){const ie=L[Y];v_(ie[1],ie,A,c)}}}}}return c}function w_(s){const o=Pe(),u=qt(),c=Ya();Yl(c+1);const d=I_(u,c);if(s.dirty&&function zl(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?v_(u,o,c,[]):Fc(u,o,d,c);s.reset(p,zE),s.notifyOnChanges()}return!0}return!1}function E_(s,o,u,c){const d=qt();if(d.firstCreatePass){const p=sr();(function Ch(s,o,u){null===s.queries&&(s.queries=new El),s.queries.track(new W0(o,u))})(d,new bu(o,u,c),p.index),function db(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Hp(s,o,u){const c=new j0(4==(4&u));Mv(s,o,c,c.destroy),null===o[19]&&(o[19]=new G0),o[19].queries.push(new $0(c))}(d,Pe(),u)}function Lc(){return function Ki(s,o){return s[19].queries[o].queryList}(Pe(),Ya())}function I_(s,o){return s.queries.getByIndex(o)}function Zp(...s){}const rw=new In("Application Initializer");let Yp=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Zp,this.reject=Zp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Vr(p))u.push(p);else if(zm(p)){const y=new Promise((E,C)=>{p.subscribe({complete:E,error:C})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Tn(rw,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const bb=new In("AppId",{providedIn:"root",factory:function Db(){return`${jc()}${jc()}${jc()}`}});function jc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iw=new In("Platform Initializer"),IA=new In("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hr=new In("appBootstrapListener");let Qp=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const xh=new In("LocaleId",{providedIn:"root",factory:()=>b(xh,nt.Optional|nt.SkipSelf)||function Ma(){return typeof $localize<"u"&&$localize.locale||Sc}()}),Sb=new In("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ab{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let TA=(()=>{class s{compileModuleSync(u){return new Pp(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=hu(vt(u).declarations).reduce((y,E)=>{const C=$(E);return C&&y.push(new _u(C)),y},[]);return new Ab(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const xA=(()=>Promise.resolve(0))();function N_(s){typeof Zone>"u"?xA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class $s{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bo(!1),this.onMicrotaskEmpty=new bo(!1),this.onStable=new bo(!1),this.onError=new bo(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function MA(){let s=kt.requestAnimationFrame,o=kt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function NA(s){const o=()=>{!function RA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(kt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,aw(s),s.isCheckStableRunning=!0,bl(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),aw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,y,E)=>{try{return uw(s),u.invokeTask(d,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Ii(s)}},onInvoke:(u,c,d,p,y,E,C)=>{try{return uw(s),u.invoke(d,p,y,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Ii(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,aw(s),bl(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$s.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if($s.isInAngularZone())throw new Te(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,Mh,Zp,Zp);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Mh={};function bl(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function aw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function uw(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Ii(s){s._nesting--,bl(s)}class PA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bo,this.onMicrotaskEmpty=new bo,this.onStable=new bo,this.onError=new bo}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const lw=new In(""),To=new In("");let cw,Mb=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cw||(function Rb(s){cw=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$s.assertNotInAngularZone(),N_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())N_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Tn($s),Tn(Jp),Tn(To))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),Jp=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return cw?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Dl=null;const Nb=new In("AllowMultipleToken"),dw=new In("PlatformDestroyListeners");class FA{constructor(o,u){this.name=o,this.token=u}}function kb(s,o,u=[]){const c=`Platform: ${o}`,d=new In(c);return(p=[])=>{let y=P_();if(!y||y.injector.get(Nb,!1)){const E=[...u,...p,{provide:d,useValue:!0}];s?s(E):function LA(s){if(Dl&&!Dl.get(Nb,!1))throw new Te(400,!1);Dl=s;const o=s.get(fw);(function Pb(s){const o=s.get(iw,null);o&&o.forEach(u=>u())})(s)}(function hw(s=[],o){return ya.create({name:o,providers:[{provide:zg,useValue:"platform"},{provide:dw,useValue:new Set([()=>Dl=null])},...s]})}(E,c))}return function UA(s){const o=P_();if(!o)throw new Te(401,!1);return o}()}}function P_(){return Dl?.get(fw)??null}let fw=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function k_(s,o){let u;return u="noop"===s?new PA:("zone.js"===s?void 0:s)||new $s(o),u}(c?.ngZone,function Ob(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:$s,useValue:d}];return d.run(()=>{const y=ya.create({providers:p,parent:this.injector,name:u.moduleType.name}),E=u.create(y),C=E.injector.get(Gf,null);if(!C)throw new Te(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:N=>{C.handleError(N)}});E.onDestroy(()=>{Nh(this._modules,E),A.unsubscribe()})}),function $r(s,o,u){try{const c=u();return Vr(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const A=E.injector.get(Yp);return A.runInitializers(),A.donePromise.then(()=>(function a_(s){Gt(s,"Expected localeId to be defined"),"string"==typeof s&&(I0=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(xh,Sc)||Sc),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,c=[]){const d=O_({},c);return function kA(s,o,u){const c=new Pp(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(Rh);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Te(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(dw,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Tn(ya))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function O_(s,o){return Array.isArray(o)?o.reduce(O_,s):{...s,...o}}let Rh=(()=>{class s{constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new P.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new P.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{$s.assertNotInAngularZone(),N_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{$s.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,oe.T)(p,y.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof Ly;if(!this._injector.get(Yp).done)throw!d&&qe(u),new Te(405,false);let y;y=d?u:this._injector.get(_c).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const E=function OA(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Aa),A=y.create(ya.NULL,[],c||y.selector,E),N=A.location.nativeElement,L=A.injector.get(lw,null);return L?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),Nh(this.components,A),L?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Nh(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Hr,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Nh(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Te(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Tn($s),Tn(fa),Tn(Gf))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Nh(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Lb=!0,pw=!1;function F_(){return pw=!0,Lb}function Hc(){if(pw)throw new Error("Cannot enable prod mode after platform setup.");Lb=!1}let Vb=(()=>{class s{}return s.__NG_ELEMENT_ID__=gw,s})();function gw(s){return function mw(s,o,u){if(Bl(s)&&!u){const c=sn(s.index,o);return new gs(c,c)}return 47&s.type?new gs(o[16],o):null}(sr(),Pe(),16==(16&s))}class ww{constructor(){}supports(o){return Wi(o)}create(o){return new B_(o)}}const Xp=(s,o)=>o;class B_{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Xp}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<Ni(c,d,p)?u:c,E=Ni(y,d,p),C=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{p||(p=[]);const A=E-d,N=C-d;if(A!=N){for(let Y=0;Y<A;Y++){const ie=Y<p.length?p[Y]:p[Y]=0,Se=ie+Y;N<=Se&&Se<A&&(p[Y]=ie+1)}p[y.previousIndex]=N-A}}E!==C&&o(y,E,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Wi(o))throw new Te(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),c=!0),u=u._next}else d=0,function kS(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[yu()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new eg(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ew),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ew),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class eg{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Ew{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new jb,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ni(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Iw{constructor(){}supports(o){return o instanceof Map||Wv(o)}create(){return new j_}}class j_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Wv(o)))throw new Te(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new H_(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class H_{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Cw(){return new Ra([new ww])}let Ra=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Cw()),deps:[[s,new St,new Be]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Te(901,!1)}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:Cw}),s})();function bw(){return new Mu([new Iw])}let Mu=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||bw()),deps:[[s,new St,new Be]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Te(901,!1)}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:bw}),s})();const Hb=kb(null,"core",[]);let qA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Tn(Rh))},s.\u0275mod=It({type:s}),s.\u0275inj=Ut({}),s})();function KA(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(pt,Re,F)=>{F.d(Re,{Z:()=>Te});var f=F(2090),B=F(4859),P=F(9681),oe=F(1877);class le{constructor(Ce,_e){this._delegate=Ce,this.firebase=_e,(0,P._addComponent)(Ce,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ce,_e=P._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(Ce);return!et.isInitialized()&&"EXPLICIT"===(null===(Xe=et.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&et.initialize(),et.getImmediate({identifier:_e})}_removeServiceInstance(Ce,_e=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(_e)}_addComponent(Ce){(0,P._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,P._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function ve(){const st=function fe(st){const Ce={},_e={__esModule:!0,initializeApp:function Le(se,de={}){const we=P.initializeApp(se,de);if((0,f.r3)(Ce,we.name))return Ce[we.name];const J=new st(we,_e);return Ce[we.name]=J,J},app:et,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ae(se){const de=se.name,we=de.replace("-compat","");if(P._registerComponent(se)&&"PUBLIC"===se.type){const J=(te=et())=>{if("function"!=typeof te[we])throw me.create("invalid-app-argument",{appName:de});return te[we]()};void 0!==se.serviceProps&&(0,f.ZB)(J,se.serviceProps),_e[we]=J,st.prototype[we]=function(...te){return this._getService.bind(this,de).apply(this,se.multipleInstances?te:[])}}return"PUBLIC"===se.type?_e[we]:null},removeApp:function Xe(se){delete Ce[se]},useAsService:function ze(se,de){return"serverAuth"===de?null:de},modularAPIs:P}};function et(se){if(!(0,f.r3)(Ce,se=se||P._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:se});return Ce[se]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function Ne(){return Object.keys(Ce).map(se=>Ce[se])}}),et.App=st,_e}(le);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ce(_e){(0,f.ZB)(st,_e)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),st}(),z=new oe.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=q;!function Oe(st){(0,P.registerVersion)("@firebase/app-compat","0.1.34",st)}()},9681:(pt,Re,F)=>{F.r(Re),F.d(Re,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ki,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>rn,_addOrOverwriteComponent:()=>Xt,_apps:()=>mn,_clearComponents:()=>zs,_components:()=>Ln,_getProvider:()=>Ut,_registerComponent:()=>Wt,_removeServiceInstance:()=>Sr,deleteApp:()=>Oi,getApp:()=>Vn,getApps:()=>Di,initializeApp:()=>ei,onLog:()=>Un,registerVersion:()=>yr,setLogLevel:()=>hn});var f=F(5861),B=F(4859),P=F(1877),oe=F(2090),le=F(8766);class ye{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(Z=>{if(function me(H){return"VERSION"===H.getComponent()?.type}(Z)){const xe=Z.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(Z=>Z).join(" ")}}const fe="@firebase/app",q=new P.Yd("@firebase/app"),Gt="[DEFAULT]",Ke={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mn=new Map,Ln=new Map;function rn(H,K){try{H.container.addComponent(K)}catch(Z){q.debug(`Component ${K.name} failed to register with FirebaseApp ${H.name}`,Z)}}function Xt(H,K){H.container.addOrOverwriteComponent(K)}function Wt(H){const K=H.name;if(Ln.has(K))return q.debug(`There were multiple attempts to register component ${K}.`),!1;Ln.set(K,H);for(const Z of mn.values())rn(Z,H);return!0}function Ut(H,K){const Z=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Z&&Z.triggerHeartbeat(),H.container.getProvider(K)}function Sr(H,K,Z=Gt){Ut(H,K).clearInstance(Z)}function zs(){Ln.clear()}const xn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class es{constructor(K,Z,xe){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},Z),this._name=Z.name,this._automaticDataCollectionEnabled=Z.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}const ki="9.10.0";function ei(H,K={}){"object"!=typeof K&&(K={name:K});const Z=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},K),xe=Z.name;if("string"!=typeof xe||!xe)throw xn.create("bad-app-name",{appName:String(xe)});const We=mn.get(xe);if(We){if((0,oe.vZ)(H,We.options)&&(0,oe.vZ)(Z,We.config))return We;throw xn.create("duplicate-app",{appName:xe})}const It=new B.H0(xe);for(const an of Ln.values())It.addComponent(an);const ln=new es(H,Z,It);return mn.set(xe,ln),ln}function Vn(H=Gt){const K=mn.get(H);if(!K)throw xn.create("no-app",{appName:H});return K}function Di(){return Array.from(mn.values())}function Oi(H){return nt.apply(this,arguments)}function nt(){return(nt=(0,f.Z)(function*(H){const K=H.name;mn.has(K)&&(mn.delete(K),yield Promise.all(H.container.getProviders().map(Z=>Z.delete())),H.isDeleted=!0)})).apply(this,arguments)}function yr(H,K,Z){var xe;let We=null!==(xe=Ke[H])&&void 0!==xe?xe:H;Z&&(We+=`-${Z}`);const It=We.match(/\s|\//),ln=K.match(/\s|\//);if(It||ln){const an=[`Unable to register library "${We}" with version "${K}":`];return It&&an.push(`library name "${We}" contains illegal characters (whitespace or "/")`),It&&ln&&an.push("and"),ln&&an.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void q.warn(an.join(" "))}Wt(new B.wA(`${We}-version`,()=>({library:We,version:K}),"VERSION"))}function Un(H,K){if(null!==H&&"function"!=typeof H)throw xn.create("invalid-log-argument");(0,P.Am)(H,K)}function hn(H){(0,P.Ub)(H)}const vn="firebase-heartbeat-store";let wn=null;function _n(){return wn||(wn=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(H,K)=>{0===K&&H.createObjectStore(vn)}}).catch(H=>{throw xn.create("idb-open",{originalErrorMessage:H.message})})),wn}function mt(){return(mt=(0,f.Z)(function*(H){var K;try{return(yield _n()).transaction(vn).objectStore(vn).get(wr(H))}catch(Z){if(Z instanceof oe.ZR)q.warn(Z.message);else{const xe=xn.create("idb-get",{originalErrorMessage:null===(K=Z)||void 0===K?void 0:K.message});q.warn(xe.message)}}})).apply(this,arguments)}function kt(H,K){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,f.Z)(function*(H,K){var Z;try{const We=(yield _n()).transaction(vn,"readwrite");return yield We.objectStore(vn).put(K,wr(H)),We.done}catch(xe){if(xe instanceof oe.ZR)q.warn(xe.message);else{const We=xn.create("idb-set",{originalErrorMessage:null===(Z=xe)||void 0===Z?void 0:Z.message});q.warn(We.message)}}})).apply(this,arguments)}function wr(H){return`${H.name}!${H.options.appId}`}class kr{constructor(K){this.container=K,this._heartbeatsCache=null;const Z=this.container.getProvider("app").getImmediate();this._storage=new zt(Z),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var K=this;return(0,f.Z)(function*(){const xe=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=Ft();if(null===K._heartbeatsCache&&(K._heartbeatsCache=yield K._heartbeatsCachePromise),K._heartbeatsCache.lastSentHeartbeatDate!==We&&!K._heartbeatsCache.heartbeats.some(It=>It.date===We))return K._heartbeatsCache.heartbeats.push({date:We,agent:xe}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(It=>{const ln=new Date(It.date).valueOf();return Date.now()-ln<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,f.Z)(function*(){if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null===K._heartbeatsCache||0===K._heartbeatsCache.heartbeats.length)return"";const Z=Ft(),{heartbeatsToSend:xe,unsentEntries:We}=function ti(H,K=1024){const Z=[];let xe=H.slice();for(const We of H){const It=Z.find(ln=>ln.agent===We.agent);if(It){if(It.dates.push(We.date),Q(Z)>K){It.dates.pop();break}}else if(Z.push({agent:We.agent,dates:[We.date]}),Q(Z)>K){Z.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:Z,unsentEntries:xe}}(K._heartbeatsCache.heartbeats),It=(0,oe.L)(JSON.stringify({version:2,heartbeats:xe}));return K._heartbeatsCache.lastSentHeartbeatDate=Z,We.length>0?(K._heartbeatsCache.heartbeats=We,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),It})()}}function Ft(){return(new Date).toISOString().substring(0,10)}class zt{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,f.Z)(function*(){return(yield K._canUseIndexedDBPromise)&&(yield function gt(H){return mt.apply(this,arguments)}(K.app))||{heartbeats:[]}})()}overwrite(K){var Z=this;return(0,f.Z)(function*(){var xe;if(yield Z._canUseIndexedDBPromise){const It=yield Z.read();return kt(Z.app,{lastSentHeartbeatDate:null!==(xe=K.lastSentHeartbeatDate)&&void 0!==xe?xe:It.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var Z=this;return(0,f.Z)(function*(){var xe;if(yield Z._canUseIndexedDBPromise){const It=yield Z.read();return kt(Z.app,{lastSentHeartbeatDate:null!==(xe=K.lastSentHeartbeatDate)&&void 0!==xe?xe:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...K.heartbeats]})}})()}}function Q(H){return(0,oe.L)(JSON.stringify({version:2,heartbeats:H})).length}!function G(H){Wt(new B.wA("platform-logger",K=>new ye(K),"PRIVATE")),Wt(new B.wA("heartbeat",K=>new kr(K),"PRIVATE")),yr(fe,"0.7.33",H),yr(fe,"0.7.33","esm2017"),yr("fire-js","")}("")},4859:(pt,Re,F)=>{F.d(Re,{H0:()=>fe,wA:()=>P,zt:()=>le});var f=F(5861),B=F(2090);class P{constructor(q,z,X){this.name=q,this.instanceFactory=z,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const oe="[DEFAULT]";class le{constructor(q,z){this.name=q,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const z=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(z)){const X=new B.BH;if(this.instancesDeferred.set(z,X),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:z});Ge&&X.resolve(Ge)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(q){var z;const X=this.normalizeInstanceIdentifier(q?.identifier),Ge=null!==(z=q?.optional)&&void 0!==z&&z;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Oe){if(Ge)return null;throw Oe}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function me(ve){return"EAGER"===ve.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[z,X]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(z);try{const Oe=this.getOrInitializeService({instanceIdentifier:Ge});X.resolve(Oe)}catch{}}}}clearInstance(q=oe){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,f.Z)(function*(){const z=Array.from(q.instances.values());yield Promise.all([...z.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...z.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=oe){return this.instances.has(q)}getOptions(q=oe){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:z={}}=q,X=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:X,options:z});for(const[Oe,Te]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Oe)&&Te.resolve(Ge);return Ge}onInit(q,z){var X;const Ge=this.normalizeInstanceIdentifier(z),Oe=null!==(X=this.onInitCallbacks.get(Ge))&&void 0!==X?X:new Set;Oe.add(q),this.onInitCallbacks.set(Ge,Oe);const Te=this.instances.get(Ge);return Te&&q(Te,Ge),()=>{Oe.delete(q)}}invokeOnInitCallbacks(q,z){const X=this.onInitCallbacks.get(z);if(X)for(const Ge of X)try{Ge(q,z)}catch{}}getOrInitializeService({instanceIdentifier:q,options:z={}}){let X=this.instances.get(q);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=q,ve===oe?void 0:ve),options:z}),this.instances.set(q,X),this.instancesOptions.set(q,z),this.invokeOnInitCallbacks(X,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,X)}catch{}var ve;return X||null}normalizeInstanceIdentifier(q=oe){return this.component?this.component.multipleInstances?q:oe:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const z=this.getProvider(q.name);if(z.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);z.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const z=new le(q,this);return this.providers.set(q,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Re,F)=>{F.d(Re,{Am:()=>ve,Ub:()=>fe,Yd:()=>me,in:()=>B});const f=[];var B=(()=>{return(q=B||(B={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",B;var q})();const P={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},oe=B.INFO,le={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ye=(q,z,...X)=>{if(z<q.logLevel)return;const Ge=(new Date).toISOString(),Oe=le[z];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Oe](`[${Ge}]  ${q.name}:`,...X)};class me{constructor(z){this.name=z,this._logLevel=oe,this._logHandler=ye,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in B))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?P[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...z),this._logHandler(this,B.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...z),this._logHandler(this,B.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,B.INFO,...z),this._logHandler(this,B.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,B.WARN,...z),this._logHandler(this,B.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...z),this._logHandler(this,B.ERROR,...z)}}function fe(q){f.forEach(z=>{z.setLogLevel(q)})}function ve(q,z){for(const X of f){let Ge=null;z&&z.level&&(Ge=P[z.level]),X.userLogHandler=null===q?null:(Oe,Te,...st)=>{const Ce=st.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Te>=(Ge??Oe.logLevel)&&q({level:B[Te].toLowerCase(),message:Ce,args:st,type:Oe.name})}}}},8766:(pt,Re,F)=>{F.d(Re,{Lj:()=>Le,X3:()=>et});var f=F(5861);let P,oe;const me=new WeakMap,fe=new WeakMap,ve=new WeakMap,q=new WeakMap,z=new WeakMap;let Oe={get(de,we,J){if(de instanceof IDBTransaction){if("done"===we)return fe.get(de);if("objectStoreNames"===we)return de.objectStoreNames||ve.get(de);if("store"===we)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return _e(de[we])},set:(de,we,J)=>(de[we]=J,!0),has:(de,we)=>de instanceof IDBTransaction&&("done"===we||"store"===we)||we in de};function Ce(de){return"function"==typeof de?function st(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...we){return de.apply(Xe(this),we),_e(me.get(this))}:function(...we){return _e(de.apply(Xe(this),we))}:function(we,...J){const te=de.call(Xe(this),we,...J);return ve.set(te,we.sort?we.sort():[we]),_e(te)}}(de):(de instanceof IDBTransaction&&function Ge(de){if(fe.has(de))return;const we=new Promise((J,te)=>{const pe=()=>{de.removeEventListener("complete",ae),de.removeEventListener("error",Ue),de.removeEventListener("abort",Ue)},ae=()=>{J(),pe()},Ue=()=>{te(de.error||new DOMException("AbortError","AbortError")),pe()};de.addEventListener("complete",ae),de.addEventListener("error",Ue),de.addEventListener("abort",Ue)});fe.set(de,we)}(de),((de,we)=>we.some(J=>de instanceof J))(de,function le(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,Oe):de)}function _e(de){if(de instanceof IDBRequest)return function X(de){const we=new Promise((J,te)=>{const pe=()=>{de.removeEventListener("success",ae),de.removeEventListener("error",Ue)},ae=()=>{J(_e(de.result)),pe()},Ue=()=>{te(de.error),pe()};de.addEventListener("success",ae),de.addEventListener("error",Ue)});return we.then(J=>{J instanceof IDBCursor&&me.set(J,de)}).catch(()=>{}),z.set(we,de),we}(de);if(q.has(de))return q.get(de);const we=Ce(de);return we!==de&&(q.set(de,we),z.set(we,de)),we}const Xe=de=>z.get(de);function et(de,we,{blocked:J,upgrade:te,blocking:pe,terminated:ae}={}){const Ue=indexedDB.open(de,we),je=_e(Ue);return te&&Ue.addEventListener("upgradeneeded",yt=>{te(_e(Ue.result),yt.oldVersion,yt.newVersion,_e(Ue.transaction))}),J&&Ue.addEventListener("blocked",()=>J()),je.then(yt=>{ae&&yt.addEventListener("close",()=>ae()),pe&&yt.addEventListener("versionchange",()=>pe())}).catch(()=>{}),je}function Le(de,{blocked:we}={}){const J=indexedDB.deleteDatabase(de);return we&&J.addEventListener("blocked",()=>we()),_e(J).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],ze=new Map;function se(de,we){if(!(de instanceof IDBDatabase)||we in de||"string"!=typeof we)return;if(ze.get(we))return ze.get(we);const J=we.replace(/FromIndex$/,""),te=we!==J,pe=Ae.includes(J);if(!(J in(te?IDBIndex:IDBObjectStore).prototype)||!pe&&!Ne.includes(J))return;const ae=function(){var Ue=(0,f.Z)(function*(je,...yt){const Jt=this.transaction(je,pe?"readwrite":"readonly");let Gt=Jt.store;return te&&(Gt=Gt.index(yt.shift())),(yield Promise.all([Gt[J](...yt),pe&&Jt.done]))[0]});return function(yt){return Ue.apply(this,arguments)}}();return ze.set(we,ae),ae}!function Te(de){Oe=de(Oe)}(de=>({...de,get:(we,J,te)=>se(we,J)||de.get(we,J,te),has:(we,J)=>!!se(we,J)||de.has(we,J)}))},5861:(pt,Re,F)=>{function f(P,oe,le,ye,me,fe,ve){try{var q=P[fe](ve),z=q.value}catch(X){return void le(X)}q.done?oe(z):Promise.resolve(z).then(ye,me)}function B(P){return function(){var oe=this,le=arguments;return new Promise(function(ye,me){var fe=P.apply(oe,le);function ve(z){f(fe,ye,me,ve,q,"next",z)}function q(z){f(fe,ye,me,ve,q,"throw",z)}ve(void 0)})}}F.d(Re,{Z:()=>B})}},pt=>{pt(pt.s=3656)}]);